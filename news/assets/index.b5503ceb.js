import{_ as e,p as t}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{k as a,l as s,p as l,m as o}from"./studentAttendance.d03c3cd1.js";import{Y as i}from"./table.81b98c8b.js";import{o as n,a as r,b as c,a9 as d,b5 as u,b4 as p,q as m,w as v,f as y,b8 as f,c as h,a3 as b,O as S,a7 as _,a2 as j,F as N,a8 as x,u as T,a5 as w}from"./@vue.919ff404.js";import"./ant-design-vue.db4d48e3.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const k=e=>(u("data-v-d91deffe"),e=e(),p(),e),I={class:"census_box"},g=k((()=>c("h2",null,"当前考勤状态统计",-1))),C={class:"census"},D=k((()=>c("i",{class:"census_triangle"},null,-1))),U={class:"census_item",style:{color:"#00b781"}},Y={class:"census_item",style:{color:"#fc941f"}},L={class:"census_item",style:{color:"#1ec1c3"}},A={class:"census_item",style:{color:"#f5222d"}},E={class:"census_item",style:{color:"#717171"}},F={class:"census_item",style:{color:"#595959",border:"none"}};var M=e({__name:"index",props:{list:{type:Object,default:()=>{}}},setup:e=>(t,a)=>(n(),r("div",I,[g,c("div",C,[D,c("div",U," 总人次："+d(e.list.total)+"人 ",1),c("div",Y," 迟到："+d(e.list.beLateNum)+"人 ",1),c("div",L," 早退："+d(e.list.leaveEarlyNum)+"人 ",1),c("div",A," 缺勤："+d(e.list.absenteeismNum)+"人 ",1),c("div",E," 请假："+d(e.list.leaveNum)+"人 ",1),c("div",F," 未签到："+d(e.list.notSignInNum)+"人 ",1)])]))},[["__scopeId","data-v-d91deffe"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/components/AttendanceCensus/index.vue"]]);const O=[{title:"学生姓名",dataIndex:"studentName",ellipsis:!0,showSorterTooltip:!0,fixed:"left"},{key:"classesName",title:"",dataIndex:"classesName",ellipsis:!0},{title:"人员类型",dataIndex:"userType",ellipsis:!0,showSorterTooltip:!0},{title:"考勤类型",dataIndex:"type",ellipsis:!0,showSorterTooltip:!0},{title:"考勤名称",dataIndex:"attendanceName",ellipsis:!0,showSorterTooltip:!0},{title:"日期",dataIndex:"weekDay",ellipsis:!0,showSorterTooltip:!0},{title:"打卡时段",dataIndex:"periodOfTime",ellipsis:!0,showSorterTooltip:!0},{title:"应签时间",dataIndex:"requiredTime",ellipsis:!0,showSorterTooltip:!0},{title:"实签时间",dataIndex:"signInTime",ellipsis:!0,showSorterTooltip:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0,showSorterTooltip:!0}],V=["正常","缺勤","迟到","早退","无效打卡","请假","未签到"],q=["color: #00b781","color: #F5222D","color: #FC941F","color: #1EC1C3","color: #00b781","color: #717171","color: #595959"];const z={class:"studentAttendance_details"},H={style:{display:"flex","justify-content":"space-between","margin-top":"38px"}},K={key:1};var B=e({__name:"index",setup(e){const u=m({personnelType:1,statusList:[],detailsDataSource:[],census:{total:0,beLateNum:0,leaveEarlyNum:0,absenteeismNum:0,leaveNum:0,notSignInNum:0},searchState:{studentName:"",attendanceName:"",time:[],classesId:"",classesName:"",type:"",status:""},classVisible:!1}),p=()=>{const e={...u.searchState,startDate:null===u.searchState.time?"":u.searchState.time[0],endDate:null===u.searchState.time?"":u.searchState.time[1],userType:u.personnelType};a(e,"考勤明细")},k=()=>{Y.update(!1),U()},I=()=>{u.searchState={},1===u.personnelType?(u.searchState.type="",Y.update(!1),U()):(u.searchState.type=1,Y.update(!1),U()),Y.update(!0),U()},g=()=>{u.searchState.classesId=""},C=()=>{u.classVisible=!0},D=e=>{var t,a;u.searchState.classesId=null==(t=e[0])?void 0:t.id,u.searchState.classesName=null==(a=e[0])?void 0:a.showName},U=()=>{const[e,t]=u.searchState.time||[],a={...u.searchState,startDate:e,endDate:t,userType:u.personnelType};s(a).then((e=>{const{absenteeismNum:t,beLateNum:a,leaveEarlyNum:s,leaveNum:l,notSignInNum:o,total:i}=e.data||{};u.census.notSignInNum=o||0,u.census.absenteeismNum=t||0,u.census.total=i||0,u.census.beLateNum=a||0,u.census.leaveEarlyNum=s||0,u.census.leaveNum=l||0}))},Y=e=>{const[t,a]=u.searchState.time||[];return l({...e,...u.searchState,startDate:t,endDate:a,userType:u.personnelType})},L=()=>{},A=()=>{if(!1==(2===u.personnelType&&2===u.searchState.type))u.searchState.classesName="",u.searchState.classesId=""};return v((()=>u.personnelType),((e,t)=>{1===e?(u.searchState.type="",Y.update(!1),U()):(u.searchState.type=1,Y.update(!1),U())})),y((async()=>{await void o(["attendance_status"]).then((e=>{var t;const{data:a}=e;u.statusList=(null==(t=a[0])?void 0:t.list)||[]})),await U()})),(e,a)=>{const s=f("a-radio-button"),l=f("a-radio-group"),o=f("a-input"),m=f("a-form-item"),v=f("a-range-picker"),y=f("a-select-option"),U=f("a-select"),E=f("SearchOutlined"),F=f("a-button"),B=f("redo-outlined"),G=f("a-form"),J=t;return n(),r("div",z,[h(l,{value:u.personnelType,"onUpdate:value":a[0]||(a[0]=e=>u.personnelType=e),"button-style":"solid",onChange:L},{default:b((()=>[h(s,{value:1},{default:b((()=>[S("学生")])),_:1}),h(s,{value:2},{default:b((()=>[S("老师")])),_:1})])),_:1},8,["value"]),c("div",H,[h(G,{layout:"inline"},{default:b((()=>[h(m,{label:"姓名："},{default:b((()=>[h(o,{value:u.searchState.studentName,"onUpdate:value":a[1]||(a[1]=e=>u.searchState.studentName=e),placeholder:"请输入姓名",style:{width:"120px","margin-bottom":"24px"}},null,8,["value"])])),_:1}),h(m,{label:"考勤名："},{default:b((()=>[h(o,{style:{width:"120px"},value:u.searchState.attendanceName,"onUpdate:value":a[2]||(a[2]=e=>u.searchState.attendanceName=e),placeholder:"请输入考勤名"},null,8,["value"])])),_:1}),h(m,{label:"日期："},{default:b((()=>[h(v,{style:{width:"200px"},value:u.searchState.time,"onUpdate:value":a[3]||(a[3]=e=>u.searchState.time=e),valueFormat:"YYYY-MM-DD",format:"YYYY-MM-DD"},null,8,["value"])])),_:1}),_(' <a-form-item label="人员类型：">\r\n                    <a-select\r\n                        v-model:value="state.searchState.userType"\r\n                        ref="select"\r\n                            placeholder="请选择"\r\n                            style="width: 100px"\r\n                        >\r\n                            <a-select-option value="">全部</a-select-option>\r\n                            <a-select-option :value="1">教师</a-select-option>\r\n                            <a-select-option :value="2">学生</a-select-option>\r\n                        </a-select>\r\n                    </a-form-item> '),h(m,{label:"考勤类型："},{default:b((()=>[h(U,{value:u.searchState.type,"onUpdate:value":a[4]||(a[4]=e=>u.searchState.type=e),ref:"select",placeholder:"请选择",style:{width:"120px"},onChange:A},{default:b((()=>[1===u.personnelType?(n(),j(y,{key:0,value:""},{default:b((()=>[S("全部")])),_:1})):_("v-if",!0),1===u.personnelType?(n(),j(y,{key:1,value:0},{default:b((()=>[S("出入校考勤")])),_:1})):_("v-if",!0),h(y,{value:1},{default:b((()=>[S("事件考勤")])),_:1}),_(' <a-select-option :value="2">课堂</a-select-option> '),h(y,{value:2},{default:b((()=>[S("行政班课堂考勤")])),_:1}),h(y,{value:3},{default:b((()=>[S("走班课堂考勤")])),_:1})])),_:1},8,["value"])])),_:1}),h(m,{label:"状态："},{default:b((()=>[h(U,{value:u.searchState.status,"onUpdate:value":a[5]||(a[5]=e=>u.searchState.status=e),style:{width:"120px"},placeholder:"请选择"},{default:b((()=>[h(y,{value:""},{default:b((()=>[S("全部")])),_:1}),(n(!0),r(N,null,x(u.statusList,(e=>(n(),j(y,{key:e.value,value:e.value},{default:b((()=>[S(d(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),1==u.personnelType||2==u.searchState.type?(n(),j(m,{key:0,label:"班级：",style:{width:"180px"}},{default:b((()=>[h(o,{allowClear:!0,value:u.searchState.classesName,"onUpdate:value":a[6]||(a[6]=e=>u.searchState.classesName=e),placeholder:"请输入",onClick:C,onChange:g},null,8,["value"])])),_:1})):_("v-if",!0),h(m,null,{default:b((()=>[h(F,{type:"primary",onClick:k,style:{"margin-bottom":"24px"}},{icon:b((()=>[h(E)])),default:b((()=>[S(" 查 询 ")])),_:1}),h(F,{style:{"margin-left":"16px"},onClick:I},{icon:b((()=>[h(B)])),default:b((()=>[S(" 重 置 ")])),_:1})])),_:1})])),_:1}),h(F,{onClick:p},{default:b((()=>[S("导出")])),_:1})]),h(T(M),{list:u.census},null,8,["list"]),h(T(i),{columns:T(O),loadData:Y,rowKey:"id"},{headerCell:b((({column:e})=>["classesName"===e.key?(n(),r(N,{key:0},[S(d(2===u.personnelType&&1===u.searchState.type?"部门":"班级"),1)],64)):_("v-if",!0)])),bodyCell:b((({column:e,record:t})=>["status"===e.key?(n(),r("div",{key:0,style:w(T(q)[t.status])},d(T(V)[t.status]),5)):_("v-if",!0),"userType"===e.dataIndex?(n(),r("div",K,d(["","学生","老师"][t.userType]),1)):_("v-if",!0)])),_:1},8,["columns"]),h(J,{multiple:!1,mode:"depa",tabs:[{tab:"班级",key:2,checked:!0}],visible:u.classVisible,"onUpdate:visible":a[7]||(a[7]=e=>u.classVisible=e),checked:u.classesArr,"onUpdate:checked":a[8]||(a[8]=e=>u.classesArr=e),onHandleOk:D},null,8,["visible","checked"])])}}},[["__scopeId","data-v-32bf838d"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/studentAttendance/details/index.vue"]]);export{B as default};
