import"./vue.a2f518ee.js";import{T as e}from"./index.112873ae.js";import{n as a,w as s,x as t,l as o,y as i}from"./exam.ac418e80.js";import{u as n,a as l}from"./vue-router.907b547c.js";import{_ as d}from"./index.7061e8ea.js";import{r,q as c,f as p,b8 as m,o as u,a as g,b as y,c as b,a3 as f,O as v,u as x,a7 as j}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./ant-design-vue.db4d48e3.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const I={class:"pageMain"},h={class:"headCon"},w={class:"comType"},N={key:0,class:"room"},C={class:"head"},S={key:1,class:"classBox"},k={class:"head"};var P=d({__name:"index",setup(d){n();const P=l(),_=[{title:"序号",key:"id",customRender:({index:e})=>`${e+1}`},{title:"考场",key:"siteName",dataIndex:"siteName"},{title:"姓名",key:"personName",dataIndex:"personName"},{title:"班级",key:"classesName",dataIndex:"classesName"},{title:"准考证号",key:"examineNumber",dataIndex:"examineNumber"},{title:"座位号",key:"seat",dataIndex:"seat"}],O=[{title:"序号",key:"id",customRender:({index:e})=>`${e+1}`},{title:"考场",key:"siteName",dataIndex:"siteName"},{title:"姓名",key:"personName",dataIndex:"personName"},{title:"班级",key:"classesName",dataIndex:"classesName"},{title:"准考证号",key:"examineNumber",dataIndex:"examineNumber"},{title:"座位号",key:"seat",dataIndex:"seat"}],q=r("room"),U=c({roomSpinning:!1,classSpinning:!1,siteOptions:[],classesOptions:[],tableSource:[],roomPaginations:{pageNo:1,pageSize:10},classPaginations:{pageNo:1,pageSize:10,total:0}}),R=async()=>{U.roomSpinning=!0;const e={...U.roomPaginations,examinationId:P.query.id,siteId:U.siteId};try{const{data:a}=await s(e);U.roomSource=a.list,U.roomPaginations.total=a.total,U.roomSpinning=!1}catch(a){U.roomSpinning=!1}},A=async()=>{U.classSpinning=!0;const e={...U.classPaginations,examinationId:P.query.id,groupId:U.groupId,classesId:U.classesId};try{const{data:a}=await s(e);U.classSource=a.list,U.classPaginations.total=a.total,U.classSpinning=!1}catch(a){U.classSpinning=!1}},L=()=>{U.roomPaginations.pageNo=1,R()},z=e=>{U.roomPaginations=e,R()},B=e=>{U.classPaginations=e,A()},M=async()=>{const e={examinationId:P.query.id,siteId:U.siteId};await t(e).then((e=>{const a=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download","考场-考试座位表.xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}))},T=async e=>{U.classPaginations.pageNo=1,U.classesId="",U.classesOptions=[],e&&await(async()=>{const e={examinationId:P.query.id,groupId:U.groupId},{data:a}=await i(e);U.classesOptions=a})(),await A()},E=async()=>{U.classPaginations.pageNo=1,await A()},$=async()=>{const e={examinationId:P.query.id,groupId:U.groupId,classesId:U.classesId};await t(e).then((e=>{const a=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download","班级-考试座位表.xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}))};return p((()=>{(async()=>{const{data:e}=await a({examinationId:P.query.id});U.siteOptions=e})(),R(),(async()=>{const{data:e}=await o({id:P.query.id});U.groupOptions=e})(),A()})),(a,s)=>{const t=m("a-radio-button"),o=m("a-radio-group"),i=m("a-select"),n=m("a-form-item"),l=m("a-form"),d=m("a-button");return u(),g("div",I,[y("div",h,[b(o,{value:q.value,"onUpdate:value":s[0]||(s[0]=e=>q.value=e),"button-style":"solid"},{default:f((()=>[b(t,{value:"room"},{default:f((()=>[v("考场")])),_:1}),b(t,{value:"class"},{default:f((()=>[v("班级")])),_:1})])),_:1},8,["value"])]),y("div",w,["room"===q.value?(u(),g("div",N,[y("div",C,[b(l,{layout:"inline"},{default:f((()=>[b(n,{label:"考场:"},{default:f((()=>[b(i,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},allowClear:"",onChange:L,value:U.siteId,"onUpdate:value":s[1]||(s[1]=e=>U.siteId=e),placeholder:"请选择",options:U.siteOptions,showArrow:!0,"field-names":{label:"name",value:"id"}},null,8,["getPopupContainer","value","options"])])),_:1})])),_:1}),b(d,{onClick:M},{default:f((()=>[v("导出")])),_:1})]),y("div",null,[b(x(e),{spinning:U.roomSpinning,paginations:U.roomPaginations,columns:_,dataSource:U.roomSource,bordered:!1,onChange:z},{bodyCell:f((({column:e,record:a})=>[])),_:1},8,["spinning","paginations","dataSource"])])])):j("v-if",!0),"class"===q.value?(u(),g("div",S,[y("div",k,[b(l,{layout:"inline"},{default:f((()=>[b(n,{label:"年级:"},{default:f((()=>[b(i,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},allowClear:"",onChange:T,value:U.groupId,"onUpdate:value":s[2]||(s[2]=e=>U.groupId=e),placeholder:"请选择",options:U.groupOptions,showArrow:!0,"field-names":{label:"objectName",value:"id"}},null,8,["getPopupContainer","value","options"])])),_:1}),b(n,{label:"班级:"},{default:f((()=>[b(i,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},allowClear:"",onChange:E,value:U.classesId,"onUpdate:value":s[3]||(s[3]=e=>U.classesId=e),placeholder:"请选择",options:U.classesOptions,showArrow:!0,"field-names":{label:"classesName",value:"classesId"}},null,8,["getPopupContainer","value","options"])])),_:1})])),_:1}),b(d,{onClick:$},{default:f((()=>[v("导出")])),_:1})]),y("div",null,[b(x(e),{spinning:U.classSpinning,paginations:U.classPaginations,columns:O,dataSource:U.classSource,bordered:!1,onChange:B},{bodyCell:f((({column:e,record:a})=>[])),_:1},8,["spinning","paginations","dataSource"])])])):j("v-if",!0)])])}}},[["__scopeId","data-v-d1d5a3f6"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/examManage/affair/examSeatTable/index.vue"]]);export{P as default};
