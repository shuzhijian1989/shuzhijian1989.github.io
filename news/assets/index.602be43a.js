import"./vue.a2f518ee.js";import{_ as e}from"./empty.1f473950.js";import{m as t,M as i}from"./ant-design-vue.db4d48e3.js";import{_ as l,bR as s,bS as a,bT as o,bU as n,bV as d,bW as r,bX as c,bY as u,bZ as h,b_ as p}from"./index.7061e8ea.js";import{u as g,a as m}from"./vue-router.907b547c.js";import{f as b,g as y,h as v,i as f}from"./element-plus.8ba44712.js";import{d as w}from"./@vueuse.66569c4a.js";import{e as k,r as _,q as x,f as L,b8 as M,o as I,a as C,b as j,c as T,a3 as z,a7 as B,a9 as P,O as D,F as E,a8 as A,a4 as H,u as S,a2 as V,a5 as U,M as N,b5 as O,b4 as q,n as R}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./@element-plus.8b57b6bd.js";const F=e=>(O("data-v-39cad22e"),e=e(),q(),e),Y={class:"homepage_container_main"},K={class:"container_main"},W={class:"header"},X=F((()=>j("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1))),Z={style:{transform:"translateY(-57px)"}},G={class:"homepageLeft_chlidmain"},J=F((()=>j("div",{class:"moulde_index"},"选择功能尺寸",-1))),Q={class:"tab_style"},$=F((()=>j("span",{class:"tab_style_title"},"功能",-1))),ee={class:"tab_style_list"},te=["onClick"],ie={class:"tab_style"},le=F((()=>j("span",{class:"tab_style_title"},"尺寸",-1))),se={class:"tab_style_list"},ae=["onClick"],oe={class:"manu_message"},ne={key:0},de={style:{"margin-bottom":"20px"}},re=["src"],ce={class:"manu_title"},ue={key:0},he={style:{float:"right","margin-right":"10px"}},pe={key:1,class:"no_dataLayout"},ge=[F((()=>j("img",{src:e,alt:""},null,-1))),F((()=>j("p",null,"暂无数据",-1)))],me={class:"homepageRight_chlidmain"},be={class:"screen_main"},ye={class:"screen_title"},ve=F((()=>j("span",{style:{"padding-right":"8px"}},[j("span",{style:{color:"#ff0000"}},"*"),D("模板名称： ")],-1))),fe={class:"show-img"},we=["onClick"],ke=["src"],_e={class:"add_btn"},xe={class:"application_main"},Le=F((()=>j("span",{class:"application_title"},"应用到：",-1))),Me={class:"background_box"},Ie=F((()=>j("span",null,"选择背景样式：",-1))),Ce=["src"],je=k({name:"addOrEditPage"});var Te=l(Object.assign(je,{props:{direction:String,templateID:String},emits:["showList"],setup(e,{emit:l}){const u=e,h=g(),p=_();x({henImage:"https://brand-yide.oss-cn-shenzhen.aliyuncs.com/202101/layout/horizontal%20background/hbtjbj1-1.png",shuImage:"https://brand-yide.oss-cn-shenzhen.aliyuncs.com/202101/layout/vertical%20background/sbtjbj1-1.png",henPhoto:"https://brand-yide.oss-cn-shenzhen.aliyuncs.com/202101/layout/horizontal%20background/hbtjbj1.png",shuPhoto:"https://brand-yide.oss-cn-shenzhen.aliyuncs.com/202101/layout/vertical%20background/sbtjbj1.png"});const m={label:"name",value:"id",children:"children"},k=x({updateKey:1,brandId:[],result:[],equipment:[],backgroundList:[],layout:[],direction:"",photoList:[{layoutclassmodellist:[]}],templateTabList:[],activeList:[],selectModuleList:[],selectModuleModel:[],hengscreenHeight:79,shuscreenHeight:67.5,paginationIndex:0,initialIndex:0,modules:{direction:"",width:"",high:"",schoolClassifyId:""},establish:{isAllBrand:!0,direction:"",brandIds:[],details:[],name:"",backgropPhoto:"",photo:""}});k.direction=u.direction,k.modules.direction=u.direction,k.establish.direction=u.direction;const O=()=>{h.replace({query:{}}),l("showList",!1)};let q=_(0),F=_(0);const je=e=>{for(let i=0;i<e.length;i++){let l=e[i].h,s=e[i].y;if("0"==k.direction){if(l+s>6){for(let t=0;t<k.selectModuleModel.length;t++){const l=k.selectModuleModel[t];e[i].img==l&&k.selectModuleModel.splice(t,1)}e.splice(i,1),t.destroy(),t.error("尺寸超出当前展示区可布局范围！"),je(e)}}else if(l+s>8){for(let t=0;t<k.selectModuleModel.length;t++){const l=k.selectModuleModel[t];e[i].img==l&&k.selectModuleModel.splice(t,1)}e.splice(i,1),t.destroy(),t.error("尺寸超出当前展示区可布局范围！"),je(e)}}},Te=async()=>{window.dispatchEvent(new Event("resize"));const e=await a(k.modules);k.selectModuleList=e.data;for(let t=0;t<k.selectModuleList.length;t++)k.selectModuleList[t].width=Number(k.selectModuleList[t].width),k.selectModuleList[t].high=Number(k.selectModuleList[t].high);for(let t=0;t<k.photoList.length;t++){const e=k.photoList[t].layoutclassmodellist;for(let t=0;t<e.length;t++){const i=e[t].img;-1===k.selectModuleModel.indexOf(i)&&k.selectModuleModel.push(i)}}},ze=w((()=>{let e=k.photoList[k.paginationIndex].layoutclassmodellist;e.length>0?i.confirm({title:"提示",type:"warning",content:"展示区有模板，请确定删除?",confirmButtonText:"确定",cancelButtonText:"取消",onOk:()=>{for(let t=0;t<e.length;t++){const i=e[t].img;for(let e=0;e<k.selectModuleModel.length;e++){i==k.selectModuleModel[e]&&k.selectModuleModel.splice(e,1)}e[t].tag}k.photoList.splice(k.paginationIndex,1),t.success("删除成功！")},onCancel(){t.warning("已取消删除!")}}):k.photoList.splice(k.paginationIndex,1)}),1e3),Be=()=>{k.photoList.push({layoutclassmodellist:[]}),k.initialIndex=k.photoList.length-1,R((()=>{p.value.setActiveItem(k.initialIndex)}))},Pe=e=>{k.paginationIndex=e},De=async()=>{if(""==k.establish.name||null==k.establish.name)return t.error("请输入模板名称！"),!1;k.establish.isAllBrand?k.establish.brandIds=[]:k.establish.brandIds=k.brandId;let e=k.photoList,i=[];for(let t=0;t<e.length;t++){let l=e[t].layoutclassmodellist;for(let e=0;e<l.length;e++){let s={url:l[e].url,moduleId:l[e].moduleId,imgType:l[e].imgType,width:l[e].w,secPageBackTime:l[e].secPageBackTime,height:l[e].h,x:l[e].x,y:l[e].y,images:l[e].img,descriptive:l[e].descriptive,tag:l[e].tag,pagination:t};i.push(s)}}k.establish.details=i,k.establish.details.length>0?u.templateID?(k.establish.id=u.templateID.toString(),await o(k.establish),t.success("编辑成功!"),O()):(await n(k.establish),t.success("创建成功!"),O()):t.error("模板详情不能为空!")},Ee=w((async()=>{let e={direction:k.direction};const{data:t}=await c(e);k.equipment=t}),5e3);return L((()=>{window.dispatchEvent(new Event("resize")),(async()=>{const{data:e}=await r({direction:k.direction});k.backgroundList=e||[],k.establish.backgropPhoto=k.backgroundList[0].imagebg,k.establish.photo=k.backgroundList[0].image})(),(async()=>{let e={direction:k.direction,types:[1,2]};const{data:t}=await s(e);k.templateTabList=t.classifyList,k.templateTabList.unshift({name:"全部",id:""}),k.activeList=t.sizeList,k.activeList.unshift({high:"",width:""}),Te()})(),u.templateID&&(async()=>{const{data:e}=await d(u.templateID);k.establish.name=e.name,k.establish.backgropPhoto=e.backgropPhoto,k.establish.photo=e.photo;const t=e.details;for(let i=0;i<t.length;i++){const e=Number(t[i].pagination);if(""!=e&&null!=e){k.photoList=[];for(let t=0;t<e+1;t++){let e={layoutclassmodellist:[]};k.photoList.push(e)}}}for(let i=0;i<t.length;i++){const e=Number(t[i].pagination);let l={i:t[i].id,x:Number(t[i].x),y:Number(t[i].y),w:Number(t[i].width),h:Number(t[i].height),img:t[i].images,tag:t[i].tag,url:t[i].url,moduleId:t[i].moduleId,imgType:t[i].imgType,descriptive:t[i].descriptive,secPageBackTime:t[i].secPageBackTime};k.photoList[e].layoutclassmodellist.push(l)}})()})),(e,i)=>{const l=M("a-button"),s=b,a=y,o=M("a-input"),n=M("grid-item"),d=M("grid-layout"),r=v,c=f,h=M("minus-outlined"),g=M("plus-outlined"),w=M("a-radio"),_=M("a-radio-group"),x=M("home-outlined"),L=M("a-tree-select");return I(),C("div",Y,[j("div",K,[j("div",W,[T(l,{type:"text",class:"tabs_back",onClick:O},{default:z((()=>[B(' <arrow-left-outlined class="tabs_back__icon" /> '),X])),_:1}),j("span",null,P(u.templateID?"编辑模板":"新建模板"),1)]),j("div",null,[T(l,{onClick:O},{default:z((()=>[D("返回")])),_:1}),T(l,{type:"primary",style:{margin:"0px 12px"},onClick:De},{default:z((()=>[D("保存")])),_:1})])]),j("div",Z,[j("div",G,[J,j("div",Q,[$,j("div",ee,[(I(!0),C(E,null,A(k.templateTabList,((e,t)=>(I(),C("span",{key:t,onClick:i=>((e,t)=>{k.modules.schoolClassifyId=e.id,q.value=t,Te()})(e,t),class:H([S(q)==t?"actived":"","tab_content"])},P(e.name.length>4?e.name.substring(0,4)+"...":e.name),11,te)))),128))])]),j("div",ie,[le,j("div",se,[(I(!0),C(E,null,A(k.activeList,((e,t)=>(I(),C("span",{onClick:i=>((e,t)=>{k.modules.high=e.high,k.modules.width=e.width,F.value=t,Te()})(e,t),class:H(["tab_content",S(F)==t?"actived":""]),key:t},P(""==e.width&&""==e.high?"全部":e.width+"*"+e.high),11,ae)))),128))])]),j("div",oe,[k.selectModuleList.length>0?(I(),C("div",ne,[T(a,{modelValue:k.selectModuleModel,"onUpdate:modelValue":i[0]||(i[0]=e=>k.selectModuleModel=e)},{default:z((()=>[(I(!0),C(E,null,A(k.selectModuleList,((e,i)=>(I(),V(s,{onChange:e=>((e,i)=>{let l,s,a;window.dispatchEvent(new Event("resize"));let o=k.selectModuleList[e].images;if(0==i)for(let t=0;t<k.photoList.length;t++){let e=k.photoList[t].layoutclassmodellist;for(let t=0;t<e.length;t++)e[t].img==o&&e.splice(t,1)}else{for(let e=0;e<k.selectModuleModel.length;e++)o==k.selectModuleModel[e]&&(s=o,a=e);if(null!=s){for(let t=0;t<k.selectModuleList.length;t++)k.selectModuleList[t].images==s&&(l=k.selectModuleList[t]);let e=k.photoList[k.paginationIndex].layoutclassmodellist,i={i:l.id,x:0,y:0,w:Number(l.width),h:Number(l.high),tag:l.tag,img:l.images,url:l.url,moduleId:l.id,imgType:l.imgType,descriptive:l.descriptive,secPageBackTime:l.secPageBackTime},o=[],n=0,d=0,r=0;e.map((e=>{o.push(e.y+e.h)})),"0"==k.direction?(n=6,d=8,r=n):"1"==k.direction&&(n=8,d=6,r=n);let c=new Array;for(let t=0;t<d;t++){c[t]=new Array;for(let e=0;e<r;e++)c[t][e]=0}e.map((e=>{for(let t=e.x;t<e.x+e.w;t++)for(let i=e.y;i<e.y+e.h;i++)c[t][i]=1}));for(let t=0;t<r;t++)for(let s=0;s<d;s++)if(d-s>=l.width&&r-t>=l.high){let a=[];for(let e=s;e<s+l.width;e++)for(let i=t;i<t+l.high;i++)a.push(c[s][t]);if(a.indexOf(1)<0)return i.x=s,i.y=t,"0"==k.direction?i.x<8&&i.y<6&&(e.push(i),window.dispatchEvent(new Event("resize")),je(e)):"1"==k.direction&&i.x<6&&i.y<8&&(e.push(i),window.dispatchEvent(new Event("resize")),je(e)),!1}for(let l=0;l<e.length;l++){const s=e[l].i;i.i!=s&&l==e.length-1&&(t.destroy(),t.error("尺寸超出当前展示区可布局范围！"),window.dispatchEvent(new Event("resize")),k.selectModuleModel.splice(a,1))}}}})(i,e),label:e.images,key:i},{default:z((()=>[j("div",de,[j("div",{class:H(e.width<e.high?"manu_img manu_v":"manu_img manu_h")},[j("img",{src:e.images,class:H(e.width==e.high&&"1"==k.direction?"v_img":e.width>e.high&&"1"==k.direction?"h_img":e.width<e.high&&"0"==k.direction?"v_img":e.width>=e.high&&"0"==k.direction?"h_img":""),alt:""},null,10,re)],2),j("div",ce,[e.descriptive?(I(),C("span",ue,"说明："+P(e.descriptive.length>15?e.descriptive.substring(0,15)+"...":e.descriptive),1)):B("v-if",!0),j("span",he,P(e.width)+"*"+P(e.high),1)])])])),_:2},1032,["onChange","label"])))),128))])),_:1},8,["modelValue"])])):(I(),C("div",pe,ge))])]),j("div",me,[j("div",be,[j("span",ye,[ve,T(o,{value:k.establish.name,"onUpdate:value":i[1]||(i[1]=e=>k.establish.name=e),style:{width:"300px"},maxlength:10,placeholder:"请输入模板名称","show-count":""},null,8,["value"])]),B(" 走马灯区域 样式控制小组件可显示区域 区分横竖屏 "),j("div",{class:H(["screen_content","0"==k.direction?"hengscreen_content":"shuscreen_content"]),style:U("0"==k.direction?{backgroundImage:"url("+k.establish.backgropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"40px"}:{backgroundImage:"url("+k.establish.backgropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"20px"})},[T(c,{ref_key:"slideshow",ref:p,onChange:Pe,"indicator-position":"outside",trigger:"click","initial-index":k.initialIndex,autoplay:!1},{default:z((()=>[B(" 走马灯内容模板区域 遍历后生成多页 "),(I(!0),C(E,null,A(k.photoList,((e,t)=>(I(),V(r,{key:t},{default:z((()=>[B(" 自定义模板拖拽布局 横竖屏动态调整 "),T(d,{layout:e.layoutclassmodellist,"col-num":"0"==k.direction?8:6,"row-height":"0"==k.direction?k.hengscreenHeight:k.shuscreenHeight,"max-rows":"0"==k.direction?6:8,"is-draggable":!0,"is-resizable":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!1,responsive:!1,autoSize:!0,onLayoutUpdated:je},{default:z((()=>[B(" 模板拖拽item "),(I(!0),C(E,null,A(e.layoutclassmodellist,((e,i)=>(I(),V(n,{key:e.i,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},{default:z((()=>[j("div",fe,[B(" 模块删除按钮 "),j("div",{class:"del-icon",onClick:N((i=>((e,t)=>{let i=k.photoList[t].layoutclassmodellist;for(let l=0;l<i.length;l++)e==i[l].img&&i.splice(l,1);for(let l=0;l<k.selectModuleModel.length;l++)e==k.selectModuleModel[l]&&k.selectModuleModel.splice(l,1);window.dispatchEvent(new Event("resize"))})(e.img,t)),["stop"])},"x",8,we),j("img",{src:e.img,style:{width:"100%",height:"100%"},alt:""},null,8,ke)])])),_:2},1032,["x","y","w","h","i"])))),128))])),_:2},1032,["layout","col-num","row-height","max-rows"])])),_:2},1024)))),128))])),_:1},8,["initial-index"]),j("div",_e,[k.photoList.length>1?(I(),V(h,{key:0,onClick:N(S(ze),["stop"])},null,8,["onClick"])):B("v-if",!0),T(g,{onClick:N(Be,["stop"])},null,8,["onClick"])])],6),j("div",xe,[Le,T(_,{value:k.establish.isAllBrand,"onUpdate:value":i[2]||(i[2]=e=>k.establish.isAllBrand=e)},{default:z((()=>[T(w,{value:!0},{default:z((()=>[D("全部班牌")])),_:1}),T(w,{value:!1},{default:z((()=>[D("指定班牌")])),_:1})])),_:1},8,["value"]),k.establish.isAllBrand?B("v-if",!0):(I(),V(L,{key:0,style:{width:"300px"},"tree-checkable":"",multiple:"",value:k.brandId,"onUpdate:value":i[3]||(i[3]=e=>k.brandId=e),placeholder:"请选择班牌","allow-clear":"","tree-data":k.equipment,fieldNames:m,onDropdownVisibleChange:S(Ee),maxTagCount:2},{title:z((e=>[T(x,{class:"icon-yellow"}),D(" "+P(e.name),1)])),_:1},8,["value","tree-data","onDropdownVisibleChange"]))]),j("div",Me,[Ie,T(_,{value:k.establish.backgropPhoto,"onUpdate:value":i[4]||(i[4]=e=>k.establish.backgropPhoto=e),buttonStyle:"solid"},{default:z((()=>[(I(!0),C(E,null,A(k.backgroundList,((e,t)=>(I(),V(w,{key:t,value:e.imagebg,onChange:t=>(e=>{k.establish.photo=e.image})(e)},{default:z((()=>[B(" <div class=\"background_main\" :style=\"{backgroundImage:'url('+item.imagebg+')'}\"></div> "),j("img",{class:"background_main",src:e.imagebg,alt:""},null,8,Ce)])),_:2},1032,["value","onChange"])))),128))])),_:1},8,["value"])])])])])])}}}),[["__scopeId","data-v-39cad22e"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/classLayout/components/layoutAddOrEdit.vue"]]);const ze=e=>(O("data-v-d86ccc02"),e=e(),q(),e),Be={key:0,class:"homepage_container"},Pe={class:"homepage_head"},De={class:"homepage_main"},Ee={key:0,class:"no_dataLayout"},Ae=[ze((()=>j("img",{src:e,alt:""},null,-1))),ze((()=>j("p",null,"暂无数据",-1)))],He={key:1},Se={class:"moulde_export"},Ve=["onMouseenter","onMouseleave"],Ue={class:"imgBox"},Ne=ze((()=>j("div",{class:"moulde_btn"},[j("img",{src:"/image/cd3.png",alt:""})],-1))),Oe=["src"],qe=ze((()=>j("div",{class:"maskImg"},null,-1))),Re={style:{color:"rgba(0, 0, 0, 0.85)","font-size":"14px","line-height":"36px"}},Fe=["onMouseenter","onMouseleave"],Ye={class:"imgBox"},Ke=ze((()=>j("div",{class:"moulde_btn"},[j("img",{src:"/image/cd3.png",alt:""})],-1))),We=["src"],Xe=ze((()=>j("div",{class:"maskImg"},null,-1))),Ze={style:{color:"rgba(0, 0, 0, 0.85)","font-size":"14px","line-height":"36px"}},Ge={class:"checkTemplate"},Je={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},Qe={class:"custom-slick-arrow",style:{right:"10px"}},$e={style:{height:"100%",width:"100%"}},et=["src"],tt={class:"slideshow-main"},it={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},lt={class:"custom-slick-arrow",style:{right:"10px"}},st={style:{height:"100%",width:"100%"}},at=["src"],ot={class:"choice"},nt=ze((()=>j("span",null,"选择应用范围:",-1))),dt={key:0},rt={class:"teFooter"},ct=k({name:"classLayout",Components:{LayoutAddOrEdit:Te}});var ut=l(Object.assign(ct,{setup(e){const l=g(),s=m(),a={label:"name",value:"id",children:"children"},o=x({templateID:"",moreBtn:"",noLayout:!1,seeDialogVisible:!1,applyToClassVisible:!1,backgropPhoto:"",CarouselList:[],verticalHeight:41,transverseHeight:28,seetransverseHeight:60,seeverticalHeight:53,applytransverseHeight:47.5,applyverticalHeight:66,isEdit:!1,Layout:[],direction:"0",mouldeList:[],newmouldeList:[],equipment:[],brandId:[],result:[],publish:{isAllBrand:!0,brandIds:[]}}),n=e=>{o.direction=e.target.value,r()},d=()=>{l.replace({query:{...s.query,edit:"edit"}}),o.isEdit=!0},r=async()=>{const e={direction:o.direction},{data:t}=await u(e);0==t.defaultList.length&&0==t.schoolList.length?o.noLayout=!0:o.noLayout=!1,o.mouldeList=t.defaultList,o.newmouldeList=t.schoolList,o.templateID="";for(let i=0;i<o.newmouldeList.length;i++){const e=o.newmouldeList[i].details;o.newmouldeList[i].reLayoutlis=[];for(let t=0;t<e.length;t++){0===e[t].pagination&&o.newmouldeList[i].reLayoutlis.push(e[t])}}},b=(e,t)=>({item:e,key:t}),y=e=>{const l=e.key.key,s=e.key.item;if("look"===l){o.seeDialogVisible=!0,o.backdropPhoto=s.photo;const e=s.details;for(let t=0;t<e.length;t++){const i=e[t].pagination;if(i>=0){o.CarouselList=[];for(let e=0;e<i+1;e++){var a={details:[]};o.CarouselList.push(a)}}}for(let t=0;t<e.length;t++){const i=e[t].pagination;var n={i:e[t].id,x:e[t].x,y:e[t].y,w:e[t].width,h:e[t].height,img:e[t].images,tag:e[t].tag,descriptive:e[t].descriptive};o.CarouselList[i].details.push(n)}}if("edit"===l&&(d(),o.templateID=s.id),"del"===l&&i.confirm({title:"提示",type:"warning",content:"此操作将永久删除模板, 是否继续?",confirmButtonText:"确定",cancelButtonText:"取消",onOk:()=>{v(s.id.toString()),t.success("删除成功！")},onCancel(){t.warning("已取消删除!")}}),"adhibition"===l){o.applyToClassVisible=!0,o.publish.isAllBrand=!0,o.publish.brandIds=[],o.brandId=[],o.result=[],Object.assign(o.publish,s),o.backdropPhoto=s.photo;const e=s.details;for(let t=0;t<e.length;t++){const i=e[t].pagination;if(i>=0){o.CarouselList=[];for(let e=0;e<i+1;e++){a={details:[]};o.CarouselList.push(a)}}}for(let t=0;t<e.length;t++){const i=e[t].pagination;n={i:e[t].id,x:e[t].x,y:e[t].y,w:e[t].width,h:e[t].height,img:e[t].images,tag:e[t].tag,descriptive:e[t].descriptive};o.CarouselList[i].details.push(n)}}},v=async e=>{let t={id:e};await h(t),r()},f=e=>{o.isEdit=e,r()},k=w((async()=>{let e={direction:o.direction};const{data:t}=await c(e);o.equipment=t}),5e3),_=async()=>{o.publish.isAllBrand?o.publish.brandIds=[]:o.publish.brandIds=o.brandId,await p(o.publish),t.success("应用成功！"),o.applyToClassVisible=!1,r()},N=()=>{o.applyToClassVisible=!1};return L((()=>{r()})),(e,t)=>{const i=M("a-radio-button"),l=M("a-radio-group"),s=M("plus-outlined"),r=M("a-button"),c=M("a-menu-item"),u=M("a-menu"),h=M("a-dropdown"),p=M("grid-item"),g=M("grid-layout"),m=M("left-circle-outlined"),v=M("right-circle-outlined"),w=M("a-carousel"),x=M("a-modal"),L=M("a-radio"),O=M("a-space"),q=M("home-outlined"),R=M("a-tree-select"),F=M("a-drawer");return I(),C("div",null,[B(" 班牌布局首页 "),o.isEdit?B("v-if",!0):(I(),C("div",Be,[j("div",Pe,[j("div",null,[T(l,{value:o.direction,"onUpdate:value":t[0]||(t[0]=e=>o.direction=e),"button-style":"solid"},{default:z((()=>[T(i,{onClick:n,value:"0"},{default:z((()=>[D("横版")])),_:1}),T(i,{onClick:n,value:"1"},{default:z((()=>[D("竖版")])),_:1})])),_:1},8,["value"])]),j("div",null,[T(r,{type:"primary",class:"ediubutton",onClick:d},{icon:z((()=>[T(s)])),default:z((()=>[D("新建模板")])),_:1})])]),j("div",De,[1==o.noLayout?(I(),C("div",Ee,Ae)):(I(),C("div",He,[j("div",Se,[j("ul",null,[(I(!0),C(E,null,A(o.mouldeList,((e,t)=>(I(),C("li",{onMouseenter:e=>{},onMouseleave:e=>{},key:t,class:H("0"==o.direction?"moulde_list_transverse":"moulde_list_vertical")},[j("div",Ue,[j("div",{class:H("0"==o.direction?"moulde_img":"moulde_img_vertical"),style:U({backgroundImage:"url("+e.photo+")"})},[B(" 推荐模板下拉选项 查看/应用到班牌 "),T(h,{trigger:["click"]},{overlay:z((()=>[T(u,{onClick:y},{default:z((()=>[(I(),V(c,{key:b(e,"look"),style:{color:"var(--primary-color)"}},{default:z((()=>[D("查看")])),_:2},1024)),(I(),V(c,{key:b(e,"adhibition")},{default:z((()=>[D("应用到班牌")])),_:2},1024))])),_:2},1024)])),default:z((()=>[Ne])),_:2},1024),B(" 推荐模板拖拽布局 "),T(g,{layout:o.Layout,"auto-size":!1,"col-num":"0"==o.direction?8:6,"row-height":"0"==o.direction?o.transverseHeight:o.verticalHeight,"max-rows":"0"==o.direction?6:8,"is-draggable":!1,"is-resizable":!1,"vertical-compact":!1,margin:[5,5],"use-css-transforms":!0},{default:z((()=>[(I(!0),C(E,null,A(e.details,((e,t)=>(I(),V(p,{key:t,x:e.x,y:e.y,w:e.width,h:e.height,i:e.id},{default:z((()=>[j("img",{src:e.images,alt:""},null,8,Oe)])),_:2},1032,["x","y","w","h","i"])))),128))])),_:2},1032,["layout","col-num","row-height","max-rows"])],6),qe]),j("span",Re,P(e.name),1)],42,Ve)))),128))]),j("ul",null,[(I(!0),C(E,null,A(o.newmouldeList,((e,t)=>(I(),C("li",{key:t,onMouseenter:e=>{},onMouseleave:e=>{},class:H("0"==o.direction?"moulde_list_transverse":"moulde_list_vertical")},[j("div",Ye,[j("div",{class:H("0"==o.direction?"moulde_img":"moulde_img_vertical"),style:U({backgroundImage:"url("+e.photo+")"})},[B(" 自定义模板下拉选项 查看/应用到班牌/编辑/删除 "),T(h,{trigger:["click"]},{overlay:z((()=>[T(u,{onClick:y},{default:z((()=>[(I(),V(c,{key:b(e,"look"),style:{color:"var(--primary-color)"}},{default:z((()=>[D("查看")])),_:2},1024)),(I(),V(c,{key:b(e,"adhibition")},{default:z((()=>[D("应用到班牌")])),_:2},1024)),(I(),V(c,{key:b(e,"edit")},{default:z((()=>[D("编辑")])),_:2},1024)),(I(),V(c,{key:b(e,"del"),style:{color:"#F5222D"}},{default:z((()=>[D("删除")])),_:2},1024))])),_:2},1024)])),default:z((()=>[Ke])),_:2},1024),B(" 自定义模板拖拽布局 "),T(g,{layout:o.Layout,"auto-size":!1,"col-num":"0"==o.direction?8:6,"row-height":"0"==o.direction?o.transverseHeight:o.verticalHeight,"max-rows":"0"==o.direction?6:8,"is-draggable":!1,"is-resizable":!1,"vertical-compact":!1,margin:[5,5],"use-css-transforms":!0},{default:z((()=>[(I(!0),C(E,null,A(e.reLayoutlis,((e,t)=>(I(),V(p,{key:t,x:e.x,y:e.y,w:e.width,h:e.height,i:e.id},{default:z((()=>[j("img",{src:e.images,alt:""},null,8,We)])),_:2},1032,["x","y","w","h","i"])))),128))])),_:2},1032,["layout","col-num","row-height","max-rows"])],6),Xe]),j("span",Ze,P(e.name),1)],42,Fe)))),128))])])]))]),B(" 查看 "),j("div",Ge,[T(x,{maskClosable:!1,class:"lookModel",style:{width:"928px",height:"597px padding-bottom: 0px"},footer:null,visible:o.seeDialogVisible,"onUpdate:visible":t[2]||(t[2]=e=>o.seeDialogVisible=e),title:"查看模板"},{default:z((()=>[j("div",{class:H("0"==o.direction?"hengscreen_contents":"shuscreen_contents"),style:U("0"==o.direction?{backgroundImage:"url("+o.backdropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"10px"}:{backgroundImage:"url("+o.backdropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"0px"})},[T(w,{arrows:"",autoplay:""},{prevArrow:z((()=>[j("div",Je,[T(m)])])),nextArrow:z((()=>[j("div",Qe,[T(v)])])),default:z((()=>[(I(!0),C(E,null,A(o.CarouselList,((e,i)=>(I(),C("div",{key:i},[B(" 自定义模板拖拽布局 横竖屏动态调整 "),T(g,{layout:o.Layout,"onUpdate:layout":t[1]||(t[1]=e=>o.Layout=e),"col-num":"0"==o.direction?8:6,"row-height":"0"==o.direction?o.seetransverseHeight:o.seeverticalHeight,"max-rows":"0"==o.direction?6:8,"is-draggable":!1,"is-resizable":!1,"vertical-compact":!1,"auto-size":!1,margin:[5,5],"use-css-transforms":!0},{default:z((()=>[B(" 模板拖拽item "),(I(!0),C(E,null,A(e.details,((e,t)=>(I(),V(p,{key:t,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},{default:z((()=>[j("div",$e,[j("img",{src:e.img,style:{width:"100%",height:"100%"},alt:""},null,8,et)])])),_:2},1032,["x","y","w","h","i"])))),128))])),_:2},1032,["layout","col-num","row-height","max-rows"])])))),128))])),_:1})],6)])),_:1},8,["visible"])]),B(" 应用到班牌 "),j("div",null,[T(F,{visible:o.applyToClassVisible,"onUpdate:visible":t[6]||(t[6]=e=>o.applyToClassVisible=e),class:"applyToClass",destroyOnClose:"",title:"应用到班牌",maskClosable:!1,onClose:N},{footer:z((()=>[j("div",rt,[T(r,{style:{"margin-right":"8px"},onClick:N},{default:z((()=>[D("取消")])),_:1}),T(r,{type:"primary",onClick:_},{default:z((()=>[D("确认")])),_:1})])])),default:z((()=>[j("div",tt,[j("div",{class:H("0"==o.direction?"class_transverse":"class_vertical"),style:U("0"==o.direction?{backgroundImage:"url("+o.backdropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"10px"}:{backgroundImage:"url("+o.backdropPhoto+")",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",paddingTop:"0px"})},[T(w,{arrows:"",autoplay:""},{prevArrow:z((()=>[j("div",it,[T(m)])])),nextArrow:z((()=>[j("div",lt,[T(v)])])),default:z((()=>[(I(!0),C(E,null,A(o.CarouselList,((e,i)=>(I(),C("div",{key:i},[B(" 自定义模板拖拽布局 横竖屏动态调整 "),T(g,{layout:o.Layout,"onUpdate:layout":t[3]||(t[3]=e=>o.Layout=e),"col-num":"0"==o.direction?8:6,"row-height":"0"==o.direction?o.applytransverseHeight:o.applyverticalHeight,"max-rows":"0"==o.direction?6:8,"is-draggable":!1,"is-resizable":!1,"vertical-compact":!1,"auto-size":!1,margin:[5,5],"use-css-transforms":!0},{default:z((()=>[B(" 模板拖拽item "),(I(!0),C(E,null,A(e.details,((e,t)=>(I(),V(p,{key:t,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},{default:z((()=>[j("div",st,[j("img",{src:e.img,style:{width:"100%",height:"100%"},alt:""},null,8,at)])])),_:2},1032,["x","y","w","h","i"])))),128))])),_:2},1032,["layout","col-num","row-height","max-rows"])])))),128))])),_:1})],6)]),j("div",null,[j("div",ot,[T(O,{align:"center"},{default:z((()=>[nt,T(l,{value:o.publish.isAllBrand,"onUpdate:value":t[4]||(t[4]=e=>o.publish.isAllBrand=e)},{default:z((()=>[T(L,{value:!0},{default:z((()=>[D(P("0"==o.direction?"全部横屏班牌":"全部竖屏班牌"),1)])),_:1}),T(L,{value:!1},{default:z((()=>[D(P("0"==o.direction?"指定横屏班牌":"指定竖屏班牌"),1)])),_:1})])),_:1},8,["value"])])),_:1})]),o.publish.isAllBrand?B("v-if",!0):(I(),C("div",dt,[T(R,{style:{width:"100%"},"tree-checkable":"",multiple:"",value:o.brandId,"onUpdate:value":t[5]||(t[5]=e=>o.brandId=e),placeholder:"请选择班牌","allow-clear":"","tree-data":o.equipment,fieldNames:a,onDropdownVisibleChange:S(k),maxTagCount:3},{title:z((e=>[T(q,{class:"icon-yellow"}),D(" "+P(e.name),1)])),_:1},8,["value","tree-data","onDropdownVisibleChange"])]))])])),_:1},8,["visible"])])])),B(" 添加/编辑模板页面 "),j("div",null,[o.isEdit?(I(),V(Te,{key:0,onShowList:f,direction:o.direction,templateID:o.templateID},null,8,["direction","templateID"])):B("v-if",!0)])])}}}),[["__scopeId","data-v-d86ccc02"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/classLayout/index.vue"]]);export{ut as default};
