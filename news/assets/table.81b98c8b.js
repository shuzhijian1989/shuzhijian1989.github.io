import"./vue.a2f518ee.js";import{e,y as a,q as t,f as l,c as n,b8 as r,a1 as o,n as i}from"./@vue.919ff404.js";var s=e({name:"YTable",slots:["handle","title"],emits:["onSearch","onTableLoad"],props:{loadData:{type:Function},columns:{type:Array,default:()=>[]},pagination:Object},setup(e,{slots:s,attrs:u,emit:p}){const{columns:c,loadData:d}=e,g=a((()=>{var e;return null==(e=s.handle)?void 0:e.call(s)})),m=a((()=>{var e;return null==(e=s.title)?void 0:e.call(s)})),v=t({loading:!1,dataSource:[],columns:[...c],parameter:{}}),f=t({total:0,current:1,pageSize:10,showLessItems:!0,hideOnSinglePage:!0,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showTotal:(e,a)=>`共 ${e} 条`,...e.pagination||{}}),h=a((()=>void 0!==e.loadData)),S=e=>{if(!h.value)return;v.loading=!0,d.update=S,!1===e&&(f.current=1);const{filters:a,sorter:t}=v.parameter,l={pageSize:f.pageSize,pageNo:f.current,...a,...t};d(l).then((e=>{const{code:a,data:t}=e;if(0===Number.parseInt(a)){const{list:e,pageNo:a,pageSize:l,total:n}=t||{};if(0===(null==e?void 0:e.length)&&a>1)return f.current--,void S();v.dataSource=e,f.current=a||1,f.pageSize=l||10,f.total=n}return 1})).finally((()=>{i((()=>{v.loading=!1}))}))},y=({current:e,pageSize:a},t,l)=>{f.current=e,f.pageSize=a,v.parameter.sorter=l,v.parameter.filters=t,S()};l((()=>S()));const b={emptyText:()=>n(r("a-empty"),{image:"/image/empty.png","image-style":{width:"auto",height:"180px"}},null),...s};return delete b.title,()=>{var a;return n("div",{class:"table_warp"},[(m.value||g.value)&&n(r("a-row"),{justify:"space-between",style:"margin-bottom:16px;align-items: center;"},{default:()=>[n(r("a-col"),null,{default:()=>[m.value]}),g.value&&n(r("a-col"),null,{default:()=>[g.value]})]}),n(r("a-table"),o({class:{antTableCellActive:!(null==(a=v.dataSource)?void 0:a.length)},dataSource:v.dataSource},u,{columns:v.columns,pagination:!1!==e.pagination&&f,loading:v.loading,onChange:y}),b)])}}});export{s as Y};
