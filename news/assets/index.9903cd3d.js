import"./vue.a2f518ee.js";import{_ as e,I as t,bk as a,bl as i,bm as l,bn as s}from"./index.7061e8ea.js";import{x as o,q as n,w as m,b8 as c,o as p,a2 as r,a3 as d,c as y,u,O as v,a7 as g,b as f,a as b,W as k,F as h,a8 as T,a9 as j,a4 as S,b5 as w,b4 as I,f as _}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./ant-design-vue.db4d48e3.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const M=f("h1",null,"模版预览",-1);var B=e({__name:"HorizontalVerticalModal",props:{modalVisible:{type:Boolean,default:!1},category:{type:Object,default:()=>{}}},emits:["update:modalVisible"],setup(e,{emit:a}){const i=e,l=o("treeObj"),s=o("setHandleMenuClick"),f=o("setCreateView")(),b=n({templateDetailObj:{id:"",details:[]},activeKey:"1"}),k=()=>{a("update:modalVisible",!1)};return m((()=>i.modalVisible),(e=>{b.templateDetailObj={id:"",details:[]},e&&(b.activeKey="1",(()=>{const{id:e}=i.category;t(e).then((e=>{const{data:t}=e;b.templateDetailObj=t}))})())})),(t,a)=>{const o=c("a-tab-pane"),n=c("a-tabs"),m=c("a-image"),h=c("a-button"),T=c("a-modal");return p(),r(T,{class:"preview-notification",width:"928px",visible:e.modalVisible,maskClosable:!1,onCancel:k},{title:d((()=>[M,y(n,{activeKey:b.activeKey,"onUpdate:activeKey":a[0]||(a[0]=e=>b.activeKey=e)},{default:d((()=>[y(o,{key:"1",tab:"横版"}),y(o,{key:"0",tab:"竖版","force-render":""})])),_:1},8,["activeKey"])])),footer:d((()=>[u(l).menuItems.length?(p(),r(h,{key:0,type:"primary",onClick:a[1]||(a[1]=e=>(()=>{const{id:e}=i.category;f.createForm.isTemplate=!0,f.createForm.id=e,f.previewBack=!1,f.eidtForm.id=e,s(i.category)})(b.templateDetailObj.id))},{default:d((()=>[v(" 使用 ")])),_:1})):g("v-if",!0)])),default:d((()=>{var e,t;return["1"===b.activeKey?(p(),r(m,{key:0,preview:!1,width:880,height:495,src:null==(e=b.templateDetailObj.details[1])?void 0:e.coverImg},null,8,["src"])):(p(),r(m,{key:1,preview:!1,width:278,height:495,src:null==(t=b.templateDetailObj.details[0])?void 0:t.coverImg},null,8,["src"]))]})),_:1},8,["visible"])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/messTemplate/HorizontalVerticalModal.vue"]]);const F={class:"template-content-item"},C=["id"],D={style:{display:"flex","justify-content":"space-between","font-size":"14px","font-weight":"600","align-items":"center"}},x={key:0},z={key:1},V={class:"template-item-mask"},N=["onClick"],L=["onClick"],O=(e=>(w("data-v-f5b55848"),e=e(),I(),e))((()=>f("span",null,"暂无数据",-1)));var A=e({__name:"templateList",props:{isSell:{type:Boolean,default:!1},isMmoreBack:{type:Boolean,default:!0},isSearch:{type:Boolean,default:!0},noticeTemplateData:{type:Array,default:()=>[]}},emits:["emitPreviewEmploy","emitPaginationChange","emitMoreTemplate"],setup(e,{emit:t}){const a=o("treeObj"),i=o("setCreateView")(),l=o("setHandleMenuClick"),s=n({categoryId:"",modalVisible:!1,bodyStyle:{padding:"10px 16px 20px",textAlign:"center",overflow:"hidden"},moreTemplate:{id:"",name:""},templateComponent:null,templateVisible:!1,category:{id:""},pagination:{pageNo:1,pageSize:12}}),m=(e,t)=>{s.modalVisible=!0,e.path="announcement",s.category=e,"employ"===t&&(i.isTemplate=!0,i.eidtForm.id=e.id,l(e),i.previewBack=!1)};return(i,l)=>{var o;const n=c("right-outlined"),w=c("a-button"),I=c("a-image"),_=c("a-card-meta"),M=c("eye-filled"),A=c("edit-filled"),K=c("a-card"),U=c("a-col"),$=c("a-row"),H=c("a-empty");return p(),b("div",{class:S(["template-content",{mgTop:!e.isSearch&&(e.isMmoreBack||e.isSell)}])},[k(i.$slots,"templateTitle",{item:e.noticeTemplateData.length?e.noticeTemplateData[1]:""},void 0,!0),f("ul",F,[(p(!0),b(h,null,T(e.noticeTemplateData,(i=>(p(),b("li",{key:`anchor_${i.id}`,id:`anchor_${i.id}`},[f("div",D,[e.isSell?(p(),b("span",x," 为您推荐 ")):g("v-if",!0),e.isSearch&&e.isMmoreBack?(p(),b("h1",z,j(i.name||i.title),1)):g("v-if",!0),i.name&&e.isMmoreBack?(p(),r(w,{key:2,type:"link",style:{color:"#00b781"},onClick:e=>(e=>{t("emitMoreTemplate",e,!0)})(i)},{default:d((()=>[v(" 更多 "),y(n)])),_:2},1032,["onClick"])):g("v-if",!0)]),y($,{gutter:30},{default:d((()=>[(p(!0),b(h,null,T(i.children,(e=>(p(),r(U,{class:"gutter-row",xs:24,sm:24,md:12,lg:12,xl:6,key:e.id},{default:d((()=>[y(K,{bodyStyle:s.bodyStyle,bordered:!1},{cover:d((()=>[y(I,{width:"385px",height:"182px",preview:!1,src:`${e.coverImg}?w=385h=182`||"/image/defect.png"},null,8,["src"])])),default:d((()=>[y(_,{title:e.title},null,8,["title"]),f("ul",V,[f("li",{onClick:t=>m(e,"preview")},[y(M,{style:{fontSize:"24px",marginBottom:"4px"}}),v("预览 ")],8,N),u(a).menuItems.length?(p(),b("li",{key:0,onClick:t=>m(e,"employ")},[y(A,{style:{fontSize:"24px",marginBottom:"4px"}}),v("使用 ")],8,L)):g("v-if",!0)])])),_:2},1032,["bodyStyle"])])),_:2},1024)))),128))])),_:2},1024)],8,C)))),128))]),k(i.$slots,"default",{},void 0,!0),(null==(o=e.noticeTemplateData)?void 0:o.length)?g("v-if",!0):(p(),r(H,{key:0,image:"image/empty.png","image-style":{width:"100%",height:"180px"}},{description:d((()=>[O])),_:1})),y(B,{modalVisible:s.modalVisible,"onUpdate:modalVisible":l[0]||(l[0]=e=>s.modalVisible=e),category:s.category},null,8,["modalVisible","category"])],2)}}},[["__scopeId","data-v-f5b55848"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/messTemplate/templateList.vue"]]);const K=(e=>(w("data-v-46969ede"),e=e(),I(),e))((()=>f("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1))),U={class:"template-hander"},$={class:"template-content"},H={class:"category"},q=["onClick"],E={class:"category"},P=["onClick"];var W=e({__name:"index",setup(e){const t=n({isMmoreBack:!0,isSearch:!0,classificationActive:0,types:null,typeLablelist:[],noticeTemplateTabs:[{name:"首页",key:"0"},{name:"图库",key:"1"},{name:"海报模版库",key:"2"}],noticeTemplateData:[],pagination:{total:0,pageNo:1,pageSize:12},templateForm:{messLableId:"",messTypeId:"1",keywords:""}}),m=(e,t)=>{e.preventDefault()},k=()=>{const{templateForm:e,pagination:a}=t,l={...e,...a};i(l).then((e=>{const{pageNo:a,pageSize:i,total:l,list:s}=e.data;t.pagination={pageNo:a,pageSize:i,total:l},s.length?t.noticeTemplateData=[{children:s}]:t.noticeTemplateData=[]}))},w=()=>{if(t.templateForm.keywords)return t.isMmoreBack?(t.isMmoreBack=!1,t.isSearch=!0,t.templateForm.messTypeId=1,t.templateForm.messLableId="",t.classificationActive="1",void a().then((e=>{const{data:a}=e;t.typeLablelist=a})).finally((()=>{k()}))):void k();t.isMmoreBack||k()},I=e=>{t.isMmoreBack=!1,t.isSearch=!1;const{id:a,messTypeId:l}=e;t.templateForm.messLableId=a;const s={messLableId:a,messTypeId:l,...t.pagination};i(s).then((e=>{const{pageNo:i,pageSize:l,total:s,list:o}=e.data;t.pagination={pageNo:i,pageSize:l,total:s},o.length?t.noticeTemplateData=[{title:name,id:a,children:o}]:t.noticeTemplateData=[]}))},M=()=>{const{messTypeId:e}=t.templateForm,a={messTypeId:e,...t.pagination};s(a).then((e=>{const{pageNo:a,pageSize:i,total:l,list:s}=e.data;t.pagination={pageNo:a,pageSize:i,total:l},s.length?t.noticeTemplateData=[{children:s}]:t.noticeTemplateData=[]}))},B=()=>{const{messTypeId:e}=t.templateForm;l({limit:4,messTypeId:e}).then((e=>{const{data:a}=e;t.noticeTemplateData=a}))},F=()=>{t.types=null,t.isMmoreBack=!0,t.isSearch=!0,t.templateForm.keywords="",t.templateForm.messTypeId="1",C()},C=()=>{"0"===t.templateForm.messTypeId?(t.isSearch=!1,M()):(t.isMmoreBack&&(t.pagination={pageNo:1,pageSize:12,total:0}),t.isSearch=!0,B())},D=e=>{if(t.templateForm.messLableId="",t.types=null,e){const{id:a}=e;t.templateForm.messLableId=a,t.types=a}t.pagination={pageNo:1,pageSize:12,total:0},k()},x=(e,a)=>{t.pagination={pageNo:e,pageSize:a,total:0},"0"===t.templateForm.messTypeId?M():w()};return _((()=>{const e=o("treeObj");o("setMenuItem")().menuItem=e.value.menuItems,B()})),(e,a)=>{const i=c("a-radio-button"),l=c("a-radio-group"),s=c("search-outlined"),o=c("a-input-search"),n=c("a-anchor-link"),k=c("a-anchor"),_=c("a-pagination"),M=c("a-layout-content"),B=c("a-layout");return p(),b(h,null,[t.isMmoreBack?g("v-if",!0):(p(),b("div",{key:0,class:"more-back",onClick:F},[K,v(" 返回 ")])),y(B,{class:"yd-layout messTemplate",style:{position:"relative"}},{default:d((()=>[y(M,{class:"yd-layout-content"},{default:d((()=>[f("div",U,[t.isMmoreBack?(p(),r(l,{key:0,value:t.templateForm.messTypeId,"onUpdate:value":a[0]||(a[0]=e=>t.templateForm.messTypeId=e),"button-style":"solid",onChange:C},{default:d((()=>[(p(!0),b(h,null,T(t.noticeTemplateTabs,(e=>(p(),r(i,{key:e.key,value:e.key},{default:d((()=>[v(j(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])):g("v-if",!0),g(" state.templateForm.messTypeId !== '0' && "),t.isMmoreBack||t.isSearch?(p(),r(o,{key:1,class:"more-emplate-search",value:t.templateForm.keywords,"onUpdate:value":a[1]||(a[1]=e=>t.templateForm.keywords=e),valueModifiers:{trim:!0},placeholder:"请输入要搜索的内容","enter-button":"搜索",allowClear:"",onSearch:w},{addonAfter:d((()=>[y(s,{class:"search-outlined"})])),_:1},8,["value"])):g("v-if",!0)]),f("div",$,[g(' v-if="state.isMmoreBack" '),"0"!==t.templateForm.messTypeId&&t.isMmoreBack?(p(),r(k,{key:0,affix:!1,targetOffset:60,onClick:m},{default:d((()=>[(p(!0),b(h,null,T(t.noticeTemplateData,(e=>(p(),b(h,null,[e.name?(p(),r(n,{key:e.id,title:e.name,href:`#anchor_${e.id}`},null,8,["title","href"])):g("v-if",!0)],64)))),256))])),_:1})):g("v-if",!0),y(u(A),{noticeTemplateData:t.noticeTemplateData,total:t.pagination.total,isMmoreBack:t.isMmoreBack&&"0"!==t.templateForm.messTypeId,isSell:"0"===t.templateForm.messTypeId,isSearch:t.isSearch,onEmitMoreTemplate:I},{templateTitle:d((({item:e})=>{var i;return[t.isSearch&&!t.isMmoreBack?(p(),b(h,{key:0},[f("div",H,[v(" 分类："),(p(!0),b(h,null,T(t.typeLablelist,((e,a)=>(p(),b("span",{key:a,class:S({active:t.classificationActive==e.id}),onClick:a=>(e=>{t.classificationActive=e,t.templateForm.messTypeId=e,D()})(e.id)},j(e.name),11,q)))),128))]),f("div",E,[v(" 类型："),f("span",{onClick:a[2]||(a[2]=e=>D(null)),class:S({active:null===t.types})}," 全部 ",2),(p(!0),b(h,null,T(null==(i=t.typeLablelist[t.classificationActive-1])?void 0:i.children,(e=>(p(),b("span",{key:e.id,class:S({active:t.types===e.id}),onClick:t=>D(e)},j(e.name),11,P)))),128))])],64)):g("v-if",!0)]})),default:d((()=>[("0"===t.templateForm.messTypeId||!t.isMmoreBack)&&t.pagination.total>12?(p(),r(_,{key:0,current:t.pagination.pageNo,"onUpdate:current":a[3]||(a[3]=e=>t.pagination.pageNo=e),"show-quick-jumper":"","show-total":e=>`共 ${e} 条数据`,total:t.pagination.total,"page-size":12,onChange:x},null,8,["current","show-total","total"])):g("v-if",!0)])),_:1},8,["noticeTemplateData","total","isMmoreBack","isSell","isSearch"])])])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-46969ede"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/messTemplate/index.vue"]]);export{W as default};
