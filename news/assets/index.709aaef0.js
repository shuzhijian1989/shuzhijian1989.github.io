import"./vue.a2f518ee.js";import{_ as e}from"./index.272083a4.js";import{h as a,i as t,e as i,j as n,k as l,l as s}from"./teacherAtt.783d3175.js";import{u as o}from"./vuex.f308ecec.js";import{g as d}from"./FilterDropdown.5a779a00.js";import{T as u,m as r}from"./ant-design-vue.db4d48e3.js";import{d as p}from"./dayjs.49e29cb2.js";import{_ as c}from"./index.7061e8ea.js";import{e as m,r as v,q as g,y,f as h,b8 as f,o as x,a as I,b,c as k,a3 as S,O as w,a7 as _,u as j,a9 as N,a2 as R,a5 as D,b5 as C,b4 as T,F as Y}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const O=e=>(C("data-v-24701b50"),e=e(),T(),e),U={class:"searchHead"},M={class:"byDay"},A={key:0},L={key:1},F={key:2},q={key:3},z={key:4},K={key:5},E={key:6},B=["onClick"],H={class:"headContent"},W={class:"userInfoAtt"},P={class:"attSign"},V=O((()=>b("br",null,null,-1))),G={key:0},J={key:1},Q={key:2},X={key:3,style:{display:"flex"}},Z=["onClick"],$={key:0,class:"outSide"},ee={key:4},ae={class:"footer"},te=O((()=>b("span",null,"将打卡结果修改为: ",-1))),ie=O((()=>b("span",null,"分钟",-1))),ne=m({name:"dayStatistics"});var le=c(Object.assign(ne,{emits:["isShowStatistics"],setup(l,{emit:s}){const c=v(!1),m=v(),C=u.SHOW_ALL,T=o(),Y=v(!0),O={children:"children",value:"id",label:"name"},ne=e=>{m.value=e},le={0:"签到",1:"签退"},se=[{title:"打卡类型",dataIndex:"clockType",width:"100px"},{title:"打卡考勤时间",dataIndex:"clockTime",width:"140px"},{title:"实际打卡时间",dataIndex:"realityTime",width:"140px"},{title:"打卡结果",dataIndex:"clockResult",width:"120px"},{title:"打卡地址",dataIndex:"clockAddress"}];let oe=[];const de=[{title:"姓名",dataIndex:"name"},{title:"考勤组名称",dataIndex:"all",filters:[{text:"全部",value:""}],filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",d(e)),customFilterDropdown:!0,customFilterIcon:"caret-right-outlined"},{title:"部门",dataIndex:"department"},{title:"工号",dataIndex:"jobNumber"},{title:"日期",dataIndex:"dataTime"},{title:"打卡时间",dataIndex:"clockTime"},{title:"操作",dataIndex:"operation"}],ue=v([]),re=v([]),pe=g({treeData:y((()=>T.state.base.departmentTree)),showUpResult:!1,title:"",queryName:"",teacherName:"",teacherdep:"",logo:"",teacherSign:"",punchSetShow:!1,pagination:{pageNo:1,pageSize:10,total:0,groupId:"",employeeName:"",deptIdList:[],dateIndex:p().format("YYYY-MM-DD")},upResult:{overviewId:"",signId:"",signCount:null,signType:null,shouldSignTime:"",minute:null,signResult:""}}),ce=v("day"),me=()=>{s("isShowStatistics",!1)},ve=async e=>{try{c.value=!0;const t=await a(e);ue.value=t.data.list,pe.pagination.total=t.data.total}catch(t){}finally{c.value=!1}},ge=()=>{pe.pagination.pageNo=1,pe.pagination.employeeName=pe.queryName,pe.pagination.dateIndex=m.value,ve(pe.pagination)},ye=()=>{pe.pagination.dateIndex=p().format("YYYY-MM-DD"),pe.pagination.employeeName="",pe.queryName="",pe.pagination.deptIdList=[],pe.pagination.pageNo=1,pe.pagination.pageSize=10,m.value=null,pe.pagination.groupId="",ve(pe.pagination)},he=()=>{pe.punchSetShow=!1},fe=e=>{const{current:a,pageSize:t,pageNo:i,all:n}=e;pe.pagination.pageNo=a,pe.pagination.pageSize=t,pe.pagination.groupId=n?n[0]:"",ve(pe.pagination)},xe=()=>{t(pe.pagination)},Ie=async()=>{"0"===pe.upResult.signResult&&(pe.upResult.minute=null),await n(pe.upResult),pe.showUpResult=!1,r.success("打卡结果修改成功"),pe.upResult.signResult="",pe.upResult.minute=null,pe.punchSetShow=!1,await ve(pe.pagination)},be=()=>{pe.showUpResult=!1,pe.upResult.signResult="",pe.upResult.minute=null};return h((()=>{ve(pe.pagination),(async()=>{const e=await i({});oe=e.data.map((e=>({text:e.name,value:e.id}))),de[1].filters.push(...oe)})()})),(a,t)=>{const i=f("a-radio-button"),n=f("a-radio-group"),l=f("a-form-item"),s=f("a-date-picker"),o=f("a-input"),d=f("team-outlined"),u=f("a-tree-select"),r=f("SearchOutlined"),p=f("a-button"),v=f("redo-outlined"),g=f("a-form"),y=f("a-spin"),h=f("UserOutlined"),T=f("a-avatar"),oe=f("a-drawer"),ve=f("a-radio"),ke=f("a-input-number"),Se=f("a-modal");return x(),I("div",null,[b("div",U,[k(g,{layout:"inline"},{default:S((()=>[k(l,null,{default:S((()=>[k(n,{value:ce.value,"onUpdate:value":t[0]||(t[0]=e=>ce.value=e),"button-style":"solid"},{default:S((()=>[k(i,{value:"month",onClick:me},{default:S((()=>[w("月度汇总")])),_:1}),k(i,{value:"day"},{default:S((()=>[w("每日统计")])),_:1})])),_:1},8,["value"])])),_:1}),k(l,{label:"考勤日期:"},{default:S((()=>[_(' <a-range-picker\r\n                    separator="至"\r\n                    :value="hackValue || pitchDay"\r\n                    :disabled-date="disabledDate"\r\n                    @change="onChange"\r\n                    @openChange="onOpenChange"\r\n                    @calendarChange="onCalendarChange"\r\n                    /> '),k(s,{onChange:ne,value:m.value,"onUpdate:value":t[1]||(t[1]=e=>m.value=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["value"])])),_:1}),k(l,{label:"姓名:"},{default:S((()=>[k(o,{class:"searchName",value:pe.queryName,"onUpdate:value":t[2]||(t[2]=e=>pe.queryName=e),placeholder:"请输入",onPressEnter:ge},null,8,["value"])])),_:1}),k(l,{label:"部门：",name:"depts"},{default:S((()=>[k(u,{maxTagCount:2,style:{width:"300px"},value:pe.pagination.deptIdList,"onUpdate:value":t[3]||(t[3]=e=>pe.pagination.deptIdList=e),"show-checked-strategy":j(C),"show-search":"",height:300,"allow-clear":"",multiple:"",fieldNames:O,"tree-data":pe.treeData,placeholder:"请选择部门"},{title:S((e=>[k(d,{class:"icon-yellow"}),w(" "+N(e.name),1)])),_:1},8,["value","show-checked-strategy","tree-data"])])),_:1}),k(l,null,{default:S((()=>[k(p,{type:"primary",style:{"margin-right":"10px"},onClick:ge},{icon:S((()=>[k(r,{style:{"margin-right":"10px"}})])),default:S((()=>[w(" 查询 ")])),_:1}),k(p,{onClick:ye},{icon:S((()=>[k(v,{style:{"margin-right":"10px"}})])),default:S((()=>[w(" 重置 ")])),_:1})])),_:1})])),_:1}),k(p,{onClick:xe},{default:S((()=>[w(" 导出报表 ")])),_:1})]),b("div",M,[k(y,{spinning:c.value},{default:S((()=>[k(e,{totals:pe.pagination,columns:de,dataSource:ue.value,slots:["operation"],rowSelection:!1,onOnSelectedRowKeys:fe},{bodyCell:S((({column:e,record:a,index:t,text:i})=>["name"===e.dataIndex?(x(),I("div",A,N(a.name),1)):_("v-if",!0),"all"===e.dataIndex?(x(),I("div",L,N(a.groupName),1)):_("v-if",!0),"department"===e.dataIndex?(x(),I("div",F,N(a.deptName),1)):_("v-if",!0),"jobNumber"===e.dataIndex?(x(),I("div",q,N(a.jobNumber),1)):_("v-if",!0),_(" <template v-if=\"column.dataIndex === 'post'\">\r\n                    <div>{{ record.job }}</div>\r\n                </template> "),"dataTime"===e.dataIndex?(x(),I("div",z,N(a.signDate),1)):_("v-if",!0),"clockTime"===e.dataIndex?(x(),I("div",K,N(a.signTime),1)):_("v-if",!0),"operation"===e.dataIndex?(x(),I("span",E,[b("a",{style:{color:"#00b781"},onClick:e=>{return t=a,pe.punchSetShow=!0,pe.teacherName=t.name,pe.teacherdep=t.groupName,pe.logo=t.avatar,pe.teacherSign=t.signTime,pe.title=t.signDate,re.value=t.signCountObjList,void(pe.upResult.overviewId=t.overviewId);var t}},"查看",8,B)])):_("v-if",!0)])),_:1},8,["totals","dataSource"])])),_:1},8,["spinning"]),_(" 抽屉/每日统计点击查看详情 "),k(oe,{width:"700",visible:pe.punchSetShow,"onUpdate:visible":t[5]||(t[5]=e=>pe.punchSetShow=e),title:pe.title,maskClosable:!1,zIndex:500},{default:S((()=>[b("div",H,[b("div",null,[k(T,{size:64,src:pe.logo},{icon:S((()=>[pe.logo?_("v-if",!0):(x(),R(h,{key:0}))])),_:1},8,["src"])]),b("div",W,[w(N(pe.teacherName)+" ",1),b("span",null,"("+N(pe.teacherdep)+")",1),b("div",P," 打卡考勤时间："+N(pe.teacherSign),1)])]),V,k(e,{isBordered:Y.value,columns:se,rowSelection:!1,dataSource:re.value},{bodyCell:S((({column:e,record:a,index:t,text:i})=>["clockType"===e.dataIndex?(x(),I("div",G,N(le[a.signType]),1)):_("v-if",!0),"clockTime"===e.dataIndex?(x(),I("div",J,N(a.shouldSignTime),1)):_("v-if",!0),"realityTime"===e.dataIndex?(x(),I("div",Q,N(a.actualSignTime),1)):_("v-if",!0),"clockResult"===e.dataIndex?(x(),I("div",X,[b("div",{onClick:e=>(e=>{const{shouldSignTime:a,signCount:t,signType:i,signId:n,signResult:l,editable:s}=e;s&&(pe.showUpResult=!0,pe.upResult.shouldSignTime=a,pe.upResult.signCount=t,pe.upResult.signType=i,pe.upResult.signId=n||"")})(a),style:D("迟到"===a.signResult?"color: #F5222D":"未打卡"===a.signResult?"color: #FAAD14":"正常"===a.signResult?"color: var(--primary-color)":"color: #F5222D"),class:"signResultLine"},N(a.signResult?a.signResult:"休息"),13,Z),a.signInOutside?(x(),I("span",$,"外勤")):_("v-if",!0)])):_("v-if",!0),"clockAddress"===e.dataIndex?(x(),I("div",ee,N(a.signAddress),1)):_("v-if",!0)])),_:1},8,["isBordered","dataSource"]),b("div",ae,[k(p,{style:{marginRight:"8px"},onClick:t[4]||(t[4]=e=>pe.punchSetShow=!1)},{default:S((()=>[w(" 取消 ")])),_:1}),k(p,{type:"primary",onClick:he},{default:S((()=>[w(" 确认 ")])),_:1})])])),_:1},8,["visible","title"]),_(" 修改打卡结果对话框 "),k(Se,{visible:pe.showUpResult,"onUpdate:visible":t[8]||(t[8]=e=>pe.showUpResult=e),title:"打卡结果修改",onOk:Ie,onCancel:be,destroyOnClose:""},{default:S((()=>[k(g,{layout:"vertical"},{default:S((()=>[k(l,null,{default:S((()=>[te,k(n,{value:pe.upResult.signResult,"onUpdate:value":t[7]||(t[7]=e=>pe.upResult.signResult=e)},{default:S((()=>[k(ve,{value:"0"},{default:S((()=>[w("正常")])),_:1}),k(ve,{value:0===pe.upResult.signType?"1":1===pe.upResult.signType?"2":void 0},{default:S((()=>[w(N(0===pe.upResult.signType?"迟到":"早退")+" ",1),k(ke,{placeholder:"请输入",id:"inputNumber",value:pe.upResult.minute,"onUpdate:value":t[6]||(t[6]=e=>pe.upResult.minute=e),min:0,max:1440},null,8,["value"]),ie])),_:1},8,["value"])])),_:1},8,["value"])])),_:1})])),_:1})])),_:1},8,["visible"])])])}}}),[["__scopeId","data-v-24701b50"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/teacherAttendance/attendanceStatistics/components/dayStatistics.vue"]]);const se={class:"searchHead"},oe={class:"bymonth"},de={key:0},ue={key:1},re={key:2},pe={key:3},ce={key:4},me={key:5},ve={key:6},ge=m({name:"monthStatistics"});var ye=c(Object.assign(ge,{emits:["isShowStatistics"],setup(a,{emit:t}){const n=v(!1);let r=[];const c=v("month"),m=()=>{t("isShowStatistics",!0)},R=u.SHOW_ALL,D=o(),C=v(),T=e=>{C.value=e},O={children:"children",value:"id",label:"name"},U=v(!0),M=[{title:"姓名",dataIndex:"name",fixed:!0,width:80},{title:"考勤组名称",dataIndex:"all",width:120,filters:[{text:"全部",value:""}],filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",d(e)),customFilterDropdown:!0,customFilterIcon:"caret-right-outlined"},{title:"部门",dataIndex:"department"},{title:"工号",dataIndex:"jobNumber"},{title:"应出勤天/次数",dataIndex:"shouldAttDay",width:125},{title:"出勤天/次数",dataIndex:"attDay",width:125},{title:"休息天/次数",dataIndex:"restDay",width:125},{title:"外出(天)",dataIndex:"goOut"},{title:"出差(天)",dataIndex:"onBusiness"},{title:"补卡(次)",dataIndex:"reClock"},{title:"加班(小时)",dataIndex:"workOvertime",width:100},{title:"异常",children:[{title:"请假",dataIndex:"leave",key:"leave"},{title:"迟到",dataIndex:"late",key:"late"},{title:"早退",dataIndex:"leaveEarly",key:"leaveEarly"},{title:"缺勤",dataIndex:"absenteeism",key:"absenteeism"},{title:"未签到",dataIndex:"notSignIn",key:"notSignIn"},{title:"未签退",dataIndex:"noSignOut",key:"noSignOut"}]}],A=v([]),L=g({treeData:y((()=>D.state.base.departmentTree)),pagination:{pageNo:1,pageSize:10,total:0,employeeName:"",deptIdList:[],groupId:"",dateIndex:p().startOf("month").format("YYYY-MM-DD")}}),F=async e=>{try{n.value=!0;const a=await l(e);A.value=a.data.list,L.pagination.total=a.data.total}finally{n.value=!1}},q=e=>{const{current:a,pageSize:t,pageNo:i,all:n}=e;L.pagination.pageNo=a,L.pagination.pageSize=t,L.pagination.groupId=n?n[0]:"",F(L.pagination)},z=()=>{L.pagination.pageNo=1,L.pagination.employeeName=L.queryName,L.pagination.dateIndex=C.value,F(L.pagination)},K=()=>{L.pagination.dateIndex=p().startOf("month").format("YYYY-MM-DD"),L.pagination.employeeName="",L.pagination.deptIdList=[],L.pagination.pageNo=1,L.pagination.pageSize=10,L.queryName="",C.value=null,L.pagination.groupId="",F(L.pagination)},E=()=>{s(L.pagination)};return h((()=>{F(L.pagination),(async()=>{const e=await i({});r=e.data.map((e=>({text:e.name,value:e.id}))),M[1].filters.push(...r)})()})),(a,t)=>{const i=f("a-radio-button"),l=f("a-radio-group"),s=f("a-form-item"),o=f("a-date-picker"),d=f("a-input"),u=f("team-outlined"),r=f("a-tree-select"),p=f("SearchOutlined"),v=f("a-button"),g=f("redo-outlined"),y=f("a-form"),h=f("a-spin");return x(),I("div",null,[b("div",se,[k(y,{layout:"inline"},{default:S((()=>[k(s,null,{default:S((()=>[k(l,{value:c.value,"onUpdate:value":t[0]||(t[0]=e=>c.value=e),"button-style":"solid"},{default:S((()=>[k(i,{value:"month"},{default:S((()=>[w("月度汇总")])),_:1}),k(i,{value:"day",onClick:m},{default:S((()=>[w("每日统计")])),_:1})])),_:1},8,["value"])])),_:1}),k(s,{label:"考勤日期:"},{default:S((()=>[k(o,{onChange:T,value:C.value,"onUpdate:value":t[1]||(t[1]=e=>C.value=e),"value-format":"YYYY-MM-01",picker:"month"},null,8,["value"])])),_:1}),k(s,{label:"姓名:"},{default:S((()=>[k(d,{class:"searchName",value:L.queryName,"onUpdate:value":t[2]||(t[2]=e=>L.queryName=e),placeholder:"请输入",onPressEnter:z},null,8,["value"])])),_:1}),k(s,{label:"部门：",name:"depts"},{default:S((()=>[k(r,{maxTagCount:2,style:{width:"300px"},value:L.pagination.deptIdList,"onUpdate:value":t[3]||(t[3]=e=>L.pagination.deptIdList=e),"show-checked-strategy":j(R),"show-search":"",height:300,"allow-clear":"",multiple:"",fieldNames:O,"tree-data":L.treeData,placeholder:"请选择部门"},{title:S((e=>[k(u,{class:"icon-yellow"}),w(" "+N(e.name),1)])),_:1},8,["value","show-checked-strategy","tree-data"])])),_:1}),k(s,null,{default:S((()=>[k(v,{type:"primary",style:{"margin-right":"10px"},onClick:z},{icon:S((()=>[k(p,{style:{"margin-right":"10px"}})])),default:S((()=>[w(" 查询 ")])),_:1}),k(v,{onClick:K},{icon:S((()=>[k(g,{style:{"margin-right":"10px"}})])),default:S((()=>[w(" 重置 ")])),_:1})])),_:1})])),_:1}),k(v,{onClick:E},{default:S((()=>[w(" 导出报表 ")])),_:1})]),b("div",oe,[k(h,{spinning:n.value},{default:S((()=>[k(e,{isBordered:U.value,totals:L.pagination,columns:M,dataSource:A.value,rowSelection:!1,isScroll:!0,onOnSelectedRowKeys:q},{bodyCell:S((({column:e,record:a,index:t,text:i})=>["name"===e.dataIndex?(x(),I("div",de,N(a.name),1)):_("v-if",!0),"all"===e.dataIndex?(x(),I("div",ue,N(a.groupName),1)):_("v-if",!0),"department"===e.dataIndex?(x(),I("div",re,N(a.deptName),1)):_("v-if",!0),"jobNumber"===e.dataIndex?(x(),I("div",pe,N(a.jobNumber),1)):_("v-if",!0),_(" <template v-if=\"column.dataIndex === 'post'\">\r\n                        <div>{{ record.job }}</div>\r\n                    </template> "),"shouldAttDay"===e.dataIndex?(x(),I("div",ce,N(a.shouldAttendanceDay),1)):_("v-if",!0),"attDay"===e.dataIndex?(x(),I("div",me,N(a.actualAttendanceDay),1)):_("v-if",!0),"restDay"===e.dataIndex?(x(),I("div",ve,N(a.restDay),1)):_("v-if",!0),"leave"===e.dataIndex?(x(),I(Y,{key:7},[w(N(a.askForLeave),1)],64)):_("v-if",!0),"late"===e.dataIndex?(x(),I(Y,{key:8},[w(N(a.beLate),1)],64)):_("v-if",!0),"leaveEarly"===e.dataIndex?(x(),I(Y,{key:9},[w(N(a.leaveEarly),1)],64)):_("v-if",!0),"absenteeism"===e.dataIndex?(x(),I(Y,{key:10},[w(N(a.absenceFromWork),1)],64)):_("v-if",!0),"notSignIn"===e.dataIndex?(x(),I(Y,{key:11},[w(N(a.notSignIn),1)],64)):_("v-if",!0),"noSignOut"===e.dataIndex?(x(),I(Y,{key:12},[w(N(a.notSignOut),1)],64)):_("v-if",!0)])),_:1},8,["isBordered","totals","dataSource"])])),_:1},8,["spinning"])])])}}}),[["__scopeId","data-v-749bddfc"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/teacherAttendance/attendanceStatistics/components/monthStatistics.vue"]]);const he=m({name:"statisticsData",Components:{DAYINFO:le,MONTHINFO:ye}});var fe=c(Object.assign(he,{setup(e){const a=v(!0),t=e=>{a.value=e};return(e,i)=>(x(),I("div",null,[a.value?(x(),R(le,{key:0,onIsShowStatistics:t})):(x(),R(ye,{key:1,onIsShowStatistics:t}))]))}}),[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/teacherAttendance/attendanceStatistics/index.vue"]]);export{fe as default};
