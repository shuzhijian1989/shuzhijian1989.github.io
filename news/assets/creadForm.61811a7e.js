import{s as e,n as a,_ as i,p as t}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{r as l,t as r}from"./index.323b38c6.js";import{r as d,q as s,y as o,w as n,b8 as c,o as m,a as u,c as v,a3 as h,b as p,O as f,a7 as b,a2 as y,u as g}from"./@vue.919ff404.js";function F(i){return e({url:a.pageList,method:"post",data:i})}function k(i){return e({url:a.createMachine,method:"post",data:i})}function N(i){return e({url:a.detailMachine,method:"get",params:i})}function _(i){return e({url:a.updateMachine,method:"post",data:i})}function I(i){return e({url:a.deleteMachine,method:"get",params:i})}function L(){return e({url:a.siteList,method:"get"})}function w(a){return e({url:"/cloud/machine/type/list",method:"get",params:a})}const x={class:"device_form_class"},C={style:{"margin-top":"8px"}},U=p("span",{style:{color:"#c0c4cc","font-size":"12px","margin-left":"6px"}},"最多选择三个管理员",-1),M={class:"footer"};var T=i({__name:"creadForm",props:{formVisible:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isType:{type:Number,default:1},fieldList:{type:Array,default:()=>[]},echoMachineData:{type:Object,default:()=>{}},submitLoading:{type:Boolean,default:!1}},emits:["formCancel","formSubmit","managerOk"],setup(e,{emit:a}){const i=e,F=d(),k=s({checkedList:[],deviceForm:{siteId:"",machineName:"",machineNumber:"",administratorName:"",teacherId:[]},managerVisible:!1}),N=o((()=>i.formVisible)),_=o((()=>l[i.isType])),I=o((()=>i.isEdit)),L=o((()=>""+(I.value?"编辑":"新增"+r[i.isType]))),w=o((()=>i.submitLoading)),T=o((()=>i.fieldList));function j(){a("formCancel",!1)}function D(){F.value.validateFields().then((()=>{a("formSubmit",k.deviceForm)}))}function E(e){const a=[];k.deviceForm.teacherId=[],e.length&&(e.forEach((e=>{a.push(e.name),k.deviceForm.teacherId.push(e.userId)})),k.deviceForm.administratorName=a.toString(","))}return n((()=>i.echoMachineData),(e=>{var a;k.deviceForm.teacherId=[],k.checkedList=null==(a=e.administratorList)?void 0:a.map((e=>{var a;return null==(a=k.deviceForm)||a.teacherId.push(e.teacherId),{...e,id:e.teacherId}})),k.deviceForm.siteId=e.siteId,k.deviceForm.machineName=e.machineName,k.deviceForm.administratorName=e.administratorName})),(a,i)=>{const l=c("a-tree-select"),d=c("a-form-item"),s=c("a-input"),o=c("exclamation-circle-filled"),n=c("a-form"),V=c("a-button"),S=c("a-drawer"),O=t;return m(),u("div",x,[v(S,{visible:N.value,"onUpdate:visible":i[6]||(i[6]=e=>N.value=e),title:L.value,width:"500",maskClosable:!1,onClose:j},{footer:h((()=>[p("div",M,[v(V,{style:{"margin-right":"8px"},onClick:j},{default:h((()=>[f("取消")])),_:1}),v(V,{type:"primary",onClick:D,loading:w.value},{default:h((()=>[f("确认")])),_:1},8,["loading"])])])),default:h((()=>[v(n,{model:k.deviceForm,name:"basic",layout:"vertical",ref_key:"deviceFormRef",ref:F,rules:_.value},{default:h((()=>[v(d,{label:"场地：",name:"siteId"},{default:h((()=>[b(" isEdit:false 的时候禁用场地 "),v(l,{value:k.deviceForm.siteId,"onUpdate:value":i[0]||(i[0]=e=>k.deviceForm.siteId=e),"show-search":"",placeholder:"请选择","allow-clear":"",treeDefaultExpandAll:!0,listHeight:320,"tree-data":T.value,"field-names":{children:"children",label:"name",key:"id",value:"id"},disabled:I.value,showSearch:!1},null,8,["value","tree-data","disabled"])])),_:1}),b(" 单独人脸机有的 且在编辑的时候有的 "),1===e.isType&&I.value?(m(),y(d,{key:0,label:"人脸机方向："},{default:h((()=>[v(s,{value:k.deviceForm.machineDirection,"onUpdate:value":i[1]||(i[1]=e=>k.deviceForm.machineDirection=e),disabled:I.value},null,8,["value","disabled"])])),_:1})):b("v-if",!0),v(d,{label:g(r)[e.isType]+"名称:",name:"machineName"},{default:h((()=>[v(s,{value:k.deviceForm.machineName,"onUpdate:value":i[2]||(i[2]=e=>k.deviceForm.machineName=e),placeholder:""+("请输入"+g(r)[e.isType]+"名称（不超过20字）"),"allow-clear":"",maxlength:20},null,8,["value","placeholder"])])),_:1},8,["label"]),b(" isEdit:false 的时候不显示一体机数量 "),I.value?b("v-if",!0):(m(),y(d,{key:1,label:g(r)[e.isType]+"数量：",name:"machineNumber"},{default:h((()=>[v(s,{value:k.deviceForm.machineNumber,"onUpdate:value":i[3]||(i[3]=e=>k.deviceForm.machineNumber=e),placeholder:"请输入1-20的数字","allow-clear":""},null,8,["value"])])),_:1},8,["label"])),v(d,{label:"管理员：",name:"administratorName"},{default:h((()=>[v(s,{value:k.deviceForm.administratorName,"onUpdate:value":i[4]||(i[4]=e=>k.deviceForm.administratorName=e),onClick:i[5]||(i[5]=e=>k.managerVisible=!0),allowClear:"",placeholder:"请选择",readonly:"readonly"},null,8,["value"]),p("div",C,[v(o),U])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","title"]),v(O,{mode:"personnel",tabs:[{tab:"管理员",key:1,checked:!0}],visible:k.managerVisible,"onUpdate:visible":i[7]||(i[7]=e=>k.managerVisible=e),checked:k.checkedList,"onUpdate:checked":i[8]||(i[8]=e=>k.checkedList=e),onHandleOk:E},null,8,["visible","checked"])])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/deviceManagement/components/creadForm.vue"]]);export{T as C,I as a,k as c,N as d,w as g,F as p,L as s,_ as u};
