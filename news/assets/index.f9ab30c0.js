import"./vue.a2f518ee.js";import{m as e}from"./ant-design-vue.db4d48e3.js";import{u as a}from"./vue-router.907b547c.js";import{s as t,n as s,_ as l,bv as i}from"./index.7061e8ea.js";import{g as o}from"./oss.72e23b0d.js";import{_ as n}from"./index.272083a4.js";import{y as d,r as c,b8 as r,o as m,a2 as p,a3 as u,W as f,a as v,F as g,a8 as b,a4 as h,b as y,a9 as x,a7 as k,c as _,M as j,O as C,q as I,w as L,f as S,u as w,b5 as F,b4 as N,m as M}from"./@vue.919ff404.js";import{E as V}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./ali-oss.e15d125a.js";import"./ydutils.99497787.js";import"./ydutils.a58fbaf1.js";var T=l({__name:"index",props:{cancelText:{type:String,default:"取消"},okText:{type:String,default:"确定"},determineTitle:{type:String,default:"提示 "},isDestroyOnClose:{type:Boolean,default:!0},isMaskClosable:{type:Boolean,default:!1},isFooter:{tyle:Boolean,default:!1},isVisible:{tyle:Boolean,default:!1}},emits:["update:isVisible","emitHandleOk","emithandleCancel"],setup(e,{emit:a}){const t=e,s=d((()=>t.cancelText)),l=d((()=>t.okText)),i=d((()=>t.determineTitle)),o=d((()=>t.isDestroyOnClose)),n=d((()=>t.isMaskClosable)),v=d((()=>t.isFooter)),g=d((()=>t.isVisible)),b=c(!1),h=()=>{a("emitHandleOk")},y=()=>{a("emithandleCancel")};return(e,a)=>{const t=r("a-modal");return m(),p(t,{visible:g.value,"onUpdate:visible":a[0]||(a[0]=e=>g.value=e),footer:v.value?null:void 0,cancelText:s.value,title:i.value,maskClosable:n.value,okText:l.value,destroyOnClose:o.value,"confirm-loading":b.value,onCancel:y,onOk:h},{default:u((()=>[f(e.$slots,"default")])),_:3},8,["visible","footer","cancelText","title","maskClosable","okText","destroyOnClose","confirm-loading"])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/components/Modal/index.vue"]]);const D={style:{"padding-bottom":"40px"}},O=["onClick"],U={class:"line"},z={class:"left"},A=["src"],E={class:"right"},Y=["src"],H=["onClick"],B=["onClick"],$={class:"buttonBox"};var R=l({__name:"SiderFiles",props:{active:{type:Number,default:0},fileList:{type:Array,default:()=>[]}},emits:["chooseFile","editclasses","delClasses"],setup(e,{emit:a}){const t=e,s=(e,t)=>{a("editclasses",e,t)};return(e,l)=>{const i=r("a-menu-item"),o=r("a-menu"),n=r("a-dropdown"),d=r("plus-outlined"),c=r("a-button");return m(),v("div",D,[(m(!0),v(g,null,b(t.fileList,((e,d)=>(m(),v("div",{class:h(["file_list",t.active===d?"bg":""]),key:d,onClick:t=>((e,t)=>{a("chooseFile",e,t)})(e,d)},[y("div",U,[y("div",z,[y("img",{src:`/image/${t.active==d?"weixuanzhongbeifenactive":"weixuanzhongbeifen"}.png`,alt:"",style:{width:"16px","margin-right":"6px"}},null,8,A),y("div",{class:h(t.active===d?"name":"")},x(e.name),3)]),y("div",E,[k(" :trigger=\"['click']\" "),_(n,null,{overlay:u((()=>[_(o,{style:{"text-align":"center",width:"70px"}},{default:u((()=>[_(i,null,{default:u((()=>[y("a",{href:"javascript:;",onClick:a=>s(!0,e)},"编辑",8,H)])),_:2},1024),_(i,null,{default:u((()=>[y("a",{href:"javascript:;",onClick:t=>(e=>{a("delClasses",e)})(e),style:{color:"red"}},"删除",8,B)])),_:2},1024)])),_:2},1024)])),default:u((()=>[y("a",{class:"ant-dropdown-link",onClick:l[0]||(l[0]=j((()=>{}),["prevent"]))},[y("img",{src:`/image/${t.active==d&&0!==d?"more":""}.png`,alt:"",style:{width:"20px",cursor:"pointer"}},null,8,Y)])])),_:2},1024)])])],10,O)))),128)),y("div",$,[_(c,{type:"primary",onClick:l[1]||(l[1]=e=>s(!1,""))},{icon:u((()=>[_(d)])),default:u((()=>[C(" 添加分类 ")])),_:1})])])}}},[["__scopeId","data-v-341009b2"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/finance/components/SiderFiles.vue"]]);const q={class:"finance"},K=(e=>(F("data-v-dce937e2"),e=e(),N(),e))((()=>y("span",null,"财务报表",-1))),P={class:"groupTop"},W={class:"con"},G={class:"title_name"},J={class:"operation"},Q=["href"],X={class:"input_max"};var Z=l({__name:"index",setup(l){const d=a(),f=c(),{proxy:h}=M(),j=I({multiple:!1,docList:[],name:"",time:[],fileList:[],preIndex:0,preItem:{},active:0,titleName:"未分类",removeAble:!0,delAble:!0,checkedId:[],del:!0,dataSource:[],docParams:{},pagination:{pageNo:1,pageSize:10,total:0},spinLoad:!1,isEdit:!1,id:"",classId:"",title:"",classVisible:!1,maxInput:10,inputNumber:0,calssForm:{},formRules:{name:[{required:!0,message:"请输入分类名称"}]},moveVisible:!1,determineTitle:"移动至",checkedMoveId:""}),F=[{title:"文件",ellipsis:!0,dataIndex:"name"},{title:"上传人",ellipsis:!0,dataIndex:"createBy"},{title:"时间",dataIndex:"createTimeStr"}],N=()=>{d.back()},D=()=>{j.pagination.pageNo=1,j.pagination.pageSize=10,z()},O=()=>{j.name="",j.time=[],z()},U=(e,a)=>{j.active=a,j.titleName=e.name,j.classId=e.id,j.pagination.pageNo=1,j.spinLoad=!0,z()};L((()=>j.fileList),((e,a)=>{e.length>0&&0===j.active&&U(e[0],j.active),e.length,a.length}));const z=()=>{var e;(e={classifyId:j.classId,name:j.name,startDate:j.time[0],endDate:j.time[1],pageNo:j.pagination.pageNo,pageSize:j.pagination.pageSize},t({url:s.documentList,method:"post",data:e})).then((e=>{const{list:a,total:t,pageNo:s,pageSize:l}=e.data;j.dataSource=a,j.pagination={total:t,pageSize:l,pageNo:s},j.spinLoad=!1})).finally((()=>{j.spinLoad=!1}))},A=e=>{const{current:a,pageSize:t}=e;j.pagination.pageNo=a,j.pagination.pageSize=t,z()},E=(e,a)=>{switch(j.isEdit=e,j.classVisible=!0,e){case!0:j.title="编辑",j.inputNumber=a.name.length,j.calssForm.name=a.name,j.id=a.id;break;case!1:j.title="新增",j.inputNumber=0,j.calssForm.name=""}},Y=()=>{f.value.validate().then((()=>{switch(j.isEdit){case!0:j.classVisible=!0;let l=[];l=j.fileList.map((e=>e.name)),l.includes(j.calssForm.name.trim())?e.warning("分类名不能重复"):(a={name:j.calssForm.name,id:j.id},t({url:s.classifyEdit,method:"post",data:a})).then((a=>{0===a.code?(h.$message.success(a.message),j.classVisible=!1,j.titleName=j.calssForm.name,ie()):e.success(a.message)}));break;case!1:let i=[];i=j.fileList.map((e=>e.name)),i.includes(j.calssForm.name.trim())?e.warning("分类名不能重复"):function(e){return t({url:s.classifyCreate,method:"post",data:e})}({name:j.calssForm.name}).then((a=>{e.success(a.message),j.classVisible=!1,j.active=j.fileList.length,j.titleName=j.calssForm.name,j.classId=a.data,ie(),z()}))}var a}))},H=a=>{i("提示","确定要删除该分类吗？删除后分类下的文件也都将被删除。",V).then((l=>{var i;l&&(i={id:a.id},t({url:s.classifyDel,method:"post",data:i})).then((a=>{e.success(a.message),ie(),U(j.fileList[0],0)}))}))},B=a=>a.name.split(".")[0].length>30&&(e.warning("文件名称不能超过30个字！"),!0),$=a=>{let l="";o(a.file).then((e=>{0===e.code&&(l=e.url)})).then((()=>{var i;(i={classifyId:j.classId,name:a.file.name,url:l},t({url:s.documentCreate,method:"post",data:i})).then((a=>{0===a.code&&(z(),e.success(a.message))}))}))},Z=()=>{j.calssForm.name=""},ee=e=>{j.checkedId=e,e.length>0?(j.removeAble=!1,j.delAble=!1):(j.removeAble=!0,j.delAble=!0)},ae=()=>{i("提示",`确定删除已选${j.checkedId.length}个文件吗?`,V).then((a=>{var l;a&&(l={ids:j.checkedId},t({url:s.documentDel,method:"post",data:l})).then((a=>{e.success(a.message),z()}))}))},te=()=>{var a;(a={classifyId:j.checkedMoveId,ids:j.checkedId},t({url:s.documentMove,method:"post",data:a})).then((a=>{e.success(a.message),z(),j.checkedMoveId=""})),j.moveVisible=!1},se=()=>{j.moveVisible=!1,j.checkedMoveId=""},le=()=>{j.inputNumber=j.calssForm.name.length},ie=()=>{var e;t({url:s.classifyList,method:"post",data:e}).then((e=>{j.fileList=e.data}))};return S((()=>{ie()})),(e,a)=>{const t=r("a-layout-header"),s=r("a-input-search"),l=r("a-range-picker"),i=r("SearchOutlined"),o=r("a-button"),d=r("reload-outlined"),c=r("a-layout-sider"),h=r("plus-outlined"),I=r("a-upload"),L=r("a-layout-content"),S=r("a-layout"),M=r("a-input"),V=r("a-form-item"),z=r("a-form"),ie=r("a-modal"),oe=r("a-radio"),ne=r("a-radio-group");return m(),v("div",q,[_(t,{class:"reset-layout-header"},{default:u((()=>[y("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:N}),K])),_:1}),y("div",P,[y("div",null,[_(s,{placeholder:"请输入名称搜索",value:j.name,"onUpdate:value":a[0]||(a[0]=e=>j.name=e),style:{width:"336px","margin-right":"14px"},onSearch:D},null,8,["value"]),_(l,{class:"picker",value:j.time,"onUpdate:value":a[1]||(a[1]=e=>j.time=e),"show-time":"",valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["value"]),_(o,{type:"primary",style:{margin:"0 20px"},onClick:D},{icon:u((()=>[_(i,{style:{"margin-right":"15px"}})])),default:u((()=>[C(" 查询 ")])),_:1}),_(o,{onClick:O},{icon:u((()=>[_(d,{style:{"margin-right":"15px"}})])),default:u((()=>[C(" 重置 ")])),_:1})])]),y("div",W,[_(S,{class:"content"},{default:u((()=>[_(c,{class:"sider"},{default:u((()=>[k(" 侧边文件分类组件 "),_(w(R),{fileList:j.fileList,active:j.active,onChooseFile:U,onEditclasses:E,onDelClasses:H},null,8,["fileList","active"])])),_:1}),_(L,{class:"contents"},{default:u((()=>[y("div",G,x(j.titleName),1),y("div",J,[_(I,{showUploadList:!1,"file-list":j.docList,"onUpdate:fileList":a[2]||(a[2]=e=>j.docList=e),multiple:j.multiple,"before-upload":B,accept:".xls,.xlsx,.doc,.docx,.pdf,.ppt,.pptx",onChange:$},{default:u((()=>[k(" :action=\"state.actionUrl + '/cloud/finance/doc/create'\" "),k(' :before-upload="beforeUpload" '),_(o,{type:"primary"},{icon:u((()=>[_(h)])),default:u((()=>[C(" 添加 ")])),_:1})])),_:1},8,["file-list","multiple"]),_(o,{type:"plain",disabled:j.removeAble,onClick:a[3]||(a[3]=e=>{j.moveVisible=!0}),style:{"margin-left":"12px"}},{default:u((()=>[C("批量移动")])),_:1},8,["disabled"]),j.delAble?(m(),p(o,{key:0,type:"plain",disabled:j.delAble,style:{"margin-left":"12px",color:"#ccc"}},{default:u((()=>[C("批量删除")])),_:1},8,["disabled"])):(m(),p(o,{key:1,danger:"",style:{"margin-left":"12px"},onClick:ae},{default:u((()=>[C("批量删除")])),_:1}))]),k(" 文件列表 "),_(n,{columns:F,dataSource:j.dataSource,slots:["operation"],rowSelection:!0,totals:j.pagination,spinLoad:j.spinLoad,onOnSelectedArry:ee,onOnSelectedRowKeys:A},{bodyCell:u((({column:e,record:a})=>["name"===e.dataIndex?(m(),v("a",{key:0,href:a.url,style:{color:"var(--primary-color)"}},x(a.name),9,Q)):k("v-if",!0)])),_:1},8,["dataSource","totals","spinLoad"])])),_:1})])),_:1})]),k(" 新增分类 "),_(ie,{maskClosable:!1,centered:"",visible:j.classVisible,"onUpdate:visible":a[5]||(a[5]=e=>j.classVisible=e),title:j.title,onCancel:Z,onOk:Y,width:"400px","ok-text":"确认","cancel-text":"取消"},{default:u((()=>[_(z,{ref_key:"formRef",ref:f,layout:"vertical",model:j.calssForm,name:"base",rules:j.formRules},{default:u((()=>[_(V,{label:"分类名称: ",name:"name"},{default:u((()=>[_(M,{maxlength:j.maxInput,value:j.calssForm.name,"onUpdate:value":a[4]||(a[4]=e=>j.calssForm.name=e),onInput:le,placeholder:"请输入分类名称"},null,8,["maxlength","value"]),y("div",X,x(j.inputNumber)+"/"+x(j.maxInput),1)])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","title"]),k(" 移动至分类文件夹 "),_(T,{isVisible:j.moveVisible,determineTitle:j.determineTitle,onEmithandleCancel:se,onEmitHandleOk:te,class:"demo-modal",style:{width:"320px"}},{default:u((()=>[_(ne,{value:j.checkedMoveId,"onUpdate:value":a[6]||(a[6]=e=>j.checkedMoveId=e)},{default:u((()=>[(m(!0),v(g,null,b(j.fileList,((e,a)=>(m(),p(oe,{disabled:j.titleName===e.name,style:{display:"flex",height:"40px","line-height":"40px"},value:e.id,key:e.id+a},{default:u((()=>[C(x(e.name),1)])),_:2},1032,["disabled","value"])))),128))])),_:1},8,["value"])])),_:1},8,["isVisible","determineTitle"])])}}},[["__scopeId","data-v-dce937e2"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/finance/index.vue"]]);export{Z as default};
