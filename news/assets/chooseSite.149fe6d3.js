import"./vue.a2f518ee.js";import{i as e,d as t}from"./siteBooking.8c7dbe73.js";import{_ as a}from"./index.272083a4.js";import{_ as i}from"./index.7061e8ea.js";import{y as s,w as l,q as o,f as d,t as n,b8 as p,o as r,a as u,c as m,a3 as c,b as g,a7 as y,a9 as v,F as f,a8 as h,a2 as x,O as b,H as _,L as I}from"./@vue.919ff404.js";const S={class:"card_set"},F={style:{display:"flex"}},N={style:{color:"var(--primary-color)"}},T={class:"table"};var w=i({__name:"chooseSite",props:{isRadio:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1},showStatus:{type:Boolean,default:!0},title:{type:String,default:""},typeId:{type:String,default:""},types:{type:Array,default:()=>[]},siteTypeId:{type:Array,default:()=>[]}},emits:["update:isVisible","emitHandleOk","emithandleCancel","selectChangeArr"],setup(i,{expose:w,emit:k}){const C=i,L={label:"name",value:"id"},O=s((()=>C.isVisible));l((()=>C.isVisible),(()=>{R()}));const U=()=>{k("emitHandleOk",B.sites,B.siteTable)},j=()=>{k("emithandleCancel")},B=o({bulidList:[],siteForm:{siteTypeIds:[],status:void 0,siteName:""},columns:[{title:"场地名称",dataIndex:"siteName"},{title:"所在建筑",dataIndex:"buildingName"},{title:"楼层",dataIndex:"floor"},{title:"房间号",dataIndex:"roomNum"},{title:"场地类型",dataIndex:"siteTypeName"},{title:"容纳人数",dataIndex:"peppleNum"},{title:"设备",dataIndex:"deviceNames"},{title:"状态",dataIndex:"status"}],siteTable:[],siteTabless:[],pagination:{pageNo:1,pageSize:10,total:0},spinLoad:!1,sites:[]});l((()=>C.siteTypeId),(e=>{B.siteForm.siteTypeIds=e}));const z=(e,t)=>{B.sites=e,k("selectChangeArr",e)},A=e=>{const{current:t,pageSize:a}=e;B.pagination.pageNo=t,B.pagination.pageSize=a,H()},R=()=>{H(),B.pagination.pageNo=1},V=()=>{B.siteForm.buildingId=null,B.siteForm.deviceId=null,B.siteForm.siteName="",B.siteForm.status=void 0,B.pagination.pageNo=1,H()},H=()=>{e({siteBookingTypeId:C.typeId,...B.pagination,...B.siteForm}).then((e=>{const{list:t,total:a,pageNo:i,pageSize:s}=e.data;B.siteTable=t,B.pagination={total:a,pageSize:s,pageNo:i}}))};return d((()=>{t().then((e=>{B.bulidList=e.data})),H()})),w({...n(B)}),(e,t)=>{const s=p("a-select"),l=p("a-form-item"),o=p("a-select-option"),d=p("a-input"),n=p("SearchOutlined"),w=p("a-button"),k=p("redo-outlined"),H=p("a-form"),q=p("a-badge"),D=p("a-modal");return r(),u("div",S,[m(D,{visible:O.value,"onUpdate:visible":t[5]||(t[5]=e=>O.value=e),title:C.title,onOk:U,onCancel:j,width:"816px"},{default:c((()=>[m(H,{layout:"vertical"},{default:c((()=>[g("div",F,[m(l,{label:"场地类型：",style:{width:"180px","margin-right":"10px"}},{default:c((()=>[y(" allowClear "),m(s,{value:B.siteForm.siteTypeIds,"onUpdate:value":t[0]||(t[0]=e=>B.siteForm.siteTypeIds=e),mode:"multiple",placeholder:"请选择","max-tag-count":1,options:i.types,fieldNames:L},{maxTagPlaceholder:c((e=>[g("span",N,"+ "+v(e.length)+" ...",1)])),_:1},8,["value","options"])])),_:1}),m(l,{label:"所在建筑：",style:{width:"180px","margin-right":"10px"}},{default:c((()=>[m(s,{placeholder:"请选择",value:B.siteForm.buildingId,"onUpdate:value":t[1]||(t[1]=e=>B.siteForm.buildingId=e)},{default:c((()=>[(r(!0),u(f,null,h(B.bulidList,((e,t)=>(r(),x(o,{key:t,value:e.id},{default:c((()=>[b(v(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),m(l,{label:"设备：",style:{width:"180px","margin-right":"10px"}},{default:c((()=>[m(s,{placeholder:"请选择",value:B.siteForm.deviceId,"onUpdate:value":t[2]||(t[2]=e=>B.siteForm.deviceId=e)},{default:c((()=>[y(' <a-select-option :value="0">教学楼</a-select-option>\r\n                            <a-select-option :value="1">图书馆</a-select-option> ')])),_:1},8,["value"])])),_:1}),_(m(l,{label:"状态：",placeholder:"请选择",style:{width:"180px","margin-right":"10px"}},{default:c((()=>[m(s,{placeholder:"请选择",value:B.siteForm.status,"onUpdate:value":t[3]||(t[3]=e=>B.siteForm.status=e)},{default:c((()=>[m(o,{value:0},{default:c((()=>[b("已约满")])),_:1}),m(o,{value:1},{default:c((()=>[b("可预约")])),_:1})])),_:1},8,["value"])])),_:1},512),[[I,C.showStatus]]),m(l,{label:"场地名称：",style:{width:"180px","margin-right":"10px"}},{default:c((()=>[m(d,{placeholder:"请输入",value:B.siteForm.siteName,"onUpdate:value":t[4]||(t[4]=e=>B.siteForm.siteName=e)},null,8,["value"])])),_:1})]),m(l,null,{default:c((()=>[m(w,{type:"primary",style:{"margin-right":"12px"},onClick:R},{icon:c((()=>[m(n,{style:{"margin-right":"12px"}})])),default:c((()=>[b(" 查询 ")])),_:1}),m(w,{onClick:V},{icon:c((()=>[m(k,{style:{"margin-right":"12px"}})])),default:c((()=>[b(" 重置 ")])),_:1})])),_:1})])),_:1}),g("div",T,[m(a,{columns:B.columns,isRadio:C.isRadio,dataSource:B.siteTable,isSrollY:!0,slots:["operation"],rowSelection:!0,totals:B.pagination,spinLoad:B.spinLoad,onOnSelectedArry:z,onOnSelectedRowKeys:A},{bodyCell:c((({column:e,record:t})=>[y(" {{ record }} "),"status"===e.dataIndex?(r(),x(q,{key:0,status:0===t.status?"success":1===t.status?"error":"default",text:0===t.status?"可预约":1===t.status?"已约满":"封禁"},null,8,["status","text"])):y("v-if",!0)])),emptyText:c((()=>[b(" 暂无数据 ")])),_:1},8,["columns","isRadio","dataSource","totals","spinLoad"])])])),_:1},8,["visible","title"])])}}},[["__scopeId","data-v-198760ad"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/siteBooking/components/chooseSite.vue"]]);export{w as c};
