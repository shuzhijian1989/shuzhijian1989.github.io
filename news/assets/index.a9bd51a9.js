import{_ as e}from"./index.272083a4.js";import{_ as a,X as t}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{q as o,w as s,b8 as i,o as l,a as n,c as r,a3 as d,F as p,a8 as c,b as m,a9 as u,a2 as f,a7 as y,b5 as b,b4 as v,Q as g,y as j,f as h,u as x,O as _,a6 as k,a5 as I}from"./@vue.919ff404.js";import{u as w,a as S}from"./vue-router.907b547c.js";import{g as N}from"./FilterDropdown.5a779a00.js";import{r as q}from"./patrol.d6c87ea2.js";import{S as F}from"./@ant-design.2e172c39.js";import"./ant-design-vue.db4d48e3.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const J={key:0,class:"info_class"},T={class:"info_title"},V=(e=>(b("data-v-b2f11026"),e=e(),v(),e))((()=>m("div",{class:"icon"},null,-1))),C={class:"text"},z={class:"item_value"},U={key:1};var D=a({__name:"planRecord",props:{modalVisible:{type:Boolean,default:!1},formJson:{type:String,default:""}},emits:["update:modalVisible"],setup(e,{emit:a}){const t=e,b=o({formJsons:[]});function v(){a("update:modalVisible",!1)}return s((()=>t.modalVisible),(e=>{if(e){const e=JSON.parse(t.formJson);b.formJsons=e.map((e=>{const{valueType:a,value:t}=e;if("Array"===a){if(t.includes("]")){const a=JSON.parse(t);return{...e,value:a.join(",")}}return{...e,value:t.join(",")}}return{...e,value:t}}))}})),(e,a)=>{const o=i("a-image-preview-group"),s=i("a-empty"),g=i("a-modal");return l(),n("div",null,[r(g,{visible:t.modalVisible,"onUpdate:visible":a[0]||(a[0]=e=>t.modalVisible=e),title:"查看反馈内容",onCancel:v,footer:!1,bodyStyle:{overflow:"auto",maxHeight:"500px"}},{default:d((()=>[b.formJsons.length?(l(),n("div",J,[(l(!0),n(p,null,c(b.formJsons,((e,a)=>(l(),n("div",{class:"info_item",key:a},[m("div",T,[V,m("div",C,u(e.title),1)]),m("span",z,["ImageUpload"===e.name?(l(),f(o,{key:0},{default:d((()=>[y(' <a-image\r\n                                :width="126"\r\n                                src="https://alicdn.1d1j.cn/announcement/20230612/82db1694dbe1441f8fbd224395672187.jpg"\r\n                            /> ')])),_:1})):(l(),n("span",U,u(e.value||"--"),1))])])))),128))])):(l(),f(s,{key:1,image:"image/empty.png","image-style":{width:"100%",height:"180px"}}))])),_:1},8,["visible"])])}}},[["__scopeId","data-v-b2f11026"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/patrol/components/planRecord.vue"]]);const M=e=>(b("data-v-3bd812ee"),e=e(),v(),e),K={class:"plan_info_class"},L=M((()=>m("span",null," 计划巡查记录",-1))),B={class:"plan_list"},H=M((()=>m("span",{class:"title"}," 巡查场地列表/巡查记录 ",-1))),O={key:0,class:"head_operation"},R={class:"queryform_class"},P={key:1},$={key:2},A={key:3,class:"table_btn"};var E=a({__name:"index",props:{isHander:{type:Boolean,default:!0},disableds:{type:Boolean,default:!1}},setup(a){const s=a,c=g(),b=w(),v=S(),J=[{text:"全部",color:"",value:null},{text:"未完成",color:"#faad14",value:0},{text:"已完成",color:"#00B781",value:1},{text:"已逾期",color:"#f5222d",value:4}],T=o({taskType:[],formJsons:"",infoModalVisible:!1,spinLoad:!1,taskData:[],pagination:{pageNo:1,pageSize:10,total:0},queryForm:{patrolTypeId:null,queryName:"",siteName:"",status:""},planInfoColumn:[{title:"序号",dataIndex:"index",key:"index",width:60},{title:"巡查场地",dataIndex:"siteName",key:"siteName",ellipsis:!0,showSorterTooltip:!0},{title:"状态",dataIndex:"status",key:"status",customFilterIcon:"caret-right-outlined",filters:J,ellipsis:!0,showSorterTooltip:!0,pathColor:!1,filterMultiple:!1,customFilterDropdown:!0,filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",N(e))},{title:"执行人员",dataIndex:"userName",key:"userName",width:110},{title:"完成时间/完成人员",dataIndex:"finishTime",key:"finishTime",ellipsis:!0,showSorterTooltip:!0},{title:"反馈内容",dataIndex:"operation",key:"operation",fixed:"right",width:100}]}),V=()=>{const{patrolProjectId:e}=v.query,a={...T.queryForm,...T.pagination};"taskInfo"===v.name?a.id=e:a.patrolProjectId=e,T.spinLoad=!0,q(a).then((({data:e})=>{const{pageNo:a,pageSize:t,total:o,list:s=[]}=e;T.taskData=s,T.pagination={pageNo:a,pageSize:t,total:o}})).finally((()=>T.spinLoad=!1))},C=e=>{const{pageSize:a,current:t,status:o}=e;T.queryForm.status=(null==o?void 0:o.length)?o[0]:o,T.pagination.pageNo=t,T.pagination.pageSize=a,V()},z=()=>{T.pagination.pageNo=1,T.pagination.pageSize=20,V()},U=()=>{c.value.resetFields(),T.pagination.pageNo=1,T.pagination.pageSize=20,V()},M=j((()=>e=>{let a={color:"",text:"--"};return J.forEach((t=>{t.value==e&&(a=t)})),a})),E=j((()=>e=>e.finishTime||e.taskUserName?`${e.finishTime} ${e.taskUserName}`:"--"));return h((()=>{V()})),(a,o)=>{const v=i("a-layout-header"),g=i("a-input"),j=i("a-form-item"),h=i("a-range-picker"),w=i("a-button"),S=i("redo-outlined"),N=i("a-form"),q=t,J=i("a-badge"),V=e;return l(),n("div",K,[s.isHander?(l(),f(v,{key:0,class:"plan_info_header"},{default:d((()=>[m("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:o[0]||(o[0]=e=>x(b).back())}),L])),_:1})):y("v-if",!0),m("div",B,[H,s.isHander?(l(),n("div",O,[r(N,{layout:"horizontal",model:T.queryForm,ref_key:"queryVoteRef",ref:c},{default:d((()=>[m("div",R,[r(j,{label:"关键字：",name:"queryName"},{default:d((()=>[r(g,{style:{width:"240px"},value:T.queryForm.queryName,"onUpdate:value":o[1]||(o[1]=e=>T.queryForm.queryName=e),placeholder:"请输入计划名称关键词"},null,8,["value"])])),_:1}),r(j,{label:"日期：",name:"patrolTypeId"},{default:d((()=>[r(h,{value:T.queryForm.patrolTypeId,"onUpdate:value":o[2]||(o[2]=e=>T.queryForm.patrolTypeId=e),"show-time":""},null,8,["value"])])),_:1}),r(j,null,{default:d((()=>[r(w,{type:"primary","html-type":"submit",onClick:z},{icon:d((()=>[r(x(F),{style:{"margin-right":"6px"}})])),default:d((()=>[_(" 查询 ")])),_:1}),r(w,{style:{"margin-left":"10px"},onClick:U},{icon:d((()=>[r(S,{style:{"margin-right":"6px"}})])),default:d((()=>[_(" 重置 ")])),_:1})])),_:1})])])),_:1},8,["model"])])):y("v-if",!0),y(" 表格 "),r(V,{class:"worker-table table_cascader",columns:T.planInfoColumn,dataSource:T.taskData,totals:T.pagination,rowSelection:!1,spinLoad:T.spinLoad,rowKeyId:"id",onOnSelectedRowKeys:C},{customFilterIcon:d((({column:e})=>[(l(),f(k(e.customFilterIcon),{style:{color:"#262626"}}))])),bodyCell:d((({column:e,record:a,text:t,index:o})=>["index"===e.dataIndex?(l(),n(p,{key:0},[_(u(o+1),1)],64)):"finishTime"===e.dataIndex?(l(),n("span",P,[r(q,{title:E.value(a)},null,8,["title"])])):"status"===e.dataIndex?(l(),n("span",$,[r(J,{color:M.value(a.status).color},{text:d((()=>[m("span",{style:I({color:M.value(a.status).color})},u(M.value(a.status).text),5)])),_:2},1032,["color"])])):"operation"===e.dataIndex?(l(),n("div",A,[r(w,{class:"button-link",type:"link ",disabled:s.disableds||!a.formJson,onClick:e=>{return t=a,T.formJsons=t.formJson,void(T.infoModalVisible=!0);var t}},{default:d((()=>[_(" 查看详情 ")])),_:2},1032,["disabled","onClick"])])):(l(),f(q,{key:4,title:t},null,8,["title"]))])),_:1},8,["columns","dataSource","totals","spinLoad"])]),r(D,{modalVisible:T.infoModalVisible,"onUpdate:modalVisible":o[3]||(o[3]=e=>T.infoModalVisible=e),formJson:T.formJsons},null,8,["modalVisible","formJson"])])}}},[["__scopeId","data-v-3bd812ee"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/patrol/patrolPlan/planInfo/index.vue"]]);export{E as default};
