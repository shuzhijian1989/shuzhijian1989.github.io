import{_ as e,u as s,T as t,be as a,p as i}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{u as c}from"./vue-router.907b547c.js";import{Q as r,q as o,g as d,f as n,b8 as l,o as p,a as m,c as u,b}from"./@vue.919ff404.js";import"./ant-design-vue.db4d48e3.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const j={class:"oa_approve"},f=["src"];var h=e({__name:"index",setup(e){const h=s(),v=c(),k=r(),g=o({spinLoading:!0,nodeId:"",iframeUrl:"",modalVisibles:!1,visibles:!1,multipleTrue:!1,selectTabs:[{tab:"教职工",key:1,checked:!0},{tab:"角色",key:2,checked:!1}],selectMode:"depa",checkParents:!1,checkedList:[],checkedKey:"id",jeus:[],treeDataStudent:[],selectTreeData:[]}),y=e=>{const s=k.value.contentWindow;null==s||s.postMessage({nodeId:g.nodeId,params:JSON.parse(JSON.stringify(e))},"*")};d((()=>{}));const T=e=>{if(!e)return;const{back:s}=e.data;s?(v.push({name:"appModelList"}),removeEventListener("message",T())):(e=>{const{visibles:s,mode:t,checked:a,multiple:i=!0,nodeId:c}=e;"personnel"===t?(g.selectMultiple="personnel",g.multipleTrue=i,g.selectTabs=[{tab:"教职工",key:1,checked:!0}],g.selectTreeData=g.treeDataStudent):(g.selectTabs=[{tab:"角色",key:2,checked:!0}],g.multipleTrue=!1,g.selectTreeData=g.jeus,g.selectMultiple="depa"),g.checkedList=a,g.selectMode=t,g.visibles=s,g.nodeId=c})(e.data)};return n((()=>{a().then((e=>{const{data:s}=e;g.jeus=s})),h.dispatch("selectSource/setOrganizationTree").then((e=>{g.treeDataStudent=e})),g.iframeUrl=`http://192.168.3.185:8888/#/formsPanel?tk=${t.get("Access-Token")}&schId=${h.state.user.currentSchool.id}`,window.addEventListener("message",(e=>T(e))),setTimeout((()=>{g.spinLoading=!1}),1800)})),(e,s)=>{const t=l("a-spin"),a=i;return p(),m("div",j,[u(t,{spinning:g.spinLoading},null,8,["spinning"]),b("iframe",{class:"ifram",ref_key:"iframeRef",ref:k,src:g.iframeUrl,frameborder:"0"},null,8,f),u(a,{visible:g.visibles,"onUpdate:visible":s[0]||(s[0]=e=>g.visibles=e),checked:g.checkedList,"onUpdate:checked":s[1]||(s[1]=e=>g.checkedList=e),multiple:g.multipleTrue,tabs:g.selectTabs,mode:g.selectMode,checkParents:g.checkParents,checkedKey:g.checkedKey,optionLength:10,onHandleOk:y,treeData:g.selectTreeData},null,8,["visible","checked","multiple","tabs","mode","checkParents","checkedKey","treeData"])])}}},[["__scopeId","data-v-106a8af1"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/oaApprove/index.vue"]]);export{h as default};
