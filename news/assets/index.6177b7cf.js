import"./vue.a2f518ee.js";import{m as e}from"./ant-design-vue.db4d48e3.js";import{_ as a,G as t,ca as i,cb as s,bv as l,cc as n,cd as o,ce as r}from"./index.7061e8ea.js";import{y as d,q as m,t as u,b8 as p,o as c,a as b,c as g,a3 as f,O as v,b as y,r as h,f as k,a9 as _,w as x,a2 as F,F as S,a8 as j,a4 as w,M as D,a7 as N,u as T,R as C,n as I,b5 as M,b4 as O}from"./@vue.919ff404.js";import{_ as V}from"./index.272083a4.js";import{g as z}from"./oss.72e23b0d.js";import{E as Y}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./ali-oss.e15d125a.js";import"./ydutils.99497787.js";import"./ydutils.a58fbaf1.js";const U={class:"searchHead"};var H=a({__name:"SearchForm",props:{btnDisable:{type:Boolean,default:!0},primary:{type:String,default:""}},emits:["batchSetScreen","addModelDialog","handleOpen","handleStop","returnSearch"],setup(e,{expose:a,emit:t}){const i=e,s=()=>{t("batchSetScreen")},l=()=>{t("handleOpen")},n=()=>{t("handleStop")},o=()=>{t("addModelDialog")};d((()=>i.primary));const r=m({siteOptions:[],pagination:{title:"",pageNo:1,pageSize:10}});a({...u(r)});const h=()=>{r.pagination.pageNo=1,r.pagination.pageSize=10,t("returnSearch")},k=()=>{r.pagination.pageNo=1,r.pagination.pageSize=10,t("returnSearch")},_=()=>{r.pagination.title="",r.pagination.pageNo=1,r.pagination.pageSize=10,t("returnSearch")};return(e,a)=>{const t=p("a-input-search"),d=p("a-form-item"),m=p("SearchOutlined"),u=p("a-button"),x=p("redo-outlined"),F=p("a-form"),S=p("plus-outlined");return c(),b("div",U,[g(F,{layout:"inline"},{default:f((()=>[g(d,{label:""},{default:f((()=>[g(t,{placeholder:"搜索标题",maxlength:20,value:r.pagination.title,"onUpdate:value":a[0]||(a[0]=e=>r.pagination.title=e),style:{width:"240px","margin-right":"14px"},onSearch:h},null,8,["value"])])),_:1}),g(d,null,{default:f((()=>[g(u,{type:"primary",style:{"margin-right":"12px"},onClick:k},{icon:f((()=>[g(m,{style:{"margin-right":"12px"}})])),default:f((()=>[v(" 查询 ")])),_:1}),g(u,{onClick:_},{icon:f((()=>[g(x,{style:{"margin-right":"12px"}})])),default:f((()=>[v(" 重置 ")])),_:1})])),_:1})])),_:1}),y("div",null,[g(u,{onClick:o,type:"primary",style:{"margin-right":"12px"}},{icon:f((()=>[g(S)])),default:f((()=>[v("新增 ")])),_:1}),g(u,{type:"primary",onClick:l,disabled:i.btnDisable,style:{"margin-right":"12px"}},{default:f((()=>[v("开启")])),_:1},8,["disabled"]),g(u,{type:"primary",onClick:n,disabled:i.btnDisable},{default:f((()=>[v("停止")])),_:1},8,["disabled"]),g(u,{type:"primary",onClick:s,disabled:i.btnDisable,style:{"margin-left":"12px"}},{default:f((()=>[v("批量删除")])),_:1},8,["disabled"])])])}}},[["__scopeId","data-v-3694b87b"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/managementModule/components/SearchForm.vue"]]);const R={class:"card_set"};var L=a({__name:"ClassCardSet",props:{isVisible:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["update:isVisible","emitHandleOk","emithandleCancel"],setup(e,{expose:a,emit:i}){const s=e,l=d((()=>s.isVisible)),n=()=>{y.value.validate().then((()=>{i("emitHandleOk")}))},o=()=>{y.value.resetFields(),x.banForm.fanwei="all",i("emithandleCancel")},r={label:"showName",value:"id",children:"children"},y=h(),x=m({signOptions:[],banForm:{fanwei:"all"},formRules:{fanwei:[{required:!0,message:"请选择设备范围"}],deviceNos:[{required:!0,message:"请选择班牌"}],time:[{required:!0,message:"请选择时间"}]}});return a({...u(x)}),k((()=>{(async()=>{const{data:e}=await t({direction:""});x.signOptions=e})()})),(e,a)=>{const t=p("home-outlined"),i=p("a-tree-select"),d=p("a-form-item"),m=p("a-range-picker"),u=p("a-form"),h=p("a-modal");return c(),b("div",R,[g(h,{visible:l.value,"onUpdate:visible":a[2]||(a[2]=e=>l.value=e),title:s.title,onOk:n,onCancel:o,width:"408px"},{default:f((()=>[g(u,{ref_key:"formRef",ref:y,layout:"vertical",model:x.banForm,name:"base",rules:x.formRules},{default:f((()=>[g(d,{label:"选择设备范围: ",name:"fanwei"},{default:f((()=>[g(i,{style:{width:"100%"},"tree-checkable":"",multiple:"",value:x.banForm.deviceNos,"onUpdate:value":a[0]||(a[0]=e=>x.banForm.deviceNos=e),placeholder:"请选择班牌","allow-clear":"","tree-data":x.signOptions,fieldNames:r},{title:f((e=>[g(t,{class:"icon-yellow"}),v(" "+_(e.showName),1)])),_:1},8,["value","tree-data"])])),_:1}),g(d,{name:"time",label:"设置启止时间:"},{default:f((()=>[g(m,{value:x.banForm.time,"onUpdate:value":a[1]||(a[1]=e=>x.banForm.time=e),"show-time":"",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","title"])])}}},[["__scopeId","data-v-159b886e"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/managementModule/components/ClassCardSet.vue"]]);const q=[{title:"序号",key:"id",ellipsis:!0,width:"100px",customRender:({index:e})=>`${e+1}`,fixed:"left"},{title:"标题",dataIndex:"title"},{title:"班牌名称",dataIndex:"brandNames"},{title:"内容预览",dataIndex:"yulan"},{title:"启止时间",dataIndex:"startDate",width:"400px"},{title:"状态",dataIndex:"status"},{title:"操作",ellipsis:!1,dataIndex:"operation"}];const A={class:"warp"},E={class:"manage"},B={class:"search_form"},G={class:"table_warp"},J={key:1},P=["onClick"],K={key:0,style:{"font-weight":"500","font-size":"24px",overflow:"auto"}},$=["src"],Q={key:0,class:"has_img"},W=["src"],X={key:1,class:"no_img"},Z=(e=>(M("data-v-006a08f0"),e=e(),O(),e))((()=>y("span",{class:"bg"},"点击上传图片",-1))),ee={key:0,style:{color:"red"}};var ae=a({__name:"index",setup(a){const d={label:"showName",value:"id",children:"children"},u=h(),M=h(),O=h(),U=m({flagg:!1,inputTit:0,inputTit2:0,inputTit3:0,brandIdNos:[],ids:[],btnDisable:!0,statusList:[{statusName:"全部",status:null},{statusName:"已开启",status:2},{statusName:"已停止",status:1},{statusName:"已过期",status:3}],url:"../../../../../public/image/empty.png",status:null,statusIndex:0,modelType:0,screenDisable:!0,openDisable:!0,stopDisable:!0,imgVisible:!1,screensVisible:!1,modelVisible:!1,fileList:[],dataSource:[],spinLoad:!1,pagination:{pageNo:1,pageSize:10,total:0},editItem:{},signOptions:[],banForm:{fanwei:"all"},batchNos:[],result:[],Nos:[],types:null,modelRules:{pic:[{required:!0,message:""}],deviceNos:[{required:!0,message:"请选择班牌"}],time:[{required:!0,message:"请选择时间"}],linkTitle:[{required:!0,message:"请输入标题"}],linkTitle2:[{required:!0,message:"请输入标题"}],linkAddress:[{required:!0,message:"请输入链接地址"}]}}),R=e=>{e.target.value},ae=()=>{let a={};a={id:U.editItem.id,startDate:O.value.banForm.time[0],endDate:O.value.banForm.time[1],brandIds:O.value.banForm.deviceNos},i(a).then((a=>{0===a.code?(e.success(a.message),ve()):e.error(a.message)})),U.screensVisible=!1},te=()=>{U.screensVisible=!1},ie=()=>{U.fileList=[],U.modelType=0,U.banForm.deviceNos=void 0,U.modelVisible=!0},se=()=>{s({status:2,ids:U.ids}).then((a=>{0===a.code?(e.success(a.message),ve()):e.error(a.message)}))},le=()=>{s({status:1,ids:U.ids}).then((a=>{0===a.code?(e.success(a.message),ve()):e.error(a.message)}))},ne=a=>{l("删除","设备上的霸屏内容将会一起被删除，是否确认删除？",Y).then((a=>{a&&n({ids:U.ids}).then((a=>{0===a.code?(e.success(a.message),ve()):e.error(a.message)}))}))},oe=()=>{U.pagination.pageNo=1,ve()},re=a=>!(a.size/1024/1024<5)&&(e.error("文件大于5M，请重新上传"),!0),de=()=>{U.inputTit=U.banForm.linkTitle.length},me=()=>{U.inputTit2=U.banForm.linkTitle2.length},ue=()=>{U.inputTit3=U.banForm.linkAddress.length},pe=a=>{z(a,{catalogue:"/smartClassSign/customModule"},(e=>{U.percentage=e})).then((a=>{const{code:t,msg:i,url:s}=a;0===t?(U.banForm.pic=s,U.fileList=[]):(e.error(i),U.banForm.pic="")})).finally((()=>{}))},ce=()=>{const a=[];U.banForm.pic||(U.flagg=!0),M.value.validate().then((()=>{let t={};t=0===U.modelType?{type:"1",url:U.banForm.pic,title:U.banForm.linkTitle,startDate:U.banForm.time[0],endDate:U.banForm.time[1],brandIds:U.banForm.deviceNos}:{type:"2",url:U.banForm.linkAddress,title:U.banForm.linkTitle2,startDate:U.banForm.time[0],endDate:U.banForm.time[1],deviceNos:a,brandIds:U.banForm.deviceNos},o(t).then((a=>{0===a.code?(U.modelVisible=!1,ve(),e.success(a.message)):e.error(a.message),M.value.resetFields(),U.flagg=!1,U.banForm.linkTitle="",U.banForm.linkTitle2="",U.banForm.linkAddress="",U.inputTit=0,U.inputTit2=0,U.inputTit3=0}))}))},be=()=>{M.value.resetFields(),U.banForm.linkTitle2="",U.banForm.linkTitle="",U.banForm.linkAddress="",U.inputTit=0,U.inputTit2=0,U.inputTit3=0,U.flagg=!1},ge=e=>{U.ids=e,C(U.ids).length>0?U.btnDisable=!1:U.btnDisable=!0},fe=e=>{const{current:a,pageSize:t}=e;U.pagination.pageNo=a,U.pagination.pageSize=t,ve()};x((()=>[U.type,U.ids]),((e,a)=>{e[0]!==a[0]&&(U.ids.length=0,U.btnDisable=!0)}));const ve=(e=null)=>{U.spinLoad=!0,r({title:u.value.pagination.title,pageNo:U.pagination.pageNo,pageSize:U.pagination.pageSize,status:e}).then((e=>{const{list:a,total:t,pageNo:i,pageSize:s}=e.data;U.dataSource=a,U.pagination.pageNo=i,U.pagination.pageSize=s,U.pagination.total=t,U.spinLoad=!1}))};return k((()=>{ve(),I((async()=>{const{data:e}=await t({direction:""});U.signOptions=e}))})),(e,a)=>{const t=p("caret-down-outlined"),i=p("a-menu-item"),s=p("a-menu"),l=p("a-dropdown"),n=p("a-button"),o=p("a-badge"),r=p("a-modal"),m=p("a-radio-button"),h=p("a-radio-group"),k=p("a-input"),x=p("a-form-item"),C=p("plus-outlined"),I=p("a-upload"),z=p("a-textarea"),Y=p("home-outlined"),ye=p("a-tree-select"),he=p("a-range-picker"),ke=p("a-form");return c(),b("div",A,[y("div",E,[y("div",B,[g(H,{ref_key:"searef",ref:u,onBatchSetScreen:ne,onAddModelDialog:ie,onHandleOpen:se,onHandleStop:le,onReturnSearch:oe,btnDisable:U.btnDisable},null,8,["btnDisable"])]),y("div",G,[g(V,{columns:T(q),dataSource:U.dataSource,slots:["operation"],rowSelection:!0,totals:U.pagination,spinLoad:U.spinLoad,onOnSelectedArry:ge,onOnSelectedRowKeys:fe},{headerCell:f((({column:e})=>["status"===e.dataIndex?(c(),F(l,{key:0},{overlay:f((()=>[g(s,null,{default:f((()=>[(c(!0),b(S,null,j(U.statusList,((e,a)=>(c(),F(i,{key:a,onClick:t=>((e,a)=>{U.status=e.status,U.statusIndex=a,U.pagination.pageNo=1,ve(e.status)})(e,a)},{default:f((()=>[y("span",{class:w(U.statusIndex===a?"acti":"")},_(e.statusName),3)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:f((()=>[y("a",{style:{color:"#000"},onClick:a[0]||(a[0]=D((()=>{}),["prevent"]))},[v(" 状态 "),g(t,{style:{color:"var(--primary-color)"}})])])),_:1})):N("v-if",!0)])),bodyCell:f((({column:e,record:a})=>["yulan"===e.dataIndex?(c(),F(n,{key:0,type:"text",style:{color:"var(--primary-color)"},onClick:e=>(e=>{U.types=e.type,U.imgVisible=!0,U.url=e.url})(a)},{default:f((()=>[v("查看")])),_:2},1032,["onClick"])):N("v-if",!0),"startDate"===e.dataIndex?(c(),b("span",J,_(a.startDate)+" ~ "+_(a.endDate),1)):N("v-if",!0),"status"===e.dataIndex?(c(),b(S,{key:2},[1==a.status?(c(),F(o,{key:0,status:"error",text:"已停止"})):N("v-if",!0),2==a.status?(c(),F(o,{key:1,status:"success",text:"已开启"})):N("v-if",!0),3==a.status?(c(),F(o,{key:2,status:"default",text:"已过期"})):N("v-if",!0)],64)):N("v-if",!0),"operation"===e.dataIndex?(c(),b("a",{key:3,onClick:e=>{return t=a,U.screensVisible=!0,U.editItem=t,O.value.banForm.time=[t.startDate,t.endDate],void(O.value.banForm.deviceNos=t.brandIds.split(","));var t},style:{color:"var(--primary-color)","margin-right":"10px"}},"编辑",8,P)):N("v-if",!0)])),_:1},8,["columns","dataSource","totals","spinLoad"])]),N(" 查看大图的弹框 "),g(r,{visible:U.imgVisible,"onUpdate:visible":a[1]||(a[1]=e=>U.imgVisible=e),title:"查看",footer:null,class:"look_img",bodyStyle:{"min-height":"400px","min-width":"600px",display:"flex","justify-content":"center"," align-items":"center","object-fit":"contain"}},{default:f((()=>[2==U.types?(c(),b("div",K,_(U.url),1)):(c(),b("img",{key:1,src:U.url,alt:"",style:{width:"100%",height:"100%"}},null,8,$))])),_:1},8,["visible"]),g(L,{title:"编辑",ref_key:"editRef",ref:O,isVisible:U.screensVisible,onEmitHandleOk:ae,onEmithandleCancel:te},null,8,["isVisible"]),N(" 新增模式的弹框 "),g(r,{visible:U.modelVisible,"onUpdate:visible":a[8]||(a[8]=e=>U.modelVisible=e),title:"新增自定义内容",onOk:ce,onCancel:be,width:"408px",class:"add_model"},{default:f((()=>[g(h,{value:U.modelType,"onUpdate:value":a[2]||(a[2]=e=>U.modelType=e),onChange:R,"button-style":"solid",style:{"margin-bottom":"16px"}},{default:f((()=>[g(m,{class:"radio",value:0},{default:f((()=>[v("图片")])),_:1}),g(m,{class:"radio",value:1},{default:f((()=>[v("链接")])),_:1})])),_:1},8,["value"]),g(ke,{ref_key:"modelRef",ref:M,layout:"vertical",model:U.banForm,name:"base",rules:U.modelRules},{default:f((()=>[0===U.modelType?(c(),F(x,{key:0,label:"标题: ",name:"linkTitle"},{default:f((()=>[g(k,{showCount:!0,placeholder:"请输入",maxlength:20,onInput:de,value:U.banForm.linkTitle,"onUpdate:value":a[3]||(a[3]=e=>U.banForm.linkTitle=e)},null,8,["value"])])),_:1})):N("v-if",!0),0===U.modelType?(c(),F(x,{key:1,label:"图片: ",name:"pic"},{default:f((()=>[g(I,{ref:"uploads",accept:".jpg, .jpeg, .png, .JPG, .JPEG,",action:"/",multiple:!1,"show-upload-list":!1,"file-list":U.fileList,limit:1,"before-upload":re,onChange:pe},{default:f((()=>[U.banForm.pic?(c(),b("div",Q,[y("img",{src:U.banForm.pic},null,8,W)])):(c(),b("div",X,[g(C,{style:{"font-size":"24px"}}),Z]))])),_:1},8,["file-list"]),U.flagg?(c(),b("div",ee," 请上传图片 ")):N("v-if",!0)])),_:1})):N("v-if",!0),1===U.modelType?(c(),F(x,{key:2,label:"标题: ",name:"linkTitle2"},{default:f((()=>[g(k,{placeholder:"请输入",maxlength:20,onInput:me,value:U.banForm.linkTitle2,"onUpdate:value":a[4]||(a[4]=e=>U.banForm.linkTitle2=e),showCount:!0},null,8,["value"])])),_:1})):N("v-if",!0),1===U.modelType?(c(),F(x,{key:3,label:"链接地址: ",name:"linkAddress"},{default:f((()=>[g(z,{maxlength:500,"auto-size":{minRows:3,maxRows:5},value:U.banForm.linkAddress,"onUpdate:value":a[5]||(a[5]=e=>U.banForm.linkAddress=e),onInput:ue,showCount:!0,placeholder:"请输入链接"},null,8,["value"])])),_:1})):N("v-if",!0),g(x,{label:"选择设备范围: ",name:"deviceNos"},{default:f((()=>[g(ye,{style:{width:"100%"},"tree-checkable":"",multiple:"",value:U.banForm.deviceNos,"onUpdate:value":a[6]||(a[6]=e=>U.banForm.deviceNos=e),placeholder:"请选择班牌","allow-clear":"","tree-data":U.signOptions,fieldNames:d},{title:f((e=>[g(Y,{class:"icon-yellow"}),v(" "+_(e.showName),1)])),_:1},8,["value","tree-data"])])),_:1}),g(x,{name:"time",label:"启止时间:"},{default:f((()=>[g(he,{value:U.banForm.time,"onUpdate:value":a[7]||(a[7]=e=>U.banForm.time=e),"show-time":"",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible"])])])}}},[["__scopeId","data-v-006a08f0"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/managementModule/index.vue"]]);export{ae as default};
