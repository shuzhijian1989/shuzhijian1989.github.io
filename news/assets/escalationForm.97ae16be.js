import"./vue.a2f518ee.js";import{a as e,m as a}from"./ant-design-vue.db4d48e3.js";import{u as o,a as l}from"./vue-router.907b547c.js";import{_ as s,u as t}from"./index.7061e8ea.js";import{f as i,h as r}from"./questionnaire.6c946fd1.js";import{e as d,q as u,r as c,f as n,b8 as p,o as m,a2 as h,a3 as f,c as b,b as y,a7 as v,O as j,a1 as _,u as g}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const C=y("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1);var w=s(d({__name:"escalationForm",setup(s){const d=t(),{school_nature:w,school_type:q,school_area:x,school_quality:B}=d.state.selectSource.dictionary,A=(e,a)=>(a=F[e.field])?a&&!/^[0-9]*$/.test(a)?Promise.reject(new Error("包含不是数字的字符!")):Promise.resolve():Promise.reject(new Error("请输入!")),N=o(),Q=l(),T=e.useForm,U=u({escalationLoading:!1,disabledBool:!1,schoolNature:w||[],schoolType:q||[],schoolArea:x||[],schoolQuality:B||[]});c([]);const k=u({schoolCode:[{required:!0,message:"请输入!"}],schoolNature:[{required:!0,message:"请选择!"}],schoolType:[{required:!0,message:"请选择!"}],studentCount:[{validator:A,required:!0}],teacherCount:[{validator:A,required:!0}],schoolArea:[{required:!0,message:"请选择!"}],schoolQuality:[{required:!0,message:"请选择!"}]}),F=u({id:"",schoolCode:"",schoolNature:null,schoolType:null,studentCount:null,teacherCount:null,schoolArea:null,schoolQuality:null}),{validateInfos:L,resetFields:M,validate:P}=T(F,k),z=()=>{P().then((e=>{U.escalationLoading=!0,i(F).then((e=>{a.success(e.message),E()})).finally((()=>{U.escalationLoading=!0}))}))},E=()=>{N.back(-1),M()};return n((()=>{const{status:e,disabled:a}=Q.query;U.disabledBool=a||!1,e&&r().then((e=>{const{data:a}=e;for(const o in a)F[o]=a[o]}))})),(e,a)=>{const o=p("a-layout-header"),l=p("a-input"),s=p("a-form-item"),t=p("a-col"),i=p("a-select"),r=p("a-row"),d=p("a-form"),u=p("a-layout-content"),c=p("a-button"),n=p("a-layout-footer"),w=p("a-layout");return m(),h(w,{class:"yd-layout"},{default:f((()=>[b(o,{class:"yd-layout-header"},{default:f((()=>[y("span",{onClick:E},[v(' <arrow-left-outlined class="left-outlined" /> '),C,j("学校信息上报 ")])])),_:1}),b(u,{class:"yd-layout-content yd-layout-content-pdbtm"},{default:f((()=>[b(d,{layout:"vertical",ref:"escalationFormRef"},{default:f((()=>[b(r,{gutter:24},{default:f((()=>[b(t,{span:8},{default:f((()=>[b(s,_({label:"学校代码：",name:"schoolCode"},g(L).schoolCode),{default:f((()=>[b(l,{disabled:U.disabledBool,value:F.schoolCode,"onUpdate:value":a[0]||(a[0]=e=>F.schoolCode=e),valueModifiers:{trim:!0},maxlength:10,placeholder:"请输入","allow-clear":""},null,8,["disabled","value"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"学校性质：",name:"schoolNature"},g(L).schoolNature),{default:f((()=>[b(i,{disabled:U.disabledBool,value:F.schoolNature,"onUpdate:value":a[1]||(a[1]=e=>F.schoolNature=e),"allow-clear":"",options:U.schoolNature,placeholder:"请选择"},null,8,["disabled","value","options"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"学校类型：",name:"schoolType"},g(L).schoolType),{default:f((()=>[b(i,{disabled:U.disabledBool,value:F.schoolType,"onUpdate:value":a[2]||(a[2]=e=>F.schoolType=e),"allow-clear":"",options:U.schoolType,placeholder:"请选择"},null,8,["disabled","value","options"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"学生人数：",name:"studentCount"},g(L).studentCount),{default:f((()=>[b(l,{disabled:U.disabledBool,value:F.studentCount,"onUpdate:value":a[3]||(a[3]=e=>F.studentCount=e),valueModifiers:{trim:!0},maxlength:20,placeholder:"请输入","allow-clear":""},null,8,["disabled","value"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"教师人数：",name:"teacherCount"},g(L).teacherCount),{default:f((()=>[b(l,{disabled:U.disabledBool,value:F.teacherCount,"onUpdate:value":a[4]||(a[4]=e=>F.teacherCount=e),valueModifiers:{trim:!0},maxlength:20,placeholder:"请输入","allow-clear":""},null,8,["disabled","value"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"学校区域：",name:"schoolArea"},g(L).schoolArea),{default:f((()=>[b(i,{disabled:U.disabledBool,value:F.schoolArea,"onUpdate:value":a[5]||(a[5]=e=>F.schoolArea=e),"allow-clear":"",options:U.schoolArea,placeholder:"请选择"},null,8,["disabled","value","options"])])),_:1},16)])),_:1}),b(t,{span:8},{default:f((()=>[b(s,_({label:"学校质量：",name:"schoolQuality"},g(L).schoolQuality),{default:f((()=>[b(i,{disabled:U.disabledBool,value:F.schoolQuality,"onUpdate:value":a[6]||(a[6]=e=>F.schoolQuality=e),"allow-clear":"",options:U.schoolQuality,placeholder:"请选择"},null,8,["disabled","value","options"])])),_:1},16)])),_:1})])),_:1})])),_:1},512)])),_:1}),g(Q).query.disabled?v("v-if",!0):(m(),h(n,{key:0,class:"yd-layout-footer"},{default:f((()=>[b(c,{type:"primary",style:{"margin-left":"12px"},loading:U.escalationLoading,onClick:z},{default:f((()=>[j("上报")])),_:1},8,["loading"])])),_:1}))])),_:1})}}}),[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/questionnaire/escalationForm.vue"]]);export{w as default};
