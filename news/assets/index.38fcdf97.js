import"./vue.a2f518ee.js";import{_ as e}from"./index.272083a4.js";import{_ as t,u as a}from"./index.7061e8ea.js";import{g as s}from"./workers.a8ab8099.js";import{e as i,f as o}from"./historicalUser.5cdfb7d4.js";import{S as l}from"./FacultyFormDetail.eb630cc1.js";import{g as r}from"./FilterDropdown.5a779a00.js";import{C as n}from"./complexLearnPost.25052079.js";import{e as d,q as p,r as c,f as m,b8 as u,I as v,o as f,a as h,a7 as y,H as b,L as g,b as j,c as x,a3 as F,O as S,a2 as _,aK as k,a9 as w,b5 as D,b4 as P}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./ant-design-vue.db4d48e3.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./element-plus.8ba44712.js";import"./@vueuse.66569c4a.js";import"./@element-plus.8b57b6bd.js";import"./schoolRoll.370ea454.js";const N={class:"teacherDiv"},I=(e=>(D("data-v-33deb3ea"),e=e(),P(),e))((()=>j("p",{class:"text"},"教职工历史成员列表",-1))),C={class:"searchHead"},L={key:0,class:"editable-row-operations"},T=["onClick"],K=["onClick"],z={class:"teacher-details"},Y={key:0,class:"history_student_details"};var U=t(d({__name:"index",setup(t){const d=a(),{emp_status_no_id:D,emp_status_no_filters:P}=d.state.selectSource.dictionary,U=p({visibleLearnPost:!1,learnPostParams:{title:"复职",type:"foundationPost"},studentDetailPrarms:{},pagination:{pageNo:1,pageSize:10,total:0},inOfficeStatus:[],dictionarys:{},dataSource:[],totals:0,status:"",deptName:"",searchForm:{status:"",name:"",deptName:"",leaveBeginDate:"",leaveFinishDate:"",department:""},treeData:[],isFacultyForm:!0}),M=c(!1),$=c({status:"",deptName:"",name:"",department:"",departureTime:[]}),O=c([{title:"姓名",dataIndex:"name",key:"id",width:150,ellipsis:!0,showSorterTooltip:!0},{title:"所属部门",dataIndex:"deptName",key:"deptName",ellipsis:!0,showSorterTooltip:!0,filters:[{text:"全部",value:""}],pathColor:!1,filterMultiple:!1,filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",r(e)),customFilterDropdown:!0,customFilterIcon:"caret-right-outlined"},{title:"手机号码",dataIndex:"phone",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"来校时间",dataIndex:"joinDate",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"当前状态",dataIndex:"status",key:"status",ellipsis:!0,showSorterTooltip:!0,filters:[{text:"全部",value:""},...P],pathColor:!1,filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",r(e)),customFilterDropdown:!0,customFilterIcon:"caret-right-outlined"},{title:"离校时间",dataIndex:"leaveFinishDate",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"离校原因",dataIndex:"leaveCause",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"操作",dataIndex:"operation",key:"id",align:"left",width:"110px"}]),R=c(),q=e=>{if(null==e)return;const{status:t,current:a,pageSize:s,deptName:i}=e;(null==i?void 0:i.length)&&(U.searchForm.deptName=i[0],$.value.deptName=i[0],U.deptName=i[0]),(null==t?void 0:t.length)&&(U.searchForm.status=`${t[0]}`,$.value.status=`${t[0]}`,U.status=`${t[0]}`),U.pagination.pageNo=a,U.pagination.pageSize=s,J()},B=()=>{const{status:e,name:t,departureTime:a,deptName:s}=$.value,[i,o]=a||[];U.searchForm={...U.searchForm,deptName:s,status:e,name:t,leaveBeginDate:i,leaveFinishDate:o},U.pagination.pageNo=1,U.pagination.pageSize=10,J()},H=()=>{R.value.resetFields(),$.value.status="",$.value.deptName="",U.searchForm=$.value,J()},E=async e=>{U.isFacultyForm=!1,(async e=>{await s({id:e}).then((e=>{const{data:t}=e;t.isCheck=!0,U.studentDetailPrarms=t}))})(e.id)},A=()=>{U.isFacultyForm=!0},G=()=>{d.dispatch("base/getDepartmentTree")},J=()=>{const e={...U.pagination,...U.searchForm,statusList:D};M.value=!0,i(e).then((({data:e})=>{const{total:t,pageSize:a,pageNo:s,list:i}=e;M.value=!1,U.pagination.pageNo=s,U.pagination.pageSize=a,U.pagination.total=t,U.dataSource=i.map((e=>(e.status&&(e.status=`${d.state.selectSource.dictionary[`emp_status_no${e.status}`]}`),e)))})).catch((()=>{M.value=!1}))},Q=async()=>{G(),J()};return m((async()=>{await void o().then((({data:e})=>{var t;let a=null==e?void 0:e.map((e=>({text:e,value:e})));null==(t=O.value)||t.forEach((e=>{"deptName"===e.dataIndex&&(a=[{text:"全部",value:""},...a],e.filters=a)}))})),J(),G()})),(t,a)=>{const s=u("a-input"),i=u("a-form-item"),o=u("a-range-picker"),r=u("SearchOutlined"),d=u("a-button"),p=u("reload-outlined"),c=u("a-form"),m=u("a-tooltip"),D=v("auth");return f(),h("div",N,[y(" 老师表格页面 "),b(j("div",null,[x(e,{class:"worker-table",columns:O.value,dataSource:U.dataSource,totals:U.pagination,rowSelection:!1,spinLoad:M.value,onOnSelectedRowKeys:q},{handleItem:F((()=>[I,j("div",C,[x(c,{model:$.value,layout:"inline",ref_key:"formRef",ref:R},{default:F((()=>[x(i,{label:"姓名",name:"name"},{default:F((()=>[x(s,{value:$.value.name,"onUpdate:value":a[0]||(a[0]=e=>$.value.name=e),placeholder:"请输入教职工姓名搜索",style:{width:"300px"}},null,8,["value"])])),_:1}),x(i,{label:"离校时间：",name:"departureTime"},{default:F((()=>[x(o,{value:$.value.departureTime,"onUpdate:value":a[1]||(a[1]=e=>$.value.departureTime=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",separator:"至"},null,8,["value"])])),_:1}),x(i,null,{default:F((()=>[x(d,{type:"primary",style:{margin:"0 20px"},onClick:B},{icon:F((()=>[x(r,{style:{"margin-right":"15px"}})])),default:F((()=>[S(" 查询 ")])),_:1}),x(d,{onClick:H},{icon:F((()=>[x(p,{style:{"margin-right":"15px"}})])),default:F((()=>[S(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),bodyCell:F((({column:e,text:t,record:a})=>["operation"===e.dataIndex?b((f(),h("div",L,[j("a",{onClick:e=>E(a)},"查看",8,T),S("   "),j("a",{onClick:e=>{return t=a,U.visibleLearnPost=!0,void(U.learnPostParams={...t,title:"复职",type:"foundationPost"});var t}},"复职",8,K)])),[[D,"look"]]):(f(),_(m,{key:1,placement:"topLeft"},k({default:F((()=>[S(" "+w(t),1)])),_:2},[(null==t?void 0:t.length)>15?{name:"title",fn:F((()=>[S(w(t),1)])),key:"0"}:void 0]),1024))])),_:1},8,["columns","dataSource","totals","spinLoad"])],512),[[g,U.isFacultyForm]]),y(" 老师详情页面 "),b(j("div",z,[j("div",{class:"details_title"},[j("p",null,[j("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:A}),S(" 查看成员 ")])]),U.isFacultyForm?y("v-if",!0):(f(),h("div",Y,[y(' <SetStudent :facultyFormRef="state.studentDetailPrarms" /> '),x(l,{studentDetailPrarms:U.studentDetailPrarms},null,8,["studentDetailPrarms"])]))],512),[[g,!U.isFacultyForm]]),x(n,{visibleLearnPost:U.visibleLearnPost,"onUpdate:visibleLearnPost":a[2]||(a[2]=e=>U.visibleLearnPost=e),learnPostParams:U.learnPostParams,onUpdateInit:Q},null,8,["visibleLearnPost","learnPostParams"])])}}}),[["__scopeId","data-v-33deb3ea"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/framework/historicalUser/components/teacher/index.vue"]]);export{U as default};
