import{W as e,_ as a,X as t}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{u as l,a as s}from"./vue-router.907b547c.js";import{e as n,r,y as d,n as o,R as i,b8 as p,o as c,a as m,a7 as y,a2 as u,a3 as f,W as g,b as D,a4 as h,c as v}from"./@vue.919ff404.js";var E=a(n({props:{isShowEmpty:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!0},treeData:{type:Array,default:()=>[]},fieldNames:{type:Object,default:()=>({children:"list",title:"name",key:"id"})},isDraggable:{type:Boolean,default:!1},treeIcon:{type:String,default:"icon-a-Fill21"},defaultExpand:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},emptyTitle:{type:String,default:"暂无数据"}},components:{},setup(a,{emit:t}){const n=l(),p=s(),c=r([]),m=r(!1),y=r({}),u=d((()=>a.selectedKeys));r(a.treeIcon);o((()=>{if(a.defaultExpand.length)c.value=a.defaultExpand;else{const t=a.selectedKeys[0]||a.treeData[0]&&a.treeData[0][a.fieldNames.key],{parentNodeIds:l}=e(i(a.treeData),t)||{};c.value=l?[...l,...u.value]:[...u.value]}}));const f=d((()=>e=>{const t=e[a.fieldNames.title],l=e.name,s=e[a.fieldNames.key];return y.value[s]=l,t}));return{expandedKeys:c,selectedKeyss:u,draggable:m,titleObj:y,select:(e,a)=>{if(!m.value&&e.length){t("emitSelect",e[0],a.node);const{ancestors:l,type:s,showName:r,name:d,rollValue:o}=a.node;n.push({path:p.path,query:{...p.query,deptId:e[0],title:r||d,type:s,ancestors:l,rollValue:o}})}},onDrop:e=>{a.isDraggable&&(m.value=!1,t("emitDraggable",e))},onDragEnter:e=>{a.isDraggable&&(m.value=!0)},aliasEndName:f}}}),[["render",function(e,a,l,s,n,r){const d=t,o=p("a-tree"),i=p("a-empty");return c(),m("div",null,[y(' v-model:expandedKeys="expandedKeys" '),e.treeData.length?(c(),u(o,{key:0,selectedKeys:e.selectedKeyss,"onUpdate:selectedKeys":a[0]||(a[0]=a=>e.selectedKeyss=a),"tree-data":e.treeData,showIcon:"",checkStrictly:"",blockNode:"",draggable:e.isDraggable,fieldNames:e.fieldNames,selectable:!0,defaultExpandAll:e.defaultExpandAll,onDragenter:e.onDragEnter,onDrop:e.onDrop,onSelect:e.select},{title:f((({dataRef:a})=>[g(e.$slots,"treeIcon",{treeItem:{id:a.id,name:a.name}},(()=>[D("i",{class:h(["iconfont icon-yellow",e.treeIcon])},null,2)])),y(' <a-tooltip>\r\n                    <template\r\n                        #title\r\n                        v-if="aliasEndName(dataRef)?.length > 12"\r\n                        >{{ aliasEndName(dataRef) }}</template\r\n                    >\r\n                    {{ aliasEndName(dataRef) }}\r\n                </a-tooltip> '),v(d,{title:e.aliasEndName(a)},null,8,["title"]),g(e.$slots,"handleItem",{key:a.id,handleItem:a})])),_:3},8,["selectedKeys","tree-data","draggable","fieldNames","defaultExpandAll","onDragenter","onDrop","onSelect"])):y("v-if",!0),!e.treeData.length&&e.isShowEmpty?(c(),u(i,{key:1,image:"image/empty.png",description:e.emptyTitle,"image-style":{width:"100%",height:"180px",marginTop:"50%"}},null,8,["description"])):y("v-if",!0),g(e.$slots,"handleFooter")])}],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/components/DempTree/index.vue"]]);export{E as D};
