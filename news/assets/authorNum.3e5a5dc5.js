import"./vue.a2f518ee.js";import{a as e,u as t}from"./vue-router.907b547c.js";import{u as i,_ as s}from"./index.7061e8ea.js";import{e as c,q as a,r as d,y as l,w as n,t as o,b8 as r,o as h,a as u,F as f,a8 as y,a4 as k,a5 as p,c as L,a3 as C,b as v,a9 as g,a7 as m,a1 as A}from"./@vue.919ff404.js";const j=c({name:"AuthorNum",props:{jurisdictionList:{type:Array,default:()=>[]},olData:{type:Array,default:()=>[]},authority:{type:Boolean,default:!1},types:{type:Boolean,default:!1},isAllChecked:{type:Boolean,default:!1},checkedLists:{type:Object,default:()=>{}},olCheckedList:{type:Array,default:()=>[]},isAuthority:{type:Boolean,default:!1}},setup(s,{emit:c}){const r=e(),h=t(),u=i(),f=a({isChecked:!1,fatherSonCollection:{},menuIds:[],indeterminate:!0,checkedList:[],fatherData:{id:""}}),y=d(u.state.functionalAuthorityModule.fatherSonCollection),k=(e,t,i)=>{e.forEach((e=>{var i;e.id===t?null==(i=e.children)||i.forEach((e=>{s.checkedLists[e.id].length&&(f.isChecked=!0)})):e.children.length&&k(e.children,t)}))},p=(e,t)=>{const i=[t];return function e(t,i,s,c){if(Array.isArray(i))for(const a of i){if(!Array.isArray(a.children))continue;a.children.findIndex((e=>e.id===c))>=0?(t.unshift(a.id),s.findIndex((e=>e.id===a.id))<0&&e(t,s,s,a.id)):e(t,a.children,s,c)}}(i,e,e,t),i},L=(e,t,i,s)=>{var c;for(const a in e){if(t[e[a].id]=i?[e[a].id]:[],s&&e[a].id===s)return;(null==(c=e[a].children)?void 0:c.length)&&L(e[a].children,t,i)}},C=l((()=>e=>{let t=!1;for(const i in e)if(e[i].children)for(const s in e[i].children)t=!!e[i].children[s];else t=!1;return t}));return n((()=>r.query.type),((e,t)=>{if(s.types&&s.authority&&e!==t){s.authority=!1;for(const e in s.checkedLists)s.checkedLists[e]=[]}})),n((()=>s.authority),((e,t)=>{if(e){c("heanderAllChecked",!1);let e=0;for(const t in s.checkedLists){e++;s.olCheckedList.includes(t)&&(s.checkedLists[t]=[t])}s.olCheckedList.length===e&&c("heanderAllChecked",!0)}})),{route:r,router:h,childStyle:C,...o(f),recursiveQuery:L,itemCheckAllChange:(e,t)=>{var i;const a=JSON.parse(JSON.stringify(s.olData));if(f.fatherData={id:""},e.length){L([t],s.checkedLists,!0);const i=p(a,e[0]);i.forEach((e=>{var t;(null==(t=s.checkedLists[e])?void 0:t.length)||(s.checkedLists[e]=[e])}));for(const e in s.checkedLists)i[e]&&(s.checkedLists[i[e]]=[i[e]])}else if(L([t],s.checkedLists),y.value&&(null==(i=y.value[t.pid])?void 0:i.length)&&"C"===t.type){const e=u.state.functionalAuthorityModule.fatherSonCollection;if(e[t.pid].length){let i=!1;e[t.pid].forEach((e=>{s.checkedLists[e.id].length&&(i=!0)})),!i&&(s.checkedLists[t.pid]=[])}}let d=!0;for(const c in s.checkedLists)s.checkedLists[c].length||(d=!1);c("heanderAllChecked",d)},itemCheckAllChanges:(e,t)=>{const i=JSON.parse(JSON.stringify(s.olData));if(e.length){L([t],s.checkedLists,!0);p(i,e[0]).forEach((e=>{s.checkedLists[e]=[e]}))}else{L([t],s.checkedLists);const e=p(i,t.id);if("C"===t.type){const c=[];e.forEach((e=>{e!==t.id&&c.push(e)})),f.isChecked=!1,k(i,t.pid),!f.isChecked&&c.forEach((e=>{s.checkedLists[e]=[]}))}}let a=!0;for(const c in s.checkedLists)s.checkedLists[c].length||(a=!1);c("heanderAllChecked",a)},getCascaderFullValue:p}}}),S={class:"content-color"};var D=s(j,[["render",function(e,t,i,s,c,a){const d=r("a-checkbox"),l=r("a-checkbox-group"),n=r("AuthorNum",!0);return h(),u("div",{class:k({defaultStyle:e.types,authority:e.authority,deStyle:!e.types,resetChildStyle:e.childStyle(e.jurisdictionList),jurisdiction:e.jurisdictionList.length})},[(h(!0),u(f,null,y(e.jurisdictionList,(t=>(h(),u("div",{class:k(["jurisdiction-item",{"jurisdiction-itemNo":!t.children.length&&!e.types}]),key:t.id},[t.isVisible?(h(),u("div",{key:0,class:"content",style:p({background:e.types?"":"#fff"})},[L(l,{value:e.checkedLists[t.id],"onUpdate:value":i=>e.checkedLists[t.id]=i,onChange:i=>e.itemCheckAllChanges(i,t)},{default:C((()=>[L(d,{value:t.id},{default:C((()=>[v("span",S,g(t.name),1)])),_:2},1032,["value"])])),_:2},1032,["value","onUpdate:value","onChange"])],4)):m("v-if",!0),t.children.length?(h(),u("div",{key:1,class:k(["jurisdiction-item1",{"jurisdiction-item1-flex":t.children.length}])},[L(n,A(e.$attrs,{checkedLists:e.checkedLists,jurisdictionList:t.children,olCheckedList:e.olCheckedList,olData:e.olData,authority:e.authority,types:!1}),null,16,["checkedLists","jurisdictionList","olCheckedList","olData","authority"])],2)):m("v-if",!0)],2)))),128))],2)}],["__scopeId","data-v-51860e51"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/framework/role/components/FunctionalAuthority/authorNum.vue"]]);export{D as A};
