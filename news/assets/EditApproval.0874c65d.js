import{_ as e,n as a,p as o}from"./index.7061e8ea.js";import"./vue.a2f518ee.js";import{u as n,a as r}from"./vue-router.907b547c.js";import{C as i}from"./index.2069fba3.js";import{i as t,j as s,k as l,l as c,p,m as d}from"./enumList.0f420b32.js";import{m as u,M as v}from"./ant-design-vue.db4d48e3.js";import{u as m}from"./vuex.f308ecec.js";import{e as h,r as f,q as y,f as b,b8 as g,o as k,a2 as _,a3 as S,c as w,b as T,a7 as x,O as C,u as j,a as I,F as G,a8 as P,a9 as N,aK as U,M as L,H as D,L as O,h as E,b5 as q,b4 as J,m as A}from"./@vue.919ff404.js";import{E as B}from"./@ant-design.2e172c39.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./@babel.6d5f88cb.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./dayjs.49e29cb2.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";import"./cropperjs.fe6d04b8.js";const V=e=>(q("data-v-6b48524d"),e=e(),J(),e),$=V((()=>T("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1))),M=V((()=>T("h3",{class:"caption"},"基础信息",-1))),K={class:"upload-box"},H=V((()=>T("div",{class:"info"},[T("p",null," 建议上传有底色图标，支持格式：png、jpg、jpeg、svg "),T("p",null,"图标尺寸：48x48px；大小不超过5M")],-1))),R=V((()=>T("p",{class:"help"},"上传图标",-1))),W=V((()=>T("h3",{class:"caption"},"流程设计",-1))),z={class:"numeric-input-title"},F=["onClick"],Q=[V((()=>T("img",{src:"/image/del.png",alt:""},null,-1)))],X=V((()=>T("h3",{class:"caption"},"其他设置",-1))),Y=V((()=>T("p",{class:"p1"},"允许抄送给任课老师",-1))),Z=V((()=>T("p",{class:"p2"}," 当请假人员为学生时，允许抄送给所请课次的 ",-1))),ee=V((()=>T("p",{class:"p1"},"允许撤销审批中的申请",-1))),ae=V((()=>T("p",{class:"p2"}," 第一个审批节点通过后，申请人仍可撤销申请 ",-1))),oe={class:"flex mb10"},ne=["onClick"],re={class:"flex"},ie=V((()=>T("span",null,"请假时长：",-1))),te={key:1,class:"flex"},se=V((()=>T("span",null,"请假时长",-1))),le={class:"flex mb10"},ce=["onClick"],pe=[V((()=>T("img",{src:"/image/del.png",alt:""},null,-1)))],de={class:"personBox"},ue=["onClick"],ve=["onClick"],me={class:"personBox"},he=["onClick"],fe={class:"footer"};var ye=e(h({__name:"EditApproval",setup(e){const h=n(),q=r(),J=m(),{proxy:V}=A(),ye=f(),be=f(),ge=f([]),ke=(e,a)=>a<0?Promise.reject(new Error("请输入正数")):/^\d+(.\d{1,2})?$/.test(a)?a?Promise.resolve():Promise.reject(new Error("不能为空")):Promise.reject(new Error("只能输入两位小数")),_e=e=>{const a={};return e.forEach((e=>{a[e.value]=e.label})),a},Se=y({approversType:J.state.base.commentJsonKeys.INIT_ACT_LEAVE.actAppr,approversObj:_e(J.state.base.commentJsonKeys.INIT_ACT_LEAVE.actAppr),ccTypeEnum:J.state.base.commentJsonKeys.INIT_ACT_LEAVE.actCc,ccTypeObj:_e(J.state.base.commentJsonKeys.INIT_ACT_LEAVE.actCc)}),we=y({outIndex:0,withinIndex:0,ySelectShow:!1,btnLoading:!1,tabs:[{tab:"教职工",key:1,checked:!0}],personList:[],visible:!1,approvers:[],ccPerson:{type:"",person:[]},isBack:"",checked:[],conditionSet:{icon:"",name:"",procGrouId:"",sponsorType:100,isShow:!0,isCcTeacher:!0,isTransfer:!1,isWithdraw:!1,id:"",branchs:[{isShow:0,condition:{name:null,priority:null,sponsorType:null,conditionGroup:[]},ccType:"",ccIds:[],ccPerson:[],isBack:!1,approvers:[{name:"校长",userType:1,approverIds:[],person:[]}]}]},drawerType:"",drawerTitle:{condition:"条件设置",approvalPerson:"审批设置",ccPerson:"抄送设置"},procGrouList:[],yearData:{conditionGroup:[]},spinLoad:!1}),Te={icon:[{required:!0,message:"请上传图标",trigger:"blur"}],name:[{required:!0,message:"请输入名称"}],procGrouId:[{required:!0,message:"请选择分组"}]},xe={name:[{required:!0,message:"请输入名称"}],priority:[{required:!0,message:"请选择分组"}],sponsorType:[{required:!0,message:"请选择人员类型"}]},Ce=({base64:e,file:o})=>{we.conditionSet.icon=e;const n=new FormData;n.append("file",o),V.$defHttp.post(a.fileUpload,n).then((e=>{const{data:a}=e;a.map((e=>(we.conditionSet.icon=e.url,e)))}))},je=e=>{if("conditions"===e)we.yearData.conditionGroup.length<3?we.yearData.conditionGroup.push({}):u.warn("不可再增加条件组");else if("approvers"===e){if(we.approvers.length>=6)return void u.warn("不可再增加审批组");we.approvers.push({name:"校长",userType:1,approverIds:[],person:[]})}else we.conditionSet.branchs&&1===we.conditionSet.branchs.length&&1!==we.conditionSet.branchs[0].isShow?(we.conditionSet.branchs[0].isShow=1,we.conditionSet.branchs[0].condition={name:"",priority:null,conditionGroup:[]}):we.conditionSet.branchs.push({isShow:1,condition:{name:"",priority:null,conditionGroup:[]},ccType:"",ccIds:[],ccPerson:[],approvers:[{name:"校长",userType:1,approverIds:[],person:[]}]})},Ie=e=>{ge.value=Se.approversType.map((a=>(e.indexOf(a.value)>-1?a.disabled=!0:a.disabled=!1,a)))},Ge=(e,a=1)=>{"string"!=typeof e?(we.checked=JSON.parse(JSON.stringify(e.person)),we.personList=e.person):we.checked=JSON.parse(JSON.stringify(we.ccPerson.person)),we.withinIndex=a,we.ySelectShow=!0},Pe=(e,a,o)=>{var n,r;we.outIndex=o,we.drawerType=a,we.visible=!0,"approvalPerson"===a?(we.isBack=e.isBack,(e=>{var a;switch(null==(a=e.condition)?void 0:a.sponsorType){case 0:Ie([2]);break;case 1:Ie([6]);break;case 2:Ie([2,6]);break;default:Ie([])}})(e),we.approvers=JSON.parse(JSON.stringify(e.approvers))):"condition"===a?(0===(null==(r=null==(n=e.condition)?void 0:n.conditionGroup)?void 0:r.length)&&e.condition.conditionGroup.push({}),we.yearData=JSON.parse(JSON.stringify(e.condition))):(we.ccPerson.person=JSON.parse(JSON.stringify(e.ccPerson)),we.ccPerson.type=JSON.parse(JSON.stringify(e.ccType)))},Ne=(e,a)=>{"conditions"===e?we.yearData.conditionGroup.splice(a,1):"condition"===e?1===we.conditionSet.branchs.length?(we.conditionSet.branchs[0].isShow=0,we.conditionSet.branchs[0].condition={conditionGroup:[]},we.conditionSet.branchs[0].showConditionName=""):we.conditionSet.branchs.splice(a,1):"approval"===e?we.approvers.splice(a,1):"ccPerson"===e?we.ccPerson.person.splice(a,1):e.person.splice(a,1)},Ue=(e,a)=>{v.confirm({title:"删除提示",icon:w(B),content:E("div",{},[E("p","确定删除吗？")]),okText:"确认",cancelText:"取消",onCancel(){u.info("已取消！")},onOk(){Ne(e,a)}})},Le=e=>{"approvalPerson"===we.drawerType?we.approvers[we.withinIndex].person=e.map((e=>({name:e.name,id:e.id}))):we.ccPerson.person=e.map((e=>({name:e.name,id:e.id})))},De=()=>{h.back(-1)},Oe=()=>{var e;we.conditionSet.branchs.length<2&&1==we.conditionSet.branchs.length&&(null==(e=we.conditionSet.branchs[0].condition)?void 0:e.name)?u.error("请最少添加两个条件"):(1==we.conditionSet.branchs.length&&(we.conditionSet.branchs[0].condition=null),ye.value.validate().then((()=>{we.btnLoading=!0,d(we.conditionSet).then((e=>{u.success("更新成功"),h.push({path:"/appModel/approve"})})).catch((e=>{})).finally((()=>{we.btnLoading=!1}))})).catch((e=>{})))},Ee=(e,a="")=>e.map((e=>e.id)),qe=()=>{let e="";if("approvalPerson"===we.drawerType){for(let e=0;e<we.approvers.length;e++){if(99===we.approvers[e].userType&&0===we.approvers[e].person.length)return void u.error("请添加指定成员");if(99===we.approvers[e].userType&&we.approvers[e].person.length>20)return void u.error("指定人员不能超过20个")}for(let a=0;a<we.approvers.length;a++)e+=we.approvers[a].name+" ";we.conditionSet.branchs[we.outIndex].showName=e;for(let e=0;e<we.approvers.length;e++)99===we.approvers[e].userType?we.approvers[e].approverIds=Ee(we.approvers[e].person):we.approvers[e].approverIds=[];we.conditionSet.branchs[we.outIndex].isBack=we.isBack,we.conditionSet.branchs[we.outIndex].approvers=we.approvers,we.visible=!1}else if("condition"===we.drawerType)be.value.validate().then((()=>{for(let e=0;e<we.yearData.conditionGroup.length;e++){we.yearData.conditionGroup[e].name="条件"+(e+1);const a=we.yearData.conditionGroup[e];if(6===a.conditionType){const{c:e,d:o,e:n,f:r}=a;if(Number(e)>Number(r))return void u.error(`请假时长不能大于${e}小于${r}`);a.expression=[e,o,n,r].join(",")}else{const{b:e}=a;a.expression=e}}we.conditionSet.branchs[we.outIndex].showConditionName=we.yearData.name,we.conditionSet.branchs[we.outIndex].condition=we.yearData,we.visible=!1})).catch((e=>{}));else{const{type:a,person:o}=we.ccPerson;if(99===we.ccPerson.type&&0===we.ccPerson.person.length)return void u.error("请添加指定成员");if(99===we.ccPerson.type&&we.ccPerson.person.length>20)return void u.error("指定成员不能超过20个");if(99===we.ccPerson.type){for(let a=0;a<we.ccPerson.person.length;a++)e+=we.ccPerson.person[a].name+" ";we.conditionSet.branchs[we.outIndex].ccIds=Ee(o),we.conditionSet.branchs[we.outIndex].ccPerson=o}else we.conditionSet.branchs[we.outIndex].ccIds=[],we.conditionSet.branchs[we.outIndex].ccPerson=[];we.conditionSet.branchs[we.outIndex].ccShowCon=Se.ccTypeObj[a],we.conditionSet.branchs[we.outIndex].ccType=a,we.visible=!1}};return b((()=>{p().then((e=>{we.procGrouList=e.data})),q.query.id&&(()=>{const e={id:q.query.id};we.spinLoad=!0,c(e).then((e=>{if(0===e.data.branchs[0].approver.length)e.data.branchs=[{isShow:0,condition:{name:null,priority:null,sponsorType:null,conditionGroup:[]},ccType:"",ccIds:[],ccPerson:[],isBack:!1,approvers:[{name:"校长",userType:1,approverIds:[],person:[]}]}];else for(let a=0;a<e.data.branchs.length;a++){const o=e.data.branchs[a];if(o.showName="",o.condition){o.showConditionName=o.condition.name,o.isShow=1;for(let e=0;e<o.condition.conditionGroup.length;e++){if(6===o.condition.conditionGroup[e].conditionType){const{minVal:a,minCond:n,maxCond:r,maxVal:i}=o.condition.conditionGroup[e];o.condition.conditionGroup[e].c=a,o.condition.conditionGroup[e].d=n,o.condition.conditionGroup[e].e=r,o.condition.conditionGroup[e].f=i;const{c:t,d:s,e:l,f:c}=o.condition.conditionGroup[e];o.condition.conditionGroup[e].expression=[t,s,l,c].join(",")}else o.condition.conditionGroup[e].b=o.condition.conditionGroup[e].minVal,o.condition.conditionGroup[e].expression=o.condition.conditionGroup[e].minVal;delete o.condition.id,delete o.condition.conditionGroup[e].id}}o.approver=o.approver.map((e=>({userType:e.userType,name:e.name,branapprList:e.branapprList})));for(let e=0;e<o.approver.length;e++)99===o.approver[e].userType?(o.approver[e].approverIds=o.approver[e].branapprList.map((e=>e.approverId)),o.approver[e].person=o.approver[e].branapprList.map((e=>({id:e.approverId,name:e.name}))),o.approver[e].name=Se.approversObj[o.approver[e].userType]):(o.approver[e].approverIds=[],o.approver[e].person=[],o.approver[e].name=Se.approversObj[o.approver[e].userType]),delete o.approver[e].branapprList,o.showName+=o.approver[e].name+" ";o.approvers=o.approver,99===o.ccType?(o.ccIds=o.ccList.map((e=>e.ccId)),o.ccPerson=o.ccList.map((e=>({name:e.name,id:e.ccId})))):(o.ccIds=[],o.ccPerson=[]),delete o.ccList,o.approvers=o.approver,o.ccShowCon=Se.ccTypeObj[o.ccType]}we.conditionSet=e.data;for(let a=0;a<we.conditionSet.branchs.length;a++)delete we.conditionSet.branchs[a].approver;we.spinLoad=!1})).catch((e=>{})).finally((()=>{we.spinLoad=!1}))})()})),(e,a)=>{const n=g("a-layout-header"),r=g("a-form-item"),c=g("a-col"),p=g("a-row"),d=g("a-input"),u=g("a-select-option"),v=g("a-select"),m=g("down-outlined"),h=g("a-tooltip"),f=g("plus-outlined"),y=g("a-button"),b=g("a-checkbox"),E=g("a-form"),J=g("a-layout-content"),A=g("a-layout-footer"),B=g("a-radio"),V=g("a-radio-group"),_e=g("a-drawer"),Ie=o,Ee=g("a-spin"),Je=g("a-layout");return k(),_(Je,{class:"reset-layout"},{default:S((()=>[w(Ee,{spinning:we.spinLoad},{default:S((()=>[w(n,{class:"reset-layout-header"},{default:S((()=>[T("span",{onClick:De},[x(' <arrow-left-outlined class="left-outlined" /> '),$,C(" 审批编辑 ")])])),_:1}),w(J,{class:"reset-layout-content"},{default:S((()=>[w(E,{class:"ant-advanced-search-form",layout:"vertical",ref_key:"rulesRef",ref:ye,rules:Te,model:we.conditionSet},{default:S((()=>[M,w(p,{gutter:24},{default:S((()=>[w(c,{span:24,class:"posit-reltv"},{default:S((()=>[w(r,{label:"图标",name:"icon"},{default:S((()=>[T("div",K,[x(" :class=\"{ 'crop-picture-mask': isCheck }\" "),w(i,{value:we.conditionSet.icon,"onUpdate:value":a[0]||(a[0]=e=>we.conditionSet.icon=e),onChange:Ce,isNum:5,title:"重新上传图标",minCropBoxWidth:48,minCropBoxHeight:48},null,8,["value"]),H]),R])),_:1})])),_:1})])),_:1}),w(p,{gutter:21},{default:S((()=>[w(c,{span:7},{default:S((()=>[w(r,{label:"名称：",name:"name"},{default:S((()=>[w(d,{value:we.conditionSet.name,"onUpdate:value":a[1]||(a[1]=e=>we.conditionSet.name=e),maxlength:20,disabled:!!j(q).query.id,placeholder:"请输入"},null,8,["value","disabled"])])),_:1})])),_:1}),w(c,{span:7},{default:S((()=>[w(r,{name:"procGrouId",label:"分组"},{default:S((()=>[w(v,{placeholder:"请选择",value:we.conditionSet.procGrouId,"onUpdate:value":a[2]||(a[2]=e=>we.conditionSet.procGrouId=e)},{default:S((()=>[(k(!0),I(G,null,P(we.procGrouList,(e=>(k(),_(u,{key:e.id,value:e.id},{default:S((()=>[C(N(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),w(c,{span:7},{default:S((()=>[w(r,{label:"谁可以发起这个审批"},{default:S((()=>[w(v,{"default-value":"全部人员",disabled:""},{default:S((()=>[w(u,{value:"全部人员"},{default:S((()=>[C(" 全部人员 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),x(' <a-row :gutter="24">\r\n                        <a-col :span="24">\r\n                            <a-switch\r\n                                v-model:checked="state.conditionSet.isShow"\r\n                            ></a-switch\r\n                            ><span>是否将该审批显示在工作台</span>\r\n                        </a-col>\r\n                    </a-row> '),W,(k(!0),I(G,null,P(we.conditionSet.branchs,((e,a)=>(k(),_(p,{gutter:24,key:a},{default:S((()=>[1===e.isShow?(k(),_(c,{key:0,span:7},{default:S((()=>[x(" item.showConditionName ||  "),w(r,{label:`条件${a+1}`,name:["branchs",a,"showConditionName"],rules:{required:!0,message:"请添加条件",trigger:"change"}},{default:S((()=>[w(d,{onClick:o=>Pe(e,"condition",a),maxlength:20,value:e.showConditionName,"onUpdate:value":a=>e.showConditionName=a,placeholder:"请设置"},{suffix:S((()=>[w(h,null,{default:S((()=>[w(m,{style:{color:"#c2c2c2"}})])),_:1})])),_:2},1032,["onClick","value","onUpdate:value"])])),_:2},1032,["label","name"])])),_:2},1024)):x("v-if",!0),w(c,{span:7},{default:S((()=>[w(r,{name:["branchs",a,"showName"],label:"审批人",rules:{required:!0,message:"请选择审批人",trigger:"change"}},{default:S((()=>[w(h,{trigger:["hover"],placement:"topLeft","overlay-class-name":"numeric-input"},U({default:S((()=>[w(d,{onClick:o=>Pe(e,"approvalPerson",a),value:e.showName,"onUpdate:value":a=>e.showName=a,placeholder:"请设置"},{suffix:S((()=>[w(h,null,{default:S((()=>[w(m,{style:{color:"#c2c2c2"}})])),_:1})])),_:2},1032,["onClick","value","onUpdate:value"])])),_:2},[e.showName?{name:"title",fn:S((()=>[T("span",z,N(e.showName),1)])),key:"0"}:void 0]),1024)])),_:2},1032,["name"])])),_:2},1024),w(c,{span:7},{default:S((()=>[w(r,{name:"ccPerson",label:"抄送人"},{default:S((()=>[w(d,{value:e.ccShowCon,"onUpdate:value":a=>e.ccShowCon=a,onClick:o=>Pe(e,"ccPerson",a),placeholder:"请设置"},{suffix:S((()=>[w(m,{style:{color:"#c2c2c2"}})])),_:2},1032,["value","onUpdate:value","onClick"])])),_:2},1024)])),_:2},1024),w(c,{span:3},{default:S((()=>[w(r,{label:" "},{default:S((()=>[1===e.isShow?(k(),I("span",{key:0,onClick:e=>Ue("condition",a)},Q,8,F)):x("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),w(y,{type:"primary",class:"btn",onClick:a[3]||(a[3]=e=>je("condition"))},{icon:S((()=>[w(f)])),default:S((()=>[C(" 添加条件 ")])),_:1}),X,w(p,{gutter:21},{default:S((()=>[w(c,{span:7},{default:S((()=>[w(r,{label:"抄送设置"},{default:S((()=>[w(b,{checked:we.conditionSet.isCcTeacher,"onUpdate:checked":a[4]||(a[4]=e=>we.conditionSet.isCcTeacher=e)},{default:S((()=>[Y,Z])),_:1},8,["checked"])])),_:1})])),_:1}),w(c,{span:7},{default:S((()=>[w(r,{label:"撤销设置"},{default:S((()=>[w(b,{checked:we.conditionSet.isWithdraw,"onUpdate:checked":a[5]||(a[5]=e=>we.conditionSet.isWithdraw=e)},{default:S((()=>[ee,ae])),_:1},8,["checked"])])),_:1})])),_:1}),x(' <a-col :span="7">\r\n                            <a-form-item label="转交设置">\r\n                                <a-checkbox\r\n                                    v-model:checked="\r\n                                        state.conditionSet.isTransfer\r\n                                    "\r\n                                >\r\n                                    <p class="p1">允许转交</p>\r\n                                    <p class="p2">\r\n                                        仅可转交给审批流程上设置的人\r\n                                    </p>\r\n                                </a-checkbox>\r\n                            </a-form-item>\r\n                        </a-col> ')])),_:1})])),_:1},8,["model"])])),_:1}),w(A,{class:"reset-layout-footer"},{default:S((()=>[w(p,{class:"ps-ab-row",gutter:24},{default:S((()=>[w(c,{span:24,style:{"text-align":"left"}},{default:S((()=>[w(y,{type:"primary",loading:we.btnLoading,onClick:L(Oe,["prevent"])},{default:S((()=>[C("提交")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1}),x(" 编辑新增弹框 "),w(_e,{width:"500",visible:we.visible,"onUpdate:visible":a[14]||(a[14]=e=>we.visible=e),class:"addRuleModal",title:we.drawerTitle[we.drawerType],maskClosable:!1},{default:S((()=>["condition"===we.drawerType?(k(),I(G,{key:0},[w(E,{layout:"vertical",ref_key:"conditionRules",ref:be,rules:xe,model:we.yearData},{default:S((()=>[w(r,{label:"条件名称：",name:"name"},{default:S((()=>[w(d,{placeholder:"请输入",value:we.yearData.name,"onUpdate:value":a[6]||(a[6]=e=>we.yearData.name=e),maxlength:"10"},null,8,["value"])])),_:1}),w(r,{label:"优先级：",name:"priority"},{default:S((()=>[w(v,{placeholder:"请选择",value:we.yearData.priority,"onUpdate:value":a[7]||(a[7]=e=>we.yearData.priority=e)},{default:S((()=>[(k(),I(G,null,P(6,(e=>w(u,{key:e,value:e},{default:S((()=>[C(" 优先级"+N(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1}),w(r,{label:"发起人员类型",name:"sponsorType"},{default:S((()=>[w(v,{value:we.yearData.sponsorType,"onUpdate:value":a[8]||(a[8]=e=>we.yearData.sponsorType=e),placeholder:"请选择发起人员类型"},{default:S((()=>[(k(!0),I(G,null,P(j(t),(e=>(k(),_(u,{key:e.value,value:e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(k(!0),I(G,null,P(we.yearData.conditionGroup,((e,a)=>(k(),I("div",{key:a},[T("div",oe,[T("span",null,N(1===we.yearData.length?"条件组：":`条件组${a+1}：`),1),we.yearData.conditionGroup.length>1?(k(),I("span",{key:0,class:"f5",onClick:e=>Ue("conditions",a)},"删除条件组",8,ne)):x("v-if",!0)]),w(r,{label:"",name:["conditionGroup",a,"conditionType"],rules:{required:!0,message:"请选择",trigger:"change"}},{default:S((()=>[T("div",re,[ie,w(v,{value:e.conditionType,"onUpdate:value":a=>e.conditionType=a,placeholder:"请选择",style:{width:"370px"}},{default:S((()=>[(k(!0),I(G,null,P(j(s),(e=>(k(),_(u,{key:e.value,value:e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])])),_:2},1032,["name"]),6!==e.conditionType?(k(),_(r,{key:0,label:"",name:["conditionGroup",a,"b"],rules:{validator:ke,trigger:"change"}},{default:S((()=>[w(d,{value:e.b,"onUpdate:value":a=>e.b=a,type:"number",suffix:"小时",placeholder:"请输入"},null,8,["value","onUpdate:value"])])),_:2},1032,["name","rules"])):(k(),I("div",te,[w(r,{label:"",name:["conditionGroup",a,"c"],rules:{validator:ke,trigger:"change"}},{default:S((()=>[w(d,{value:e.c,"onUpdate:value":a=>e.c=a,type:"number",style:{width:"80px"},placeholder:"请输入",suffix:"h"},null,8,["value","onUpdate:value"])])),_:2},1032,["name","rules"]),w(r,{label:"",name:["conditionGroup",a,"d"],rules:{required:!0,message:"请选择",trigger:"change"}},{default:S((()=>[w(v,{value:e.d,"onUpdate:value":a=>e.d=a,style:{width:"104px"},placeholder:"请选择"},{default:S((()=>[(k(!0),I(G,null,P(j(l),(e=>(k(),_(u,{key:e.value,value:e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["name"]),w(r,null,{default:S((()=>[se])),_:1}),w(r,{label:"",name:["conditionGroup",a,"e"],rules:{required:!0,message:"请选择",trigger:"change"}},{default:S((()=>[w(v,{value:e.e,"onUpdate:value":a=>e.e=a,style:{width:"104px"},placeholder:"请选择"},{default:S((()=>[(k(!0),I(G,null,P(j(l),(e=>(k(),_(u,{key:e.value,value:e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["name"]),w(r,{label:"",name:["conditionGroup",a,"f"],rules:{validator:ke,trigger:"change"}},{default:S((()=>[w(d,{value:e.f,"onUpdate:value":a=>e.f=a,type:"number",min:0,style:{width:"80px"},placeholder:"请输入",suffix:"h"},null,8,["value","onUpdate:value"])])),_:2},1032,["name","rules"])]))])))),128))])),_:1},8,["model"]),w(y,{type:"primary",class:"btn mb32",onClick:a[9]||(a[9]=e=>je("conditions"))},{icon:S((()=>[w(f)])),default:S((()=>[C(" 添加条件组 ")])),_:1})],64)):x("v-if",!0),"approvalPerson"===we.drawerType?(k(),I(G,{key:1},[(k(!0),I(G,null,P(we.approvers,((e,a)=>(k(),I("div",{key:a,style:{"margin-bottom":"20px"}},[T("div",le,[T("span",null,N(we.approvers.length>1?`第${a+1}审批人设置`:"审批人设置"),1),we.approvers.length>1?(k(),I("span",{key:0,onClick:e=>Ue("approval",a)},pe,8,ce)):x("v-if",!0)]),w(V,{value:e.userType,"onUpdate:value":a=>e.userType=a,onChange:e=>((e,a)=>{we.withinIndex=a;const o=Se.approversType.find((a=>a.value===e));we.approvers[we.withinIndex].name=o.label})(e.target.value,a)},{default:S((()=>[(k(!0),I(G,null,P(ge.value,(e=>(k(),_(B,{class:"radioStyle",disabled:e.disabled,key:e.value,value:e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["disabled","value"])))),128))])),_:2},1032,["value","onUpdate:value","onChange"]),D(T("div",de,[T("div",{class:"add",onClick:o=>Ge(e,a)}," + ",8,ue),(k(!0),I(G,null,P(e.person,((a,o)=>(k(),I("span",{key:a.id},[C(N(a.name),1),T("i",{onClick:a=>Ne(e,o)},"x",8,ve)])))),128))],512),[[O,99===e.userType]])])))),128)),w(y,{type:"primary",class:"btn mb32",onClick:a[10]||(a[10]=e=>je("approvers"))},{icon:S((()=>[w(f)])),default:S((()=>[C(" 添加审批人 ")])),_:1}),x(' <p class="mb10">操作权限设置：</p>\r\n                    <a-checkbox v-model:checked="state.isBack" class="mb32"\r\n                        >允许回退</a-checkbox\r\n                    > ')],64)):x("v-if",!0),"ccPerson"===we.drawerType?(k(),I(G,{key:2},[w(V,{value:we.ccPerson.type,"onUpdate:value":a[11]||(a[11]=e=>we.ccPerson.type=e)},{default:S((()=>[(k(!0),I(G,null,P(Se.ccTypeEnum,(e=>(k(),_(B,{class:"radioStyle",key:e.value,value:e.value,disabled:0==we.yearData.sponsorType&&2==e.value},{default:S((()=>[C(N(e.label),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"]),D(T("div",me,[T("div",{class:"add",onClick:a[12]||(a[12]=e=>Ge("ccPerson"))},"+"),(k(!0),I(G,null,P(we.ccPerson.person,((e,a)=>(k(),I("span",{key:e.id},[C(N(e.name),1),T("i",{onClick:e=>Ne("ccPerson",a)},"x",8,he)])))),128))],512),[[O,99===we.ccPerson.type]])],64)):x("v-if",!0),T("div",fe,[w(y,{style:{marginRight:"8px"},onClick:a[13]||(a[13]=e=>we.visible=!1)},{default:S((()=>[C(" 取消 ")])),_:1}),w(y,{type:"primary",onClick:qe},{default:S((()=>[C(" 确认 ")])),_:1})])])),_:1},8,["visible","title"]),w(Ie,{visible:we.ySelectShow,"onUpdate:visible":a[15]||(a[15]=e=>we.ySelectShow=e),multiple:!0,mode:"personnel",tabs:we.tabs,checked:we.checked,onHandleOk:Le},null,8,["visible","tabs","checked"])])),_:1},8,["spinning"])])),_:1})}}}),[["__scopeId","data-v-6b48524d"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/approve/EditApproval.vue"]]);export{ye as default};
