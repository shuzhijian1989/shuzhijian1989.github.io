import"./vue.a2f518ee.js";import{_ as e,u as t,p as a,G as s,H as i,I as o,J as r,K as l,M as n,N as c,O as d,P as m,Q as u,R as p}from"./index.7061e8ea.js";import{x as y,Q as f,q as v,b8 as h,o as g,a2 as w,a3 as _,c as b,u as C,w as k,a7 as T,a as F,F as I,y as S,R as x,O as D,f as L,b as M,a9 as U,b5 as j,b4 as P,a8 as V,a5 as E,e as q,a4 as N,a6 as O}from"./@vue.919ff404.js";import{U as A}from"./Uedit.49163f23.js";import{m as H,M as B}from"./ant-design-vue.db4d48e3.js";import{r as R,h as Y,g as K}from"./format.0daa2d8d.js";import{a as z}from"./vue-router.907b547c.js";import{v as J}from"./toolsValidate.abcc48cc.js";import{d as $}from"./dayjs.49e29cb2.js";import{E as X}from"./@ant-design.2e172c39.js";import{C as Q}from"./index.2069fba3.js";import{u as W}from"./vuex.f308ecec.js";import{g as G}from"./oss.72e23b0d.js";var Z=e({__name:"releaseType",setup(e){var t;const a=y("treeObj"),s=y("setCreateView")(),i=y("setHandleMenuClick"),o=f((null==(t=a.value)?void 0:t.menuItems)||[]),r=v({fieldNames:{label:"name",value:"path"}}),l=e=>{i({path:e,id:s.templateId}),s.previewBack=!1};return(e,t)=>{const a=h("a-select"),i=h("a-form-item");return g(),w(i,{label:"发布类型：",name:"releaseType"},{default:_((()=>[b(a,{class:"select-text-indent",value:C(s).createForm.releaseType,"onUpdate:value":t[0]||(t[0]=e=>C(s).createForm.releaseType=e),style:{width:"100%"},placeholder:"请选择",options:o.value,fieldNames:r.fieldNames,onChange:l},null,8,["value","options","fieldNames"])])),_:1})}}},[["__scopeId","data-v-5b0d66dc"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/releaseType.vue"]]);var ee=e({__name:"title",setup(e){const t=y("setCreateView")(),a=v({isTitle:!1});return(e,s)=>{const i=h("a-input"),o=h("a-form-item");return g(),w(o,{label:"标题：",name:"title"},{default:_((()=>[b(i,{onFocus:s[0]||(s[0]=e=>a.isTitle=!0),allowClear:"","show-count":"",maxlength:50,size:"small",value:C(t).createForm.title,"onUpdate:value":s[1]||(s[1]=e=>C(t).createForm.title=e),placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/title.vue"]]);var te=e({__name:"richText",setup(e){const t=y("setCreateView")();return k((()=>t.createForm.content),(e=>{null!==e&&t.createFormRef.validateFields("content")})),(e,a)=>{const s=h("a-form-item");return g(),w(s,{class:"rich-text",label:"正文：",name:"content"},{default:_((()=>[T(" 富文本 "),b(A,{modelValue:C(t).createForm.content,"onUpdate:modelValue":a[0]||(a[0]=e=>C(t).createForm.content=e),isNum:5},null,8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-1ac3d648"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/richText.vue"]]);var ae=e({__name:"scopeNotification",setup(e){const s=t(),i=y("setCreateView")(),o=v({notifyUsersInfo:null,visibles:!1,checkParents:!1,multipleTrue:!0,selectMode:"depa",checkedKey:"id",checkedList:[],selectTabs:S((()=>x(s.state.base.commentJsonKeys.INIT_SELECT.map((e=>({tab:e.lable,identity:e.identity,key:"teacher"===e.key?1:2,checked:!0}))))))}),r=e=>{const t=[];i.createForm.depts=[],i.createForm.rolls=[],e.length&&(o.checkedList=e,e.forEach((e=>{t.push(e.showName||e.name),e.hasOwnProperty("ancestors")?i.createForm.depts.push({deptId:e.id,deptName:e.showName||e.name}):i.createForm.rolls.push({rollId:e.id,rollName:e.showName||e.name,type:e.type})})),i.createForm[o.YSelectCondition]=t.join("、"),i.createFormRef.validateFields("notifyUsersInfo"))};return(e,t)=>{const s=h("plus-square-filled"),l=h("a-input"),n=h("a-form-item"),c=a;return g(),F(I,null,[b(n,{label:"通知范围：",class:"is-confirmation-item"},{default:_((()=>[T(' name="notifyUsersInfo" '),b(l,{class:"item-input",readonly:"",size:"small",value:C(i).createForm.notifyUsersInfo,"onUpdate:value":t[1]||(t[1]=e=>C(i).createForm.notifyUsersInfo=e),placeholder:"请添加"},{suffix:_((()=>[b(s,{class:"square-filled",onClick:t[0]||(t[0]=e=>{return t="notifyUsersInfo",o.selectMode="depa",o.checkedKey="id",o.checkParents=!1,"circulationPersonnel"===t&&(o.checkParents=!0,o.selectMode="personnel",o.checkedKey="userId"),o.treeData=[],o.treeData=o.departmentTreeData,o.YSelectCondition=t,void(o.visibles=!0);var t})})])),_:1},8,["value"])])),_:1}),b(c,{visible:o.visibles,"onUpdate:visible":t[2]||(t[2]=e=>o.visibles=e),multiple:o.multipleTrue,tabs:o.selectTabs,mode:o.selectMode,checked:o.checkedList,"onUpdate:checked":t[3]||(t[3]=e=>o.checkedList=e),checkParents:o.checkParents,checkedKey:o.checkedKey,onHandleOk:r},null,8,["visible","multiple","tabs","mode","checked","checkParents","checkedKey"])],64)}}},[["__scopeId","data-v-0f64b450"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/scopeNotification.vue"]]);var se=e({__name:"whether",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-radio"),i=h("a-radio-group"),o=h("a-form-item");return g(),w(o,{label:"人员是否需要确认：",class:"form-item-inline isConfirmation",name:"isNeedConfirm"},{default:_((()=>[b(i,{value:C(t).createForm.isNeedConfirm,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.isNeedConfirm=e)},{default:_((()=>[b(s,{value:!0},{default:_((()=>[D("是")])),_:1}),b(s,{value:!1},{default:_((()=>[D("否")])),_:1})])),_:1},8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/whether.vue"]]);const ie={class:"equipment"},oe=(e=>(j("data-v-4de695ff"),e=e(),P(),e))((()=>M("i",{class:"icon-yellow iconfont icon-xingzhuangjiehe112"},null,-1))),re={key:0,class:"release-block"};var le=e({__name:"equipment",setup(e){const t=y("setCreateView")(),a=v({fieldNames:{children:"children",label:"showName",value:"id"},signOptions:[]}),i=e=>{const[a,s]=e;t.createForm.dominateStartTime=a,t.createForm.dominateEndTime=s};return k((()=>t.createForm.isDominateScreen),(e=>{if(e){const{dominateStartTime:e,dominateEndTime:a}=t.createForm;t.createForm.dominateStartTimes=[e,a]}else t.createForm.dominateStartTime="",t.createForm.dominateEndTime="",t.createForm.dominateStartTimes=[]})),L((()=>(async()=>{const{data:e}=await s({direction:""});a.signOptions=e})())),(e,s)=>{const o=h("a-form-item"),r=h("a-tree-select"),l=h("a-checkbox"),n=h("question-circle-filled"),c=h("a-tooltip"),d=h("a-range-picker");return g(),F("div",null,[b(o,{label:"接收设备：",class:"form-item-inline",style:{height:"30px"}}),T(" 班牌 "),M("div",ie,[b(o,{class:"is-confirmation-item confirmation-item-label",label:"班牌："},{default:_((()=>[b(r,{class:"tree-select","tree-checkable":"",multiple:"",value:C(t).createForm.brandIds,"onUpdate:value":s[0]||(s[0]=e=>C(t).createForm.brandIds=e),placeholder:"请选择班牌","allow-clear":"",treeData:a.signOptions,fieldNames:a.fieldNames},{title:_((e=>[oe,D(" "+U(e.showName),1)])),_:1},8,["value","treeData","fieldNames"])])),_:1}),C(t).paintedScreenTitle?T("v-if",!0):(g(),F("div",re,[b(o,null,{default:_((()=>[b(l,{checked:C(t).createForm.isDominateScreen,"onUpdate:checked":s[1]||(s[1]=e=>C(t).createForm.isDominateScreen=e)},{default:_((()=>[D(" 霸屏显示 ")])),_:1},8,["checked"]),b(c,{title:"勾选后班牌霸屏显示该信息",placement:"bottom"},{default:_((()=>[b(n,{style:{color:"rgba(0, 0, 0, 0.45)"}})])),_:1})])),_:1}),C(t).createForm.isDominateScreen?(g(),w(o,{key:0,name:"dominateStartTimes",label:"时间：",class:"form-item-inline form-item-inline-picker"},{default:_((()=>[b(d,{"show-time":"",value:C(t).createForm.dominateStartTimes,"onUpdate:value":s[2]||(s[2]=e=>C(t).createForm.dominateStartTimes=e),separator:"至",onChange:i,valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["value"]),T(' :disabled-date="disabledDate"\r\n                        :disabled-time="disabledRangeTime" ')])),_:1})):T("v-if",!0)]))])])}}},[["__scopeId","data-v-4de695ff"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/equipment.vue"]]);var ne=e({__name:"enclosure",setup(e){const t=y("setCreateView")(),a=v({isbeyond:!1,isAccept:!1,accept:".pdf, .xlsm, .xlsx, .pptx, .ppt, .doc, .docx"}),s=e=>{if(!/(\.|\/)(pdf|ms-powerpoint|xlsm|xlsx|sheet|presentation|powerpoint|document|msword)$/i.test(e.type))return H.error("附件格式为PDF、Word/Excel、PPT!"),a.isbeyond=!0,!0;return e.size/1024/1024<5?(a.isbeyond=!1,!1):(H.error("文件不能超过5M!"),a.isbeyond=!0,!0)},o=async e=>{if(!a.isbeyond){if("removed"===e.file.status){const a=[];return t.createForm.attachments.forEach((t=>{t.uid!==e.file.uid&&a.push(t)})),void(t.createForm.attachments=a)}if(!a.isAccept){let a=!1;if(e.fileList.length>3)return void H.error("附件超过3个!");const s=new FormData;e.fileList.forEach((e=>{e.originFileObj&&(a=!0,s.append("file",e.originFileObj))})),a?await i(s).then((e=>{const{data:a}=e;a.forEach((e=>{t.createForm.attachments.push({name:e.name,attachment:e.url})}))})):t.createForm.attachments=e.fileList}}};return(e,i)=>{const r=h("a-button"),l=h("a-upload"),n=h("a-form-item");return g(),w(n,null,{default:_((()=>[b(l,{"file-list":C(t).createForm.attachments,accept:a.accept,maxCount:3,"before-upload":s,onChange:o},{default:_((()=>{var e;return[b(r,{acceptLload:"",disabled:(null==(e=C(t).createForm.attachments)?void 0:e.length)>2,type:"primary",ghost:"",style:{"background-color":"#00b78114"}},{default:_((()=>[D(" + 添加附件 ")])),_:1},8,["disabled"])]})),_:1},8,["file-list","accept"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/enclosure.vue"]]);const ce={class:"release-block"};var de=e({__name:"releaseTime",setup(e){const t=y("setCreateView")();return k((()=>t.createForm.timerDate),(()=>{t.createFormRef.validateFields("timerDate")})),k((()=>t.createForm.isTimer),(e=>{e||(t.createForm.timerDate="")})),(e,a)=>{const s=h("a-radio"),i=h("a-radio-group"),o=h("a-form-item"),r=h("a-date-picker");return g(),F("div",ce,[b(o,{label:"发布时间：",class:"form-item-inline",name:"isTimer"},{default:_((()=>[b(i,{style:{height:"29px"},value:C(t).createForm.isTimer,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.isTimer=e)},{default:_((()=>[b(s,{value:!1},{default:_((()=>[D(" 立即发布 ")])),_:1}),b(s,{value:!0},{default:_((()=>[D(" 定时发布 ")])),_:1})])),_:1},8,["value"])])),_:1}),C(t).createForm.isTimer?(g(),w(o,{key:0,name:"timerDate"},{default:_((()=>[b(r,{"show-time":"",value:C(t).createForm.timerDate,"onUpdate:value":a[1]||(a[1]=e=>C(t).createForm.timerDate=e),placeholder:"请选择","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["value"]),T(' :disabled-date="disabledDate"\r\n                :disabled-time="disabledRangeTime" ')])),_:1})):T("v-if",!0)])}}},[["__scopeId","data-v-7ef70ea5"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/releaseTime.vue"]]);var me=e({__name:"whetherTop",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-radio"),i=h("a-radio-group"),o=h("a-form-item");return g(),w(o,{label:"是否置顶：",class:"form-item-inline",name:"isTop"},{default:_((()=>[b(i,{value:C(t).createForm.isTop,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.isTop=e)},{default:_((()=>[b(s,{value:!0},{default:_((()=>[D("是")])),_:1}),b(s,{value:!1},{default:_((()=>[D("否")])),_:1})])),_:1},8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/whetherTop.vue"]]);var ue=e({__name:"detailsEditTemplate",props:{visible:{type:Boolean,default:!0}},emits:["update:visible","detailsEditTemplate"],setup(e,{emit:t}){const a=e,s=f(!1),i=y("setCreateView")(),o=f({value:"",id:"",isTitle:!1}),r=v({confirmLoading:!1,title:"编辑模版",activeKey:"1"}),l=()=>{t("update:visible",!1);const{modifyItem:{id:e,value:a},newpc:s,newmobile:o}=i.messLableTemplate;s.elements.forEach((t=>{if(t.id===e)return t.value=a;t.children&&t.children.length&&t.children.forEach((t=>{if(t.id===e)return t.value=a}))})),o.elements.forEach((t=>{if(t.id===e)return t.value=a;t.children&&t.children.length&&t.children.forEach((t=>{if(t.id===e)return t.value=a}))}))};return k((()=>a.visible),(e=>{s.value=e,e&&(o.value=i.messLableTemplate.modifyItem)})),(e,a)=>{const i=h("a-textarea"),n=h("a-form-item"),c=h("a-form"),d=h("a-modal");return g(),w(d,{class:"preview-notification",width:"788px",visible:s.value,"onUpdate:visible":a[1]||(a[1]=e=>s.value=e),title:r.title,maskClosable:!1,onOk:l,onCancel:a[2]||(a[2]=e=>t("update:visible",!1))},{default:_((()=>[b(c,{layout:"vertical"},{default:_((()=>[b(n,{label:"内容："},{default:_((()=>[b(i,{rows:8,showCount:o.value.isTitle,maxlength:o.value.isTitle?50:1e4,value:o.value.value,"onUpdate:value":a[0]||(a[0]=e=>o.value.value=e),placeholder:"请输入内容"},null,8,["showCount","maxlength","value"])])),_:1})])),_:1})])),_:1},8,["visible","title"])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/detailsEditTemplate.vue"]]);const pe=["src"],ye=["innerHTML","onClick","id"],fe=["src"],ve=["innerHTML","onClick","id"];var he=e({__name:"editorRenderPc",props:{data:{type:Object,default:()=>({})}},setup(e){const t=y("setCreateView")(),a=v({templateVisible:!1,replaceBr:R,hasStyleAttributePX:Y,curHoverItemID:null,curHoverCheck:!1}),s=(e,s)=>{const i=JSON.parse(JSON.stringify(e));t.messLableTemplate.modifyItem=i,a.templateVisible=!0};return(t,i)=>(g(),F("div",{style:E({width:`${e.data.document&&e.data.document.width}px`,height:`${e.data.document&&e.data.document.height}px`,backgroundColor:`${e.data.document&&e.data.document.backgroundColor}`,position:"absolute",left:0,top:0})},[(g(!0),F(I,null,V(e.data.elements,((e,t)=>(g(),F("div",{key:t},["image"==e.type?(g(),F("div",{key:0,style:E(a.hasStyleAttributePX(e))},[M("img",{src:e.imageSrc,style:{display:"block",width:"100%",height:"100%"}},null,8,pe)],4)):T("v-if",!0),"text"==e.type?(g(),F("div",{key:1,style:E(a.hasStyleAttributePX(e)),innerHTML:a.replaceBr(e.value),onClick:t=>s(e),id:`text_${e.id}`},null,12,ye)):T("v-if",!0),"group"==e.type?(g(),F("div",{key:2,style:E(a.hasStyleAttributePX(e))},[e.children?(g(!0),F(I,{key:0},V(e.children,((t,i)=>(g(),F(I,null,["image"==e.type?(g(),F("div",{style:E(a.hasStyleAttributePX(t)),key:i},[M("img",{src:t.imageSrc,style:{display:"block",width:"100%",height:"100%"}},null,8,fe)],4)):(g(),F("div",{key:i,style:E(a.hasStyleAttributePX(t)),innerHTML:a.replaceBr(t.value),onClick:e=>s(t),id:`text_${t.id}`},null,12,ve))],64)))),256)):T("v-if",!0)],4)):T("v-if",!0)])))),128)),b(C(ue),{ref:"editTemplateRef",visible:a.templateVisible,"onUpdate:visible":i[0]||(i[0]=e=>a.templateVisible=e)},null,8,["visible"])],4))}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/editorRenderPc.vue"]]);const ge=["src"],we=["innerHTML"],_e=["src"],be=["innerHTML"];var Ce=e(q({__name:"editorRenderMobile",props:{data:{type:Object,default:()=>({})}},setup(e){const t=v({replaceBr:R,hasStyleAttributePX:Y});return(a,s)=>(g(),F("div",{style:E({width:`${e.data.document&&e.data.document.width}px`,height:`${e.data.document&&e.data.document.height}px`,position:"absolute",left:0,top:0,backgroundColor:`${e.data.document&&e.data.document.backgroundColor}`})},[(g(!0),F(I,null,V(e.data.elements,((e,a)=>(g(),F("div",{key:a},["image"==e.type?(g(),F("div",{key:0,style:E(t.hasStyleAttributePX(e))},[M("img",{src:e.imageSrc,style:{display:"block",width:"100%",height:"100%"}},null,8,ge)],4)):T("v-if",!0),"text"==e.type?(g(),F("div",{key:1,style:E(t.hasStyleAttributePX(e)),innerHTML:t.replaceBr(e.value)},null,12,we)):T("v-if",!0),"group"==e.type?(g(),F("div",{key:2,style:E(t.hasStyleAttributePX(e))},[e.children?(g(!0),F(I,{key:0},V(e.children,((a,s)=>(g(),F(I,null,["image"==e.type?(g(),F("div",{style:E(t.hasStyleAttributePX(a)),key:s},[M("img",{src:a.imageSrc,style:{display:"block",width:"100%",height:"100%"}},null,8,_e)],4)):(g(),F("div",{key:s,style:E(t.hasStyleAttributePX(a)),innerHTML:t.replaceBr(a.value)},null,12,be))],64)))),256)):T("v-if",!0)],4)):T("v-if",!0)])))),128))],4))}}),[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/editorRenderMobile.vue"]]);const ke=["title","sourceEdit","richText","coverImg","releaseTime","identitys","equipment","campusMaterials"],Te=["releaseType","title","sourceEdit","galleryText","coverImg","releaseTime","identitys","equipment","campusMaterials"];const Fe=(e=>(j("data-v-aa4b56f0"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Ie=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布新闻资讯",createForm:{isSync:!1,title:"",content:null,attachments:[],rolls:[],depts:[],details:[],notifyUsersInfo:"",notifyDevicesInfo:[],isNeedConfirm:!1,isTop:!1,isTimer:!1,timerDate:"",brandIds:[],isDominateScreen:!1,dominateEndTime:"",dominateStartTime:"",dominateStartTimes:[],contentType:"0",identifier:"news",releaseType:"news"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],isTimer:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}],dominateStartTimes:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"NewsCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:Te,formCpmt:ke}),(t.eidtId||t.templateId)&&(t.eidtId&&(a.title="编辑新闻资讯"),await mt(t).then((e=>{const{details:a,isCheckedEltern:s,isCheckedEmployee:i,isCheckedStudent:o}=e;t.createForm={...t.createForm,...e},t.isTemplate&&(t.createForm.contentType=1,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a);const r=[];i&&s&&o?t.createForm.identitys=[0,1,2]:(s&&r.push(2),i&&r.push(1),o&&r.push(0),t.createForm.identitys=[...r])})))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[Fe,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(c,{type:"primary",style:{"margin-left":"10px"},loading:C(t).createLoading,onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-aa4b56f0"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/news/create.vue"]]);const Se=["title","recruitment","lossLocation","lossTime","contactPerson","contactPhone","richText","releaseTime","identitys","equipment"],xe=["releaseType","title","recruitment","lossLocation","lossTime","contactPerson","contactPhone","galleryText","releaseTime","identitys","equipment"];const De=(e=>(j("data-v-3770e308"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Le=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布失物招领",createForm:{id:"",title:"",content:null,rolls:[],depts:[],identitys:[],details:[],lossItems:"",lossLocation:"",lossTime:"",contactPerson:"",contactPhone:"",notifyDevicesInfo:[],isCheckedEltern:!1,isCheckedEmployee:!1,isTimer:!1,timerDate:"",brandIds:[],isDominateScreen:!1,dominateStartTimes:[],contentType:"0",identifier:"receive",releaseType:"receive"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],lossItems:[{required:!0,message:"请输入"}],lossLocation:[{required:!0,message:"请输入"}],contactPerson:[{required:!0,message:"请输入"}],dominateStartTimes:[{required:!0,message:"请选择"}],contactPhone:[{required:!0,validator:(e,t)=>J(t)?Promise.resolve():Promise.reject("请输入正确的联系电话！"),trigger:"blur"}],isTimer:[{required:!0,message:"请选择"}],lossTime:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"ReceiveCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:xe,formCpmt:Se}),(t.eidtId||t.templateId)&&(t.eidtId&&(a.title="编辑失物招领"),await mt(t).then((e=>{const{details:a,content:s,isCheckedEltern:i,isCheckedEmployee:o,isCheckedStudent:r}=e;t.createForm={...t.createForm,...e},t.isTemplate?(t.createForm.contentType=1,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):t.createForm.content=s;const l=[];o&&i&&r?t.createForm.identitys=[0,1,2]:(i&&l.push(2),o&&l.push(1),r&&l.push(0),t.createForm.identitys=[...l])})))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[De,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(c,{loading:C(t).createLoading,type:"primary",style:{"margin-left":"10px"},onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-3770e308"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/receive/create.vue"]]);const Me=["title","author","source","richText","enclosure","releaseTime","identitys","equipment"],Ue=["releaseType","title","author","source","galleryText","enclosure","releaseTime","identitys","equipment"];const je=(e=>(j("data-v-082d8f15"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Pe=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布文章鉴赏",createForm:{id:"",title:"",content:null,rolls:[],depts:[],identitys:[],details:[],author:"",source:"",notifyDevicesInfo:[],attachments:[],isCheckedEltern:!1,isCheckedEmployee:!1,isTimer:!1,timerDate:"",brandIds:[],isDominateScreen:!1,dominateEndTime:"",dominateStartTime:"",dominateStartTimes:[],contentType:"0",identifier:"article",releaseType:"article"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],author:[{required:!0,message:"请输入"}],isTimer:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],dominateStartTimes:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"ArticleCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:Ue,formCpmt:Me}),(t.eidtId||t.templateId)&&(t.eidtId&&(a.title="编辑文章鉴赏"),await mt(t).then((e=>{const{details:a,content:s,isCheckedEltern:i,isCheckedEmployee:o,isCheckedStudent:r}=e;t.createForm={...t.createForm,...e},t.isTemplate?(t.createForm.contentType=1,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):t.createForm.content=s;const l=[];o&&i&&r?t.createForm.identitys=[0,1,2]:(i&&l.push(2),o&&l.push(1),r&&l.push(0),t.createForm.identitys=[...l])})))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[je,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(c,{loading:C(t).createLoading,type:"primary",style:{"margin-left":"10px"},onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-082d8f15"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/article/create.vue"]]);const Ve=["title","posterImg","releaseTime","identitys","equipment"],Ee=["releaseType","title","galleryText","releaseTime","identitys","equipment"];const qe=(e=>(j("data-v-de5e7864"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Ne=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布海报",createForm:{id:"",title:"",content:null,rolls:[],depts:[],identitys:[],notifyDevicesInfo:[],isCheckedEltern:!1,isCheckedEmployee:!1,isTimer:!1,timerDate:"",brandIds:[],details:[],isDominateScreen:!1,dominateEndTime:"",dominateStartTime:"",dominateStartTimes:[],contentType:"0",identifier:"poster",releaseType:"poster"}}),s=v({title:[{required:!0,message:"请输入"}],contentImg:[{required:!0,message:"请选择"}],isTimer:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],dominateStartTimes:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"NewsCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:Ee,formCpmt:Ve}),(t.eidtId||t.templateId)&&(t.eidtId&&(a.title="编辑海报"),await mt(t).then((e=>{const{details:a,content:s,isCheckedEltern:i,isCheckedEmployee:o,isCheckedStudent:r}=e;t.createForm={...t.createForm,...e},t.isTemplate?(t.createForm.contentType=1,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):t.createForm.content=s;const l=[];o&&i&&r?t.createForm.identitys=[0,1,2]:(i&&l.push(2),o&&l.push(1),r&&l.push(0),t.createForm.identitys=[...l])})))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[qe,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{onClick:i},{default:_((()=>[D(" 预览 ")])),_:1}),b(c,{type:"primary",style:{"margin-left":"10px"},onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-de5e7864"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/poster/create.vue"]]);const Oe=[{title:"序号",width:60,dataIndex:"index",fixed:"left"},{title:"标题",dataIndex:"title",path:!0,filter:!0,key:"id",width:150,ellipsis:!0,showSorterTooltip:!0},{title:"发布人",width:100,dataIndex:"identityUserName",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"传阅人员",dataIndex:"notifyUsersInfo",key:"id",width:150,ellipsis:!0,showSorterTooltip:!0},{title:"已浏览",width:80,dataIndex:"viewUsers",key:"id"},{title:"状态",width:80,dataIndex:"statusRemark",key:"id"},{title:"发布时间",dataIndex:"timerDate",key:"id",width:"200px"},{title:"是否置顶",dataIndex:"isTop",width:100,key:"id"},{title:"操作",dataIndex:"operation",width:180,fixed:"right"}],Ae=["title","richText","enclosure","circulationPersonnel","whetherTop","releaseTime"],He=["releaseType","title","galleryText","enclosure","circulationPersonnel","whetherTop","releaseTime"];const Be=(e=>(j("data-v-124a455e"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Re=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布公文",createForm:{id:"",title:"",content:null,rolls:[],depts:[],details:[],attachments:[],notifyDevicesInfo:[],officicalDocElterns:[],officicalDocTeachers:[],isCheckedEltern:!1,isCheckedEmployee:!1,isTimer:!1,isTop:!1,timerDate:"",circulationPersonnel:"",contentType:"0",identifier:"officialDoc",releaseType:"officialDoc"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],isTimer:[{required:!0,message:"请选择"}],isTop:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],circulationPersonnel:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"OfficialDocCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:He,formCpmt:Ae}),(t.copyId||t.templateId)&&await mt(t).then((e=>{t.copyId=0;const{details:a,content:s,title:i}=e;t.isTemplate?(t.createForm.contentType=1,t.createForm.title=i,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):(t.createForm.content=s,t.createForm.title=i)}))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[Be,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(c,{loading:C(t).createLoading,type:"primary",style:{"margin-left":"10px"},onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-124a455e"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/officialDoc/create.vue"]]);const Ye=[(e=>(j("data-v-346e0370"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)))],Ke={class:"release-new-edit"},ze={key:0,class:"details-content-time"},Je={key:1},$e=["src"],Xe=["src"],Qe={key:0,class:"recruitment"},We=["src"],Ge=["innerHTML"],Ze={key:1,class:"details-content-enclosure",style:{"margin-top":"40px"}},et=["href"];var tt=e({__name:"index",setup(e){const t=z(),a=y("setCreateView")(),s=v({isShowSubmitEdit:!1,activeKey:"1",createLoading:!1,confirmeLoading:!1,componentObj:{AnnounCreate:aa,NewsCreate:Ie,ReceiveCreate:Le,ArticleCreate:Pe,PosterCreate:Ne,OfficialDocCreate:Re},form:{title:"",content:null,contentImg:"",status:0,details:[],attachments:[],identityUserName:"",timerDate:"",viewUsers:"",identifier:"",contentType:"",releaseType:"",lossItems:"",lossLocation:"",lossTime:"",contactPerson:"",contactPhone:"",isConfirm:!0,isNeedConfirm:!1,aioMachineContent:{}}}),i=()=>{a.isBack?(a.componentName=s.componentObj[a.toCpt],a.isBack=!1,a.previewBack=!0):a.isShowCreateView=!1},o=async()=>{var e;s.createLoading=!0;const{createForm:t,previewApi:i}=a;(null==(e=a.createForm.messLableTemplate)?void 0:e.pc)&&(a.createForm.contentType="1",a.createForm.details=await lt(a)),i(t).then((e=>{H.success("发布成功！"),a.oldCreateForm={},s.isShowSubmitEdit=!1,a.isBack=!1,a.isShowCreateView=!1,a.eidtId=0})).catch((()=>{s.createLoading=!1}))},r=()=>{s.confirmeLoading=!0;const{createForm:e,submitEditApi:t}=a;t({receiveId:e.receiveId}).then((()=>{H.success("确定成功！"),s.isShowSubmitEdit=!1,i()})).catch((()=>{s.confirmeLoading=!1}))},l=S((()=>e=>{if(e.contentType&&e.details.length){const{contentImg:t,coverImg:a}=e.details[s.activeKey-0];return t||a}return e.contentImg||e.coverImg}));return L((()=>{const{createForm:e,isBack:t}=a;for(const a in s.form)void 0!==e[a]&&null!==e[a]||(e[a]=""),s.form[a]=e[a];t&&(s.isShowSubmitEdit=t)})),(e,a)=>{const n=h("a-tab-pane"),c=h("a-tabs"),d=h("a-button"),m=h("a-layout-header"),u=h("paper-clip-outlined"),p=h("a-form-item"),y=h("a-layout-content"),f=h("a-layout");return g(),w(f,{class:"yd-layout previewPcMobile"},{default:_((()=>[b(m,{class:"yd-layout-header details-release-layout-header"},{default:_((()=>[M("div",null,[M("span",{onClick:i},Ye),b(c,{activeKey:s.activeKey,"onUpdate:activeKey":a[0]||(a[0]=e=>s.activeKey=e)},{default:_((()=>[b(n,{key:"1",tab:"横版"}),b(n,{key:"0",tab:"竖版"})])),_:1},8,["activeKey"])]),M("div",Ke,[s.isShowSubmitEdit?(g(),w(d,{key:0,loading:s.createLoading,type:"primary",style:{"margin-left":"10px"},onClick:o},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])):T("v-if",!0)])])),_:1}),b(f,null,{default:_((()=>[b(y,{class:"yd-layout-content yd-layout-content-pdbtm"},{default:_((()=>{var e;return[M("div",{class:N(["details-content",{contentPc:"1"===s.activeKey,contentMobile:"0"===s.activeKey}])},[M("h1",null,U(s.form.title),1),s.isShowSubmitEdit?T("v-if",!0):(g(),F("div",ze,[M("span",null,[D(U(s.form.identityUserName)+" ",1),M("span",{class:N({"meta-content-time":!s.form.status&&C($)().unix()<C($)(s.form.timerDate).unix()})},U(s.form.status?"发布于":"待发布")+"   "+U(s.form.timerDate),3)]),M("span",null,"浏览量："+U(s.form.viewUsers)+" 次",1)])),(null==(e=s.form.aioMachineContent)?void 0:e.type)?(g(),F("div",Je,[1==s.form.aioMachineContent.type?(g(!0),F(I,{key:0},V(s.form.aioMachineContent.urls,((e,t)=>(g(),F("img",{key:t,src:e,style:{width:"auto",height:"100%",margin:"20px auto","max-height":"1024px","max-width":"100%"}},null,8,$e)))),128)):(g(!0),F(I,{key:1},V(s.form.aioMachineContent.urls,((e,t)=>(g(),F("video",{key:t,class:"campusVideo",ref_for:!0,ref:"campusVideo",controls:"controls",src:e},null,8,Xe)))),128))])):(g(),F(I,{key:2},[T("  失物招领 "),s.form.lossItems?(g(),F("ul",Qe,[M("li",null,[D(" 招领物品： "),M("span",null,U(s.form.lossItems),1)]),M("li",null,[D(" 丢失/拾取地点： "),M("span",null,U(s.form.lossLocation),1)]),M("li",null,[D(" 丢失/拾取时间： "),M("span",null,U(s.form.lossTime),1)]),M("li",null,[D(" 联系人： "),M("span",null,U(s.form.contactPerson),1)]),M("li",null,[D(" 联系电话： "),M("span",null,U(s.form.contactPhone),1)])])):T("v-if",!0),T(" 海报 "),M("img",{src:l.value(s.form),style:{width:"auto",height:"100%","max-height":"1024px","max-width":"100%"}},null,8,We),T(" 正文 "),M("div",{class:"details-html",innerHTML:s.form.content},null,8,Ge),s.form.attachments&&s.form.attachments.length?(g(),F("div",Ze," 附件 ")):T("v-if",!0),(g(!0),F(I,null,V(s.form.attachments,(e=>(g(),F("div",{class:"details-content-enclosure enclosure-txt",key:e.id},[b(u),M("span",null,U(e.name),1),M("a",{href:e.attachment,style:{"margin-left":"10px",color:"#00b781"}}," 下载 ",8,et)])))),128))],64))],2),"myReceive"!==C(t).name||s.isShowSubmitEdit||!s.form.isNeedConfirm||s.form.isConfirm?T("v-if",!0):(g(),w(p,{key:0,class:"footer"},{default:_((()=>[b(d,{type:"primary",loading:s.confirmeLoading,onClick:r},{default:_((()=>[D(" 确定 ")])),_:1},8,["loading"])])),_:1}))]})),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-346e0370"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/previewPcMobile/index.vue"]]);const at=e=>new Promise(((t,a)=>{const s=new FormData;s.append("file",e),i(s).then((e=>{var a;const{data:s}=e;t(null==(a=s[0])?void 0:a.url)}))})),st=(e,t)=>{const{store:a,Url:s}=t;a.dispatch(s,e)},it=(e,t)=>{const{id:a,messType:s,contentType:i,setCreateView:o}=e,l={id:a,contentType:i,messType:s};let n=u;t.value&&(n=r),n(l).then((e=>{const{data:t}=e;o.isShowCreateView=!0,o.createForm=t,o.submitEditApi=d,o.componentName=tt}))},ot=(e,t)=>{e.visible=!0,e.category.id=t.id,e.category.isNotify=t.isNotify},rt=e=>{const t={};return Array.isArray(e)?t.ids=e:t.id=e,new Promise(((e,a)=>{B.confirm({title:"删除提示",icon:b(X),content:"你确定要删除该条信息吗？",okText:"确认",cancelText:"取消",onCancel(){},onOk(){m(t).then((()=>{H.success("删除成功！"),e()}))}})}))},lt=async e=>{const t=document.getElementById("imagePc"),a=document.getElementById("imageMobile"),s=await K(t,"pc.png"),i=await K(a,"mobile.png"),o=await at(s),r=await at(i),{newmobile:l,newpc:n}=x(e);return new Promise(((e,t)=>{try{e([{coverImg:r||l.coverImg,contentImg:r,width:750,height:1334,parseJson:JSON.stringify(l)},{coverImg:o||n.coverImg,contentImg:o,width:1024,height:576,parseJson:JSON.stringify(n)}])}catch(a){t(a)}}))},nt=e=>{const{createFormRef:t,createForm:a,eidtId:s}=e;t.validate().then((async()=>{var t;e.createLoading=!0,e.loading=!0;let i=l,o=[];s&&(a.id=s,i=n),e.messLableTemplate.newpc.coverImg&&(o=await lt(e.messLableTemplate));const r=JSON.parse(JSON.stringify(a));(null==(t=r.aioMachineIds)?void 0:t.length)&&(i=c),r.details=o.length?o:e.createForm.details,i(r).then((t=>{H.success("发布成功！"),e.createLoading=!1,e.isShowCreateView=!1,e.previewBack=!1,e.eidtId=0})).catch((()=>{e.createLoading=!1}))}))},ct=e=>{const{setCreateView:t,cpt:a}=e;t.createFormRef.validate().then((async()=>{e.createLoading=!0,t.messLableTemplate.newpc.coverImg&&(t.createForm.contentType=1,t.createForm.details=await lt(t.messLableTemplate),e.createLoading=!1),e.setCreateView.componentName=tt,e.setCreateView.toCpt=a,e.setCreateView.isShowCreateView=!0,e.setCreateView.isBack=!0;let s=l;e.setCreateView.eidtId&&(t.createForm.id=e.setCreateView.eidtId,s=n),e.setCreateView.previewApi=s,t.oldCreateForm=t.createForm}))},dt=e=>{const{setCreateView:t,rules:a,formCpmtType:s,formCpmt:i}=e;t.isTemplate?(t.createForm.contentType=1,delete a.content,t.rules=x(a),t.formCpmt=x(s)):(t.formCpmt=x(i),t.rules=x(a))},mt=e=>{if(e.previewBack&&e.oldCreateForm.title)e.createForm={...e.createForm,...e.oldCreateForm};else{const{id:t,contentType:a,messType:s}=e.eidtForm;let i=null;if(t&&!e.isTemplate){const e={id:t,contentType:a,messType:s};return i=r,new Promise(((t,a)=>{i(e).then((({data:e})=>{t(e)}))}))}if(t&&e.isTemplate){i=o;let l=t;return e.contentType&&(i=r,l={id:t,contentType:a,messType:s}),new Promise(((e,t)=>{i(l).then((({data:t})=>{e(t)}))}))}}};const ut=["src"],pt={class:"my-tinymce-pc"},yt={class:"my-tinymce-mobile"};var ft=e({__name:"galleryText",setup(e){const t=y("setCreateView")(),a=v({galleryImg:""}),s=S((()=>e=>{if(t.messLableTemplate.newpc={},1==e.contentType&&e.details.length){if(t.messLableTemplate.newpc={},e.details[1].parseJson){const{newpc:a,newmobile:s}=(e=>{const[t,a]=e,s=JSON.parse(t.parseJson);return{newpc:{...JSON.parse(a.parseJson),id:a.id,coverImg:a.coverImg},newmobile:{...s,id:t.id,coverImg:t.coverImg}}})(e.details);return t.messLableTemplate.newpc=a,t.messLableTemplate.newmobile=s,!1}a.galleryImg=e.details[1].coverImg}return!0}));return(e,i)=>{const o=h("a-form-item");return g(),w(o,{label:"正文：",style:{"min-height":"120px",overflow:"hidden"}},{default:_((()=>[T(" 正文 图库 "),s.value(C(t).createForm)?(g(),F("img",{key:0,src:a.galleryImg},null,8,ut)):(g(),F(I,{key:1},[M("div",pt,[b(C(he),{id:"imagePc",data:C(t).messLableTemplate.newpc},null,8,["data"])]),M("div",yt,[b(C(Ce),{id:"imageMobile",data:C(t).messLableTemplate.newmobile},null,8,["data"])])],64))])),_:1})}}},[["__scopeId","data-v-f4e0b560"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/galleryText.vue"]]);const vt={class:"upload-box"};var ht=e({__name:"coverImg",setup(e){const t=y("setCreateView")(),a=({base64:e,file:a})=>{const s=new FormData;s.append("file",a),i(s).then((e=>{const{data:a}=e;a.map((e=>t.createForm.coverImg=e.url))}))};return(e,s)=>{const i=h("a-form-item");return g(),w(i,{label:"封面："},{default:_((()=>[M("div",vt,[b(Q,{value:C(t).createForm.coverImg,"onUpdate:value":s[0]||(s[0]=e=>C(t).createForm.coverImg=e),title:"重新上传",onChange:a,cropBoxResizable:!0,aspectRatio:1.5,minCropBoxWidth:300,minCropBoxHeight:200},null,8,["value"])])])),_:1})}}},[["__scopeId","data-v-4dd495aa"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/coverImg.vue"]]);var gt=e({__name:"identitys",setup(e){const a=y("setCreateView")(),s=t(),i=S((()=>x(s.state.base.commentJsonKeys.INIT_SELECT))),o=e=>{a.createForm.isCheckedEltern=e.includes(2),a.createForm.isCheckedEmployee=e.includes(1),a.createForm.isCheckedStudent=e.includes(0)};return(e,t)=>{const s=h("a-checkbox"),r=h("a-checkbox-group"),l=h("a-form-item");return g(),w(l,{label:"接收人员：",class:"form-item-inline identitys"},{default:_((()=>[b(r,{value:C(a).createForm.identitys,"onUpdate:value":t[0]||(t[0]=e=>C(a).createForm.identitys=e),style:{width:"100%"},onChange:o},{default:_((()=>[(g(!0),F(I,null,V(i.value,(e=>(g(),w(s,{key:e.key,value:e.identity},{default:_((()=>[D(" 所有"+U(e.lable),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/identitys.vue"]]);var wt=e({__name:"author",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"作者：",name:"author"},{default:_((()=>[b(s,{value:C(t).createForm.author,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.author=e),placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/author.vue"]]);var _t=e({__name:"source",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"出处：",name:"source"},{default:_((()=>[b(s,{value:C(t).createForm.source,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.source=e),placeholder:"请添加"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/source.vue"]]);var bt=e({__name:"recruitment",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"招领物品：",name:"lossItems"},{default:_((()=>[b(s,{value:C(t).createForm.lossItems,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.lossItems=e),allowClear:"","show-count":"",maxlength:"20",size:"small",placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/recruitment.vue"]]);var Ct=e({__name:"lossLocation",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"丢失/拾取地点：",name:"lossLocation"},{default:_((()=>[b(s,{value:C(t).createForm.lossLocation,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.lossLocation=e),placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/lossLocation.vue"]]);var kt=e({__name:"lossTime",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-date-picker"),i=h("a-form-item");return g(),w(i,{label:"丢失/拾取时间：",name:"lossTime",style:{width:"100%"}},{default:_((()=>[b(s,{"show-time":"",style:{width:"100%"},value:C(t).createForm.lossTime,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.lossTime=e),placeholder:"请选择","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/lossTime.vue"]]);var Tt=e({__name:"contactPerson",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:" 联系人：",name:"contactPerson"},{default:_((()=>[b(s,{value:C(t).createForm.contactPerson,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.contactPerson=e),placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/contactPerson.vue"]]);var Ft=e({__name:"contactPhone",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"联系电话：",name:"contactPhone"},{default:_((()=>[b(s,{value:C(t).createForm.contactPhone,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.contactPhone=e),placeholder:"请输入"},{default:_((()=>[T(' :maxLength="11" ')])),_:1},8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/contactPhone.vue"]]);const It={class:"content-img"},St=["src"],xt=(e=>(j("data-v-9f44c0b2"),e=e(),P(),e))((()=>M("div",{class:"btn haibao"},"点击上传图片",-1)));var Dt=e({__name:"posterImg",setup(e){const t=y("setCreateView")(),a=v({isAccept:!1}),s=e=>{a.isAccept=!1;if(!/(\.|\/)(jpeg|webp|png)$/i.test(e.type))return H.error("图片格式格式为jpeg/png/webp!"),void(a.isAccept=!0);a.isAccept=!1;return e.size/1024/1024<5?(a.acceptLload=!1,!1):(a.acceptLload=!0,void H.error("文件不能超过5M!"))},o=e=>{if(a.isAccept)return;let s=!1;if(a.acceptLload)e.fileList=e.fileList.splice(e.fileList.length,1),e.fileList=[];else{const a=new FormData;e.fileList.forEach((e=>{e.originFileObj&&(s=!0,a.append("file",e.originFileObj))})),s?i(a).then((({data:e})=>{e.length&&(t.createForm.contentImg=e[0].url)})):t.createForm.contentImg=""}},r=()=>{t.createForm.contentImg=""};return k((()=>t.createForm.contentImg),(e=>{e&&t.createFormRef.validateFields("contentImg")})),(e,a)=>{const i=h("close-circle-filled"),l=h("plus-outlined"),n=h("a-button"),c=h("a-upload"),d=h("a-form-item");return g(),w(d,{label:"图片：",class:"zwImg",name:"contentImg"},{default:_((()=>[M("div",It,[C(t).createForm.contentImg?(g(),F(I,{key:0},[b(i,{onClick:r,class:"circle-outlined"}),M("img",{src:`${C(t).createForm.contentImg}?w=1024&h=600`,style:{width:"auto",height:"auto"}},null,8,St)],64)):(g(),w(c,{key:1,class:"click-area",maxCount:1,accept:"image/png,image/jpg,image/jpeg","before-upload":s,onChange:o},{default:_((()=>[b(n,{class:"btn",type:"dashed"},{default:_((()=>[b(l)])),_:1}),xt])),_:1}))])])),_:1})}}},[["__scopeId","data-v-9f44c0b2"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/posterImg.vue"]]);var Lt=e({__name:"sourceEdit",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-input"),i=h("a-form-item");return g(),w(i,{label:"来源/编辑"},{default:_((()=>[b(s,{"show-count":"",maxlength:50,size:"small",value:C(t).createForm.source,"onUpdate:value":a[0]||(a[0]=e=>C(t).createForm.source=e),placeholder:"请输入"},null,8,["value"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/sourceEdit.vue"]]);const Mt={class:"item-input"},Ut={class:"personnel"},jt={key:0,style:{color:"#a5a2a2"}};var Pt=e({__name:"circulationPersonnel",setup(e){const s=t(),i=S((()=>s.state.base.commentJsonKeys.schoolType)),o=y("setCreateView")(),r=v({notifyUsersInfo:null,visibles:!1,checkParents:!1,multipleTrue:!0,selectMode:"depa",checkedKey:"id",checkedList:[],selectTabs:S((()=>x(s.state.base.commentJsonKeys.INIT_SELECT.map((e=>({tab:e.lable,identity:e.identity,key:"teacher"===e.key?1:2,checked:!0}))))))}),l=e=>{const t=[];o.createForm.officicalDocElterns=[],o.createForm.officicalDocTeachers=[],o.createForm.officicalDocStudents=[],e.length&&(r.checkedList=e,e.forEach((e=>{t.push(e.showName||e.name),e.deptVOList&&e.deptVOList.length?o.createForm.officicalDocTeachers.push(e):2==i.value?o.createForm.officicalDocStudents.push(e):o.createForm.officicalDocElterns.push(e)})),o.createForm[r.YSelectCondition]=t.join("、"),o.createFormRef.validateFields("circulationPersonnel"))};return(e,t)=>{const s=h("plus-square-filled"),n=h("a-form-item"),c=a;return g(),F(I,null,[b(n,{label:"传阅人员：",class:"is-confirmation-item",name:"circulationPersonnel"},{default:_((()=>[M("div",Mt,[M("div",Ut,[C(o).createForm.circulationPersonnel?T("v-if",!0):(g(),F("span",jt,"请选择")),M("span",null,U(C(o).createForm.circulationPersonnel),1),b(s,{class:"addcirculation",onClick:t[0]||(t[0]=e=>{return t="circulationPersonnel",r.selectMode="depa",r.checkedKey="id",r.checkParents=!1,"circulationPersonnel"===t&&(r.checkParents=!0,r.selectMode="personnel",r.checkedKey="userId"),r.treeData=[],r.treeData=r.departmentTreeData,r.YSelectCondition=t,void(r.visibles=!0);var t}),style:{color:"#00b781","font-size":"22px"}})])])])),_:1}),b(c,{visible:r.visibles,"onUpdate:visible":t[1]||(t[1]=e=>r.visibles=e),multiple:r.multipleTrue,tabs:r.selectTabs,mode:r.selectMode,checked:r.checkedList,"onUpdate:checked":t[2]||(t[2]=e=>r.checkedList=e),checkParents:r.checkParents,isParents:2!==i.value,checkedKey:r.checkedKey,onHandleOk:l},null,8,["visible","multiple","tabs","mode","checked","checkParents","isParents","checkedKey"])],64)}}},[["__scopeId","data-v-d9a19090"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/circulationPersonnel.vue"]]);const Vt=e=>(j("data-v-02f606ba"),e=e(),P(),e),Et={key:0},qt={key:0,label:"",class:"painted"},Nt={class:"painted_screen"},Ot=Vt((()=>M("div",{class:"btn haibao"},"点击上传图片",-1))),At=["src"],Ht={class:"painted"},Bt={class:"painted_screen"},Rt=Vt((()=>M("div",{class:"btn haibao"},"上传视频",-1))),Yt=["src"],Kt=Vt((()=>M("label",{class:"form-item-inline"},[M("span",{class:"x"},"*"),D(" 接收设备：")],-1))),zt={class:"equipment"},Jt=Vt((()=>M("i",{class:"icon-yellow iconfont icon-xingzhuangjiehe112"},null,-1)));var $t=e({__name:"paintedScreen",setup(e){const t=W(),a=y("setCreateView")(),s=f(),o=v({fieldNames:{children:"children",label:"showName",value:"id"},paintedScreens:[{text:"图片",value:1},{text:"视频",value:2}],isAccept:!1,spinLoad:!1,autoplay:!0,maxNum:2,percentage:0,fileList:[],signOptions:[]}),r=S((()=>e=>{const t=a.createForm.aioMachineContent[e];return"type"===e?t?t-1:1:t||[]})),l=e=>{const t=["video/mp4","video/webm","video/ogg","video/mpeg","text/plain","video/flv","video/x-ms-wmv","video/avi",""].includes(e.type),a=e.size/1024/1024<500;return o.isSureUpload=t,o.isSizeUpload=a,t?a?(!t||!a)&&void 0:(H.error("文件大于500M，请重新上传"),!0):(H.error("请上传.mp4,.webm,.wmv,.avi,.flv,.rm,.rmvb,.mpeg ,.ts,.ogg格式文件!"),!0)},n=e=>{if(!o.isSureUpload||!o.isSizeUpload)return!1;o.percentage=0;const s=t.state.user.currentSchool.id;o.spinLoad=!0,G(e,{catalogue:""+("/"+s+"/videoAlbum")},(e=>{o.percentage=e})).then((t=>{const{code:s,url:i}=t;0===s&&(e.fileList.length>0&&(o.fileList=[e.fileList[e.fileList.length-1]]),a.createForm.aioMachineContent.urls.push(i),o.fileList=[],a.createFormRef.validateFields("urls"))})).finally((()=>{o.spinLoad=!1}))},c=e=>{o.isAccept=!1;if(!/(\.|\/)(jpeg|webp|png)$/i.test(e.type))return H.error("图片格式格式为jpeg/png/webp!"),void(o.isAccept=!0);o.isAccept=!1;return e.size/1024/1024<5?(o.acceptLload=!1,!1):(o.acceptLload=!0,void H.error("文件不能超过5M!"))},d=e=>{if(o.isAccept)return;let t=!1;if(o.acceptLload)e.fileList=e.fileList.splice(e.fileList.length,1),e.fileList=[];else{const s=new FormData;e.fileList.forEach((e=>{e.originFileObj&&(t=!0,s.append("file",e.originFileObj))})),t?i(s).then((({data:e})=>{e.length&&(a.createForm.aioMachineContent.urls.push(e[0].url),a.createFormRef.validateFields("urls"))})):a.createForm.aioMachineContent.urls=[]}},m=e=>{a.createForm.aioMachineContent.urls=[]};return L((()=>{p().then((({data:e})=>{o.signOptions=e}))})),(e,t)=>{const i=h("a-radio-button"),u=h("a-radio-group"),p=h("plus-outlined"),y=h("a-button"),f=h("a-upload"),v=h("close-circle-filled"),k=h("a-spin"),S=h("a-form-item"),x=h("a-tree-select");return C(a).createForm.aioMachineContent&&C(a).createForm.aioMachineContent.type?(g(),F("div",Et,[b(u,{value:C(a).createForm.aioMachineContent.type,"onUpdate:value":t[0]||(t[0]=e=>C(a).createForm.aioMachineContent.type=e),"button-style":"solid",onChange:m},{default:_((()=>[(g(!0),F(I,null,V(o.paintedScreens,(e=>(g(),w(i,{key:e.value,value:e.value},{default:_((()=>[D(U(e.text),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"]),T(" 图片 "),b(S,{class:"painted_form",name:"urls",label:`${o.paintedScreens[r.value("type")].text}：`},{default:_((()=>[r.value("type")?(g(),w(k,{key:1,spinning:o.spinLoad,tip:""+("上传中..."+o.percentage+"%")},{default:_((()=>[M("div",Ht,[M("div",Bt,[b(f,{class:"click-area",ref:"uploads",accept:"video/*",action:"/",disabled:r.value("urls").length>=C(a).maxNum,multiple:!1,"show-upload-list":!1,"file-list":o.fileList,limit:1,"before-upload":l,onChange:n},{default:_((()=>[b(y,{class:"btn",type:"dashed",disabled:r.value("urls").length>=C(a).maxNum},{default:_((()=>[b(p)])),_:1},8,["disabled"]),Rt])),_:1},8,["disabled","file-list"])]),(g(!0),F(I,null,V(r.value("urls"),((i,o)=>(g(),F("div",{class:"painted_screen",key:o},[b(v,{onClick:t[1]||(t[1]=t=>{return s=e.indx,void a.createForm.aioMachineContent.urls.splice(s,1);var s}),class:"circle-outlined"}),M("div",{class:"video_box",onClick:t[2]||(t[2]=t=>(e.item,void s.value.pause()))},[M("video",{class:"campusVideo",ref_for:!0,ref_key:"campusVideo",ref:s,controls:"controls",src:i},null,8,Yt)])])))),128))])])),_:1},8,["spinning","tip"])):(g(),F("div",qt,[M("div",Nt,[b(f,{class:"click-area",maxCount:1,accept:"image/png,image/jpg,image/jpeg","before-upload":c,onChange:d,disabled:r.value("urls").length>=C(a).maxNum},{default:_((()=>[b(y,{class:"btn",type:"dashed",disabled:r.value("urls").length>=C(a).maxNum},{default:_((()=>[b(p)])),_:1},8,["disabled"]),Ot])),_:1},8,["disabled"])]),(g(!0),F(I,null,V(r.value("urls"),((e,t)=>(g(),F("div",{class:"painted_screen",key:t},[b(v,{onClick:e=>{return s=t,void a.createForm.aioMachineContent.urls.splice(s,1);var s},class:"circle-outlined"},null,8,["onClick"]),M("img",{src:`${e}?w=1024&h=600`,style:{width:"100%",height:"100%"}},null,8,At)])))),128))]))])),_:1},8,["label"]),T(" 接收设备一体机 "),M("div",null,[Kt,T(" 班牌 "),M("div",zt,[b(S,{class:"is-confirmation-item confirmation-item-label",label:"一体机：",name:"aioMachineIds"},{default:_((()=>[b(x,{class:"tree-select","tree-checkable":"",multiple:"",value:C(a).createForm.aioMachineIds,"onUpdate:value":t[3]||(t[3]=e=>C(a).createForm.aioMachineIds=e),placeholder:"请选择一体机","allow-clear":"",treeData:o.signOptions,fieldNames:o.fieldNames},{title:_((e=>[Jt,D(" "+U(e.showName),1)])),_:1},8,["value","treeData","fieldNames"])])),_:1})])])])):T("v-if",!0)}}},[["__scopeId","data-v-02f606ba"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/paintedScreen.vue"]]);var Xt=e({__name:"campusMaterials",setup(e){const t=y("setCreateView")();return(e,a)=>{const s=h("a-checkbox"),i=h("a-form-item");return g(),w(i,{name:"isSync"},{default:_((()=>[b(s,{checked:C(t).createForm.isSync,"onUpdate:checked":a[0]||(a[0]=e=>C(t).createForm.isSync=e)},{default:_((()=>[D("添加为校园门户内容素材")])),_:1},8,["checked"])])),_:1})}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/campusMaterials.vue"]]);const Qt={class:"create-form"};var Wt=e({__name:"index",props:{rules:{type:Object,default:()=>{}}},setup(e){const t=f(),a=y("setCreateView")(),s=v({tip:"发布中...",componentObj:{title:ee,source:_t,author:wt,whether:se,lossTime:kt,coverImg:ht,richText:te,enclosure:ne,equipment:le,identitys:gt,posterImg:Dt,sourceEdit:Lt,whetherTop:me,galleryText:ft,recruitment:bt,releaseType:Z,releaseTime:de,lossLocation:Ct,contactPhone:Ft,contactPerson:Tt,paintedScreen:$t,campusMaterials:Xt,scopeNotification:ae,circulationPersonnel:Pt}});return a.createFormRef=t,(e,i)=>{const o=h("a-form"),r=h("a-spin");return g(),w(r,{tip:s.tip,spinning:C(a).createLoading},{default:_((()=>{var e;return[M("div",Qt,[(null==(e=C(a).formCpmt)?void 0:e.length)?(g(),w(o,{key:0,layout:"vertical",ref_key:"createFormRef",ref:t,rules:C(a).rules,model:C(a).createForm},{default:_((()=>[(g(!0),F(I,null,V(C(a).formCpmt,((e,t)=>(g(),w(O(s.componentObj[e]),{key:t})))),128))])),_:1},8,["rules","model"])):T("v-if",!0)])]})),_:1},8,["tip","spinning"])}}},[["__scopeId","data-v-b776287a"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/createForm/index.vue"]]);const Gt=[{title:"序号",width:60,dataIndex:"index",fixed:"left"},{title:"标题",dataIndex:"title",path:!0,filter:!0,key:"id",width:150,ellipsis:!0,showSorterTooltip:!0},{title:"发布人",width:100,dataIndex:"identityUserName",key:"id",ellipsis:!0,showSorterTooltip:!0},{title:"通知人员",dataIndex:"notifyUsersInfo",key:"id",width:150,ellipsis:!0,showSorterTooltip:!0},{title:"接收设备",dataIndex:"notifyDevicesInfo",key:"id",width:150},{title:"已浏览",width:80,dataIndex:"viewUsers",key:"id"},{title:"已确认",width:80,dataIndex:"confirmUsers",key:"id"},{title:"状态",width:80,dataIndex:"statusRemark",key:"id"},{title:"发布时间",dataIndex:"timerDate",key:"id",width:"200px"},{title:"是否置顶",dataIndex:"isTop",width:100,key:"id"},{title:"操作",dataIndex:"operation",width:220,fixed:"right"}],Zt=["title","richText","enclosure","scopeNotification","whether","whetherTop","releaseTime","equipment","campusMaterials"],ea=["releaseType","title","galleryText","enclosure","scopeNotification","whether","whetherTop","releaseTime","equipment","campusMaterials"];const ta=(e=>(j("data-v-c454ecd8"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var aa=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({createForm:{isSync:!1,title:"",content:null,attachments:[],rolls:[],depts:[],details:[],notifyUsersInfo:"",notifyDevicesInfo:[],isNeedConfirm:!1,isTop:!1,isTimer:!1,timerDate:"",brandIds:[],isDominateScreen:!1,dominateEndTime:"",dominateStartTime:"",dominateStartTimes:[],contentType:"0",identifier:"announcement",releaseType:"announcement"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],notifyUsersInfo:[{required:!0,message:"请选择"}],isTop:[{required:!0,message:"请选择"}],isTimer:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}],dominateStartTimes:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"AnnounCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:ea,formCpmt:Zt}),(t.copyId||t.templateId)&&await mt(t).then((e=>{t.copyId=0;const{details:a,content:s,title:i}=e;t.isTemplate?(t.createForm.contentType=1,t.createForm.title=i,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):(t.createForm.content=s,t.createForm.title=i)}))})),(e,a)=>{const s=h("a-layout-header"),r=h("a-layout-content"),l=h("a-layout"),n=h("a-button"),c=h("a-layout-footer");return g(),w(l,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(s,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[ta,D(" 发布通知公告 ")])])),_:1}),b(l,{class:"news-release-layout-content"},{default:_((()=>[b(l,null,{default:_((()=>[b(r,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(c,null,{default:_((()=>[b(n,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(n,{type:"primary",style:{"margin-left":"10px"},loading:C(t).createLoading,onClick:a[0]||(a[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-c454ecd8"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/announcement/create.vue"]]);const sa=["title","richText","coverImg","releaseTime","identitys","equipment"],ia=["releaseType","title","galleryText","coverImg","releaseTime","identitys","equipment"];const oa=(e=>(j("data-v-354b4bfa"),e=e(),P(),e))((()=>M("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var ra=e({__name:"create",setup(e){const t=y("setCreateView")(),a=v({title:"发布校园风采",createForm:{id:"",title:"",content:null,rolls:[],depts:[],identitys:[],details:[],coverImg:"",notifyDevicesInfo:[],isCheckedEltern:!1,isCheckedEmployee:!1,isTimer:!1,timerDate:"",brandIds:[],isDominateScreen:!1,dominateEndTime:"",dominateStartTime:"",dominateStartTimes:[],contentType:"0",identifier:"campusStyle",releaseType:"campusStyle"}}),s=v({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}],isTimer:[{required:!0,message:"请选择"}],releaseType:[{required:!0,message:"请选择"}],dominateStartTimes:[{required:!0,message:"请选择"}],timerDate:[{required:!0,message:"请选择"}]}),i=()=>{ct({cpt:"CampusStylesCreate",setCreateView:t})},o=()=>{t.isShowCreateView=!1,t.previewBack=!1};return L((async()=>{t.createForm=x(a.createForm);dt({setCreateView:t,rules:s,formCpmtType:ia,formCpmt:sa}),(t.eidtId||t.templateId)&&(t.eidtId&&(a.title="编辑校园风采"),await mt(t).then((e=>{const{details:a,content:s,isCheckedEltern:i,isCheckedEmployee:o,isCheckedStudent:r}=e;t.createForm={...t.createForm,...e},t.isTemplate?(t.createForm.contentType=1,a.forEach((e=>e.contentImg=e.coverImg)),t.createForm.details=a):t.createForm.content=s;const l=[];o&&i&&r?t.createForm.identitys=[0,1,2]:(i&&l.push(2),o&&l.push(1),r&&l.push(0),t.createForm.identitys=[...l])})))})),(e,s)=>{const r=h("a-layout-header"),l=h("a-layout-content"),n=h("a-layout"),c=h("a-button"),d=h("a-layout-footer");return g(),w(n,{class:"yd-layout",style:{position:"relative"}},{default:_((()=>[b(r,{class:"yd-layout-header"},{default:_((()=>[M("span",{class:"back",onClick:o},[oa,D(" "+U(a.title),1)])])),_:1}),b(n,{class:"news-release-layout-content"},{default:_((()=>[b(n,null,{default:_((()=>[b(l,{class:"yd-layout-content"},{default:_((()=>[b(C(Wt))])),_:1})])),_:1})])),_:1}),b(d,null,{default:_((()=>[b(c,{loading:C(t).createLoading,onClick:i},{default:_((()=>[D(" 预览 ")])),_:1},8,["loading"]),b(c,{loading:C(t).createLoading,type:"primary",style:{"margin-left":"10px"},onClick:s[0]||(s[0]=e=>C(nt)(C(t)))},{default:_((()=>[D(" 发布 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-354b4bfa"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/views/notice/components/campusStyles/create.vue"]]);export{aa as A,Wt as C,Ie as N,Ne as P,Le as R,nt as a,ct as b,mt as c,Pe as d,ra as e,Re as f,it as g,rt as h,dt as i,ot as j,Gt as k,tt as l,Oe as m,st as p};
