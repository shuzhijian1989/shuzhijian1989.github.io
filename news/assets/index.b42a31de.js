import"./vue.a2f518ee.js";import{m as e,U as a}from"./ant-design-vue.db4d48e3.js";import{_ as i,n as t,bM as s,bN as l,bO as n,bP as r,bQ as d}from"./index.7061e8ea.js";import{e as o,r as c,q as m,w as u,f as p,b8 as b,o as v,a as g,b as h,c as f,a3 as y,O as k,F as w,a8 as R,a2 as _,a5 as C,a9 as j,a7 as x,b5 as S,b4 as F}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const U=e=>(S("data-v-d9f7abcc"),e=e(),F(),e),L={class:"main"},M={class:"head"},I={class:"remindContent"},W={key:0},E={key:1,class:"remindMain"},N={class:"count_down_main"},T={class:"count_down_day"},O=["src"],q={class:"reminder_content"},$={class:"creator"},A={class:"creator_name"},D={class:"creator_data"},B={key:0,class:"addMusic"},H=U((()=>h("span",null,"添加音乐：",-1))),P=U((()=>h("span",{class:"upBtn"},"点击上传",-1))),z={key:1},G={class:"tipText"},Q=U((()=>h("span",{class:"tipTime"},"分钟",-1))),J={class:"allChoice"},K=U((()=>h("span",null,"展示时长",-1))),V=U((()=>h("span",{class:"exhibition"},"分钟",-1))),X={class:"choice"},Y=U((()=>h("span",null,"选择提示范围：",-1))),Z={key:0},ee={class:"footer"},ae={key:0},ie={key:1},te=o({name:"classRemind"});var se=i(Object.assign(te,{setup(i){const o=["每周一","每周二","每周三","每周四","每周五","每周六","每周日"],S=c([{value:"2",label:"下课提醒"},{value:"1",label:"上课提醒"},{value:"3",label:"起床提醒"},{value:"4",label:"睡觉提醒"},{value:"5",label:"午休开始提醒"},{value:"6",label:"午休结束提醒"}]),F=c([{value:"1",label:"文字+语音提醒"},{value:"2",label:"文字提醒"},{value:"3",label:"语音提醒"}]),U=[{required:!0,message:"可输入1-10之间数字"},{type:"number",message:"可输入1-10之间数字",trigger:"blur",transform(e){if(e){const a=Number(e);return!!/^[1-9]$|^0[1-9]$|^10$/.test(a)&&a}}}],te=[{required:!0,message:"可输入0-5之间数字"},{type:"number",message:"可输入0-5之间数字",trigger:"blur",transform(e){if(e){const a=Number(e);return!!/^[0-5]$/.test(a)&&a}}}],se=(e,a)=>le.checkedList.length?ne.createRemind.remindTime?Promise.resolve():Promise.reject(new Error("请选择提示时间")):Promise.reject(new Error("请选择提示时间星期")),le=m({indeterminate:!1,checkAll:!1,checkedList:[]}),ne=m({actionUrl:`http://192.168.3.158:9528${t.fileUpload}`,bodyStyle:{height:"241px",width:"394px",boxShadow:"0px 2px 8px 0px rgba(0, 0, 0, 0.15)",borderRadius:"4px",background:"#FFFFFF"},visible:!1,isShow:!1,title:"添加提醒",range:"",videoUrl:"",showWeek:!1,hintContent:"上课了，请大家回到教室",signOptions:[],fileList:[],defaultFileList:[],remindInfo:[],createRemind:{type:"1",remindMode:"1",number:"",musicUrl:"",musicName:"",duration:"",scope:"1",remindWeek:"",remindTime:"",time:"",deviceIds:[]}}),re={label:"name",value:"id",children:"children"},de=async e=>{if(ne.visible=!0,e){ne.title="编辑提醒",ne.isShow=!0;const{data:a}=await s({id:e});ne.createRemind={...a},be(ne.createRemind.type),ne.createRemind.deviceIds=ne.createRemind.details.map(((e,a)=>e.deviceId)),le.checkedList=ne.createRemind.remindWeek.split(",")}else ne.title="添加提醒",ne.isShow=!1,ne.fileList=[],ne.createRemind={},ne.createRemind.type="1",ne.createRemind.remindMode="1",ne.createRemind.scope="1",le.checkedList=[],be(ne.createRemind.type)},oe=c(),ce=()=>{ne.visible=!1},me=a=>{let i=[...a.fileList];i=i.slice(-1),i=i.map((a=>{var i,t,s,l;if(a.response&&(a.url=a.response.url),0===(null==(i=a.response)?void 0:i.code)){const e=a.response.data[0];ne.createRemind.musicUrl=e.url,ne.createRemind.musicName=e.name}else 0!==(null==(t=a.response)?void 0:t.code)&&(null==(s=a.response)?void 0:s.message)&&e.error(null==(l=a.response)?void 0:l.message);return a})),ne.fileList=i},ue=e=>{ne.fileList=[],ne.defaultFileList=[],ne.createRemind.musicUrl="",ne.createRemind.musicName=""},pe=i=>{const t="audio/mpeg"===i.type;t||e.error("只能上传mp3格式的音乐!");const s=i.size/1024/1024<5;return s||e.error("文件大小必须小于5MB!"),!(!t||!s)||a.LIST_IGNORE},be=e=>{switch(e){case"1":ne.hintContent="上课了，请大家回到教室",ne.showWeek=!1;break;case"2":ne.hintContent="下课了，请大家休息",ne.showWeek=!1;break;case"3":ne.hintContent="天亮了，同学们该起床了",ne.showWeek=!0;break;case"4":ne.hintContent="要熄灯了，请同学们上床睡觉，晚安！",ne.showWeek=!0;break;case"5":ne.hintContent="午休开始了，请同学们午休",ne.showWeek=!0;break;case"6":ne.hintContent="午休结束了，同学们该起床了",ne.showWeek=!0}},ve=async()=>{const{data:e}=await n();ne.remindInfo=e},ge=()=>{oe.value.validate().then((async()=>{ne.createRemind.remindWeek=le.checkedList.join(","),await r(ne.createRemind),e.success("添加成功！"),ne.visible=!1,ve()})).catch((e=>{}))},he=async()=>{const a={id:ne.createRemind.id};await d(a),e.success("删除成功！"),ne.visible=!1,ve()},fe=e=>{Object.assign(le,{checkedList:e.target.checked?o:[],indeterminate:!1})};u((()=>le.checkedList),(e=>{le.indeterminate=!!e.length&&e.length<o.length,le.checkAll=e.length===o.length}));const ye=e=>{switch(e){case"1":return{img:"/image/remind_bg1or2.png",content:"上课了，请大家回到教室",titleColor:"#9F50AC",bgColor:"#E9E8F9",title:"上课提醒"};case"2":return{img:"/image/remind_bg1or2.png",content:"下课了，请大家休息",titleColor:"#E78648",bgColor:"#FFF3CF",title:"下课提醒"};case"3":return{img:"/image/remind_bg3.png",content:"天亮了，同学们该起床了",titleColor:"#2EA8D9",bgColor:"#D4F4FF",title:"起床提醒"};case"4":return{img:"/image/remind_bg4.png",content:"要熄灯了，请同学们上床睡觉，晚安！",titleColor:"#2E547A",bgColor:"rgba(46, 84, 122, 0.08)",title:"睡觉提醒"};case"5":return{img:"/image/remind_bg5.png",content:"午休开始了，请同学们午休",titleColor:"#3D91C7",bgColor:"#D8EEFB",title:"午休开始提醒"};case"6":return{img:"/image/remind_bg6.png",content:"午休结束了，同学们该起床了",titleColor:"#945336",bgColor:"#F6E2D9",title:"午休结束提醒"}}};return p((()=>{(async()=>{const{data:e}=await l({direction:""});ne.signOptions=e})(),ve()})),(e,a)=>{const i=b("plus-outlined"),t=b("a-button"),s=b("a-empty"),l=b("a-col"),n=b("a-row"),r=b("a-select"),d=b("a-form-item"),c=b("a-input"),m=b("a-upload"),u=b("a-checkbox"),p=b("a-checkbox-group"),ve=b("a-time-picker"),ke=b("a-radio"),we=b("a-radio-group"),Re=b("a-space"),_e=b("home-outlined"),Ce=b("a-tree-select"),je=b("a-form"),xe=b("a-drawer");return v(),g("div",L,[h("div",M,[f(t,{onClick:a[0]||(a[0]=e=>de()),type:"primary"},{icon:y((()=>[f(i)])),default:y((()=>[k("添加提醒")])),_:1})]),h("div",I,[ne.remindInfo.length?(v(),g("div",E,[f(n,{gutter:16},{default:y((()=>[(v(!0),g(w,null,R(ne.remindInfo,(e=>(v(),_(l,{span:6,key:e.id,onClick:a=>de(e.id)},{default:y((()=>[h("div",null,[h("div",N,[h("div",T,[h("img",{src:ye(e.type).img,alt:"图片",class:"reminder_bg"},null,8,O),h("div",{class:"reminder_title",style:C({color:ye(e.type).titleColor,background:ye(e.type).bgColor})},j(ye(e.type).title),5),h("div",q,j(ye(e.type).content),1)]),h("div",$,[k(" 创建人："),h("span",A,j(e.createBy),1),h("span",D,j(e.createTime),1)])])])])),_:2},1032,["onClick"])))),128))])),_:1})])):(v(),g("div",W,[f(s,{image:"image/empty.png",description:"暂无数据","image-style":{width:"100%",height:"180px"}})]))]),x(" 提醒抽屉 "),f(xe,{class:"drawerButton",destroyOnClose:"",visible:ne.visible,"onUpdate:visible":a[12]||(a[12]=e=>ne.visible=e),maskClosable:!1,title:ne.title},{footer:y((()=>[h("div",ee,[ne.isShow?x("v-if",!0):(v(),g("div",ae,[f(t,{style:{"margin-right":"8px"},onClick:ce},{default:y((()=>[k("取消")])),_:1}),f(t,{type:"primary",onClick:ge},{default:y((()=>[k("确认")])),_:1})])),ne.isShow?(v(),g("div",ie,[f(t,{danger:"",onClick:he},{default:y((()=>[k("删除提醒")])),_:1})])):x("v-if",!0)])])),default:y((()=>[f(je,{layout:"vertical",ref_key:"formRef",ref:oe,model:ne.createRemind,name:"remind"},{default:y((()=>[f(d,{label:"选择提醒类型",name:"type",rules:[{required:!0,message:"请选择提醒类型",trigger:"change"}]},{default:y((()=>[f(r,{value:ne.createRemind.type,"onUpdate:value":a[1]||(a[1]=e=>ne.createRemind.type=e),onChange:be,options:S.value,disabled:ne.isShow},null,8,["value","options","disabled"])])),_:1}),f(d,{label:"选择提醒方式",name:"remindMode",rules:[{required:!0,message:"请选择提醒方式",trigger:"change"}]},{default:y((()=>[f(r,{value:ne.createRemind.remindMode,"onUpdate:value":a[2]||(a[2]=e=>ne.createRemind.remindMode=e),options:F.value,disabled:ne.isShow},null,8,["value","options","disabled"])])),_:1}),f(d,null,{default:y((()=>[h("div",null,[k(" 提示语： "),h("span",null,j(ne.hintContent),1)])])),_:1}),"2"!==ne.createRemind.remindMode?(v(),_(d,{key:0,label:"语音播报次数",name:"number",rules:[{required:!0,message:"可输入1-10之间数字（语音播报次数指：提示语音播报次数）"},{type:"number",message:"可输入1-10之间数字（语音播报次数指：提示语音播报次数）",trigger:"blur",transform(e){if(e){var a=Number(e);return!!/^[1-9]$|^0[1-9]$|^10$/.test(a)&&a}}}]},{default:y((()=>[f(c,{value:ne.createRemind.number,"onUpdate:value":a[3]||(a[3]=e=>ne.createRemind.number=e),placeholder:"请输入",maxlength:2,disabled:ne.isShow,autoComplete:"off"},null,8,["value","disabled"])])),_:1},8,["rules"])):x("v-if",!0),"2"!==ne.createRemind.remindMode?(v(),_(d,{key:1},{default:y((()=>[ne.isShow?x("v-if",!0):(v(),g("div",B,[H,f(m,{"file-list":ne.fileList,"onUpdate:fileList":a[4]||(a[4]=e=>ne.fileList=e),name:"file",action:ne.actionUrl,"max-count":1,limit:1,accept:"audio/mpeg",onChange:me,onRemove:ue,"before-upload":pe},{default:y((()=>[f(t,{disabled:ne.isShow},{default:y((()=>[P])),_:1},8,["disabled"])])),_:1},8,["file-list","action"])])),ne.isShow?(v(),g("div",z,[h("div",null,[k(" 音乐："),h("span",null,j(ne.createRemind.musicName),1)])])):x("v-if",!0)])),_:1})):x("v-if",!0),ne.showWeek?x("v-if",!0):(v(),_(d,{key:2,label:"选择提示时间",name:"time",rules:"1"===ne.createRemind.type?U:te},{default:y((()=>[h("span",G,j("1"===ne.createRemind.type?"上课前":"下课后"),1),f(c,{style:{width:"80%",margin:"0px 8px"},value:ne.createRemind.time,"onUpdate:value":a[5]||(a[5]=e=>ne.createRemind.time=e),placeholder:"请输入",maxlength:2,disabled:ne.isShow,autoComplete:"off"},null,8,["value","disabled"]),Q])),_:1},8,["rules"])),ne.showWeek?(v(),_(d,{key:3,label:"选择提示时间",name:"weekTime",rules:[{validator:se,required:!0}]},{default:y((()=>[h("div",J,[f(u,{disabled:ne.isShow,checked:le.checkAll,"onUpdate:checked":a[6]||(a[6]=e=>le.checkAll=e),indeterminate:le.indeterminate,onChange:fe},{default:y((()=>[k(" 全选 ")])),_:1},8,["disabled","checked","indeterminate"])]),f(p,{value:le.checkedList,"onUpdate:value":a[7]||(a[7]=e=>le.checkedList=e),options:o,disabled:ne.isShow},null,8,["value","disabled"]),f(ve,{style:{width:"100%"},value:ne.createRemind.remindTime,"onUpdate:value":a[8]||(a[8]=e=>ne.createRemind.remindTime=e),valueFormat:"HH:mm",format:"HH:mm",disabled:ne.isShow,placeholder:"选择时间"},null,8,["value","disabled"])])),_:1},8,["rules"])):x("v-if",!0),"3"!==ne.createRemind.remindMode?(v(),_(d,{key:4,label:"设置提示时长",name:"duration",rules:U},{default:y((()=>[K,f(c,{style:{width:"77%",margin:"0px 8px"},value:ne.createRemind.duration,"onUpdate:value":a[9]||(a[9]=e=>ne.createRemind.duration=e),placeholder:"请输入",maxlength:2,disabled:ne.isShow,autoComplete:"off"},null,8,["value","disabled"]),V])),_:1})):x("v-if",!0),f(d,null,{default:y((()=>[h("div",X,[f(Re,{align:"center"},{default:y((()=>[Y,f(we,{value:ne.createRemind.scope,"onUpdate:value":a[10]||(a[10]=e=>ne.createRemind.scope=e),name:"range",disabled:ne.isShow},{default:y((()=>[f(ke,{value:"1"},{default:y((()=>[k("全部班牌")])),_:1}),f(ke,{value:"3"},{default:y((()=>[k("指定班牌")])),_:1})])),_:1},8,["value","disabled"])])),_:1})]),"3"===ne.createRemind.scope?(v(),g("div",Z,[f(Ce,{disabled:ne.isShow,style:{width:"100%"},"tree-checkable":"",multiple:"",value:ne.createRemind.deviceIds,"onUpdate:value":a[11]||(a[11]=e=>ne.createRemind.deviceIds=e),placeholder:"请选择","allow-clear":"","tree-data":ne.signOptions,fieldNames:re,maxTagCount:2},{title:y((e=>[f(_e,{class:"icon-yellow"}),k(" "+j(e.name),1)])),_:1},8,["disabled","value","tree-data"])])):x("v-if",!0)])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-d9f7abcc"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/classRemind/index.vue"]]);export{se as default};
