import"./vue.a2f518ee.js";import{u as e,a as t}from"./vue-router.907b547c.js";import{_ as a}from"./index.272083a4.js";import{s as o,n as s,_ as i}from"./index.7061e8ea.js";import{g as l}from"./FilterDropdown.5a779a00.js";import{e as r,v as n}from"./element-plus.8ba44712.js";import{q as p,o as c,a as d,b as u,c as m,a5 as v,a4 as f,F as y,a7 as b,a8 as D,a9 as g,O as k,b5 as h,b4 as x,y as I,w as T,f as j,b8 as _,a2 as w,a3 as L,H as V,u as C,n as F}from"./@vue.919ff404.js";import"./ant-design-vue.db4d48e3.js";import"./@babel.6d5f88cb.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./dayjs.49e29cb2.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";import"./@vueuse.66569c4a.js";import"./@element-plus.8b57b6bd.js";const S=e=>(h("data-v-9427b844"),e=e(),x(),e),N={class:"approval_node"},O={class:"item-left"},B={class:"user time"},E=S((()=>u("i",{class:"status_icon iconfont icon-richengwancheng",style:{color:"#00b781"}},null,-1))),U={class:"user"},A={class:"user time"},P={key:1,class:"user"},R={key:2,class:"user"},J={class:"user"},z={class:"user time"},K={style:{display:"flex","margin-top":"10px"}},q={class:"user"},M={key:0},$={class:"comment"},G={key:1},H=S((()=>u("br",null,null,-1))),Q={class:"user text-align"},W={key:0,class:"user time"},X={class:"user"},Y={key:0},Z={class:"comment"},ee={class:"user time"};var te=i({__name:"node",props:{approvalDrawer:{type:Boolean,default:!1},item:{type:Object,default:()=>{}},approvalDetails:{type:Object,default:()=>{}},index:{type:Number,default:0}},setup(e){const t=p({avatars:{ROOT:"promoter",APPROVAL:"approval",CC:"cc",REVOKE:"approval"},outcomeColor:{color:"#00B781",color0:"#fa2f14",color1:"#FAAD14FF",color2:"#00B781",color7:"#FAAD14FF",icon:"icon-richengwancheng",icon0:"icon-Shape1",icon1:"icon-qingjia",icon2:"icon-Shape3"}});return(a,o)=>{const s=r;return c(),d("div",N,[u("div",O,[m(s,{class:"avatar-item approval",shape:"square",src:`/image/${t.avatars[e.item.flowElementType]}.png`,style:v({borderColor:7==e.item.outcome?"":t.outcomeColor["color"+e.item.outcome]})},null,8,["src","style"]),u("div",{class:f(["node",{active:e.approvalDetails.flowElementList.length-1!==e.index,active_status:!0}])},["REVOKE"===e.item.flowElementType?(c(),d(y,{key:0},[7!==e.item.outcome?(c(),d("i",{key:0,class:f(["status_icon iconfont",t.outcomeColor["icon"+e.item.outcome]]),style:v({color:t.outcomeColor["color"+e.item.outcome]})},null,6)):b("v-if",!0),(c(!0),d(y,null,D(e.item.userInfoList,(t=>(c(),d("div",{key:t.id},[u("div",null,g(t.name)+"（"+g(e.item.name)+"）",1),u("div",B,g(t.apprTime),1)])))),128))],64)):(c(),d(y,{key:1},[u("div",null,g(e.item.name),1),b("  发起人 "),"ROOT"===e.item.flowElementType?(c(),d(y,{key:0},[E,(c(!0),d(y,null,D(e.item.userInfoList,(e=>(c(),d("div",{key:e.id},[u("div",U,g(e.name),1),u("div",A,g(e.apprTime),1)])))),128))],64)):(c(),d(y,{key:1},[b(" 步骤icon "),7!==e.item.outcome?(c(),d("i",{key:0,class:f(["status_icon iconfont",t.outcomeColor["icon"+e.item.outcome]]),style:v({color:t.outcomeColor["color"+e.item.outcome]})},null,6)):b("v-if",!0),b(" 会签状态 "),"CC"===e.item.flowElementType&&e.item.apprUserNum?(c(),d("div",P," 共抄送"+g(e.item.apprUserNum)+"人 ",1)):b("v-if",!0),"CC"!==e.item.flowElementType&&e.item.modeCode&&e.item.apprUserNum>1?(c(),d("div",R,g(e.item.apprUserNum)+"人"+g(e.item.modeCode),1)):b("v-if",!0),e.item.children.length?(c(!0),d(y,{key:3},D(e.item.children,(e=>(c(),d(y,null,[(c(!0),d(y,null,D(e.userInfoList,(e=>(c(),d("div",{key:e.id},[u("div",J,g(e.name),1),u("div",z,g(e.apprTime),1)])))),128))],64)))),256)):(c(),d(y,{key:4},[e.item.userInfoList.length>1||"CC"==e.item.flowElementType?(c(!0),d(y,{key:0},D(e.item.userInfoList,((a,o)=>(c(),d("div",{key:a.id,class:f({approval_node_ncomment:!a.comment})},[a.comment?(c(),d(y,{key:0},[u("div",K,[m(s,{style:{"margin-top":"0"},class:"image-item",shape:"square",src:a.avatar||"/image/approval1.png"},null,8,["src"]),u("div",null,[u("span",null,g(a.name),1),a.outcome?(c(),d("span",{key:0,style:v({color:t.outcomeColor["color"+e.item.outcome]})}," （"+g(a.outcomeCode)+"） ",5)):b("v-if",!0),u("div",q,g(a.apprTime),1)])]),7!==a.outcome&&a.comment?(c(),d("div",M,[u("span",$,g(a.comment),1)])):b("v-if",!0)],64)):(c(),d("div",G,[m(s,{class:"image-item",shape:"square",src:a.avatar||"/image/approval1.png"},null,8,["src"]),H,u("span",Q,g(a.name),1),o?b("v-if",!0):(c(),d("div",W,g(a.apprTime),1))]))],2)))),128)):1==e.item.userInfoList.length?(c(),d(y,{key:1},[u("span",X,[k(g(e.item.userInfoList[0].name)+" ",1),e.item.userInfoList[0].outcomeCode&&7!==e.item.userInfoList[0].outcome?(c(),d("span",{key:0,style:v({color:t.outcomeColor["color"+e.item.userInfoList[0].outcome]})}," （"+g(e.item.userInfoList[0].outcomeCode)+"） ",5)):b("v-if",!0)]),7!==e.item.userInfoList[0].outcome&&e.item.userInfoList[0].comment?(c(),d("div",Y,[u("span",Z,g(e.item.userInfoList[0].comment),1)])):b("v-if",!0),u("div",ee,g(e.item.userInfoList[0].apprTime),1)],64)):b("v-if",!0)],64))],64))],64))],2)])])}}},[["__scopeId","data-v-9427b844"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/toDo/node.vue"]]);const ae={class:"drawer"},oe={key:0,class:"demo-drawer__content"},se={class:"approval-item approval-peopl"},ie={class:"number"},le={class:"submit"},re={key:0,class:"handle"},ne={class:"approval-item approval-reason"},pe={class:"number"},ce={class:"number"},de={class:"approval-item approval-flow"},ue=(e=>(h("data-v-28baedd4"),e=e(),x(),e))((()=>u("h4",null,"流程",-1))),me={class:"timeline"};var ve=i({__name:"details",props:{detailId:{type:String,default:""},toDoFormVisible:{type:Boolean,default:!1}},emits:["update:toDoFormVisible"],setup(e,{emit:t}){const a=e,i=p({approvalLoading:!1,refuseTips:!0,current:0,peoplStatus:["refused","","passed","revoked"],approvalDetails:{id:"",status:0,title:"",procNo:"",flowElementList:[]}}),l=()=>{var e;i.approvalLoading=!0,(e={id:a.detailId},o({url:s.todoGetInfo,method:"get",params:e})).then((({data:e})=>{e.jsonData&&(e.jsonData=JSON.parse(e.jsonData)),i.approvalDetails=e,i.approvalLoading=!1}))},r=I((()=>{const{waitApprUserList:e}=i.approvalDetails,t=e.map((e=>e.name));return t.length?t.join("、"):""})),v=I((()=>e=>{var t;if(e.valueData&&Array.isArray(e.valueData)){return e.valueData.map((e=>e.name)).join("、")}if("DateTimeRange"===e.name){return JSON.parse(e.value).timeLength}if((null==(t=e.props.options)?void 0:t.length)&&!["DateTime"].includes(e.name)){let t="--";return e.props.options.forEach((a=>{a.id===e.value&&(t=a.name)})),t||e.value}return e.value||"--"}));return T((()=>a.toDoFormVisible),(e=>{e&&l()})),j((()=>{})),(e,o)=>{const s=_("a-avatar"),l=_("a-empty"),p=_("a-modal"),k=n;return c(),w(p,{class:"modelStyle",maskClosable:!1,visible:a.toDoFormVisible,"onUpdate:visible":o[0]||(o[0]=e=>a.toDoFormVisible=e),onCancel:o[1]||(o[1]=e=>t("update:toDoFormVisible",!1)),footer:null,title:"审批详情 ",width:"778px",bodyStyle:{maxHeight:"700px",overflow:"auto",padding:0}},{default:L((()=>{var e;return[V((c(),d("div",ae,[b(' v-if="approvalDetails?.id" '),(null==(e=i.approvalDetails)?void 0:e.id)?(c(),d("ul",oe,[u("li",se,[u("span",ie,"审批编号："+g(i.approvalDetails.procNo),1),u("h4",le,g(i.approvalDetails.title)+"提交的请假 ",1),1==i.approvalDetails.status?(c(),d("span",re,"等待"+g(r.value)+"处理",1)):b("v-if",!0),1!==i.approvalDetails.status?(c(),w(s,{key:1,class:"approval-peopl-status",src:`/image/${i.peoplStatus[i.approvalDetails.status]}.png`},null,8,["src"])):b("v-if",!0)]),u("li",ne,[(c(!0),d(y,null,D(i.approvalDetails.jsonData,(e=>(c(),d("div",{class:"item",key:e.id},[e.isKit?(c(!0),d(y,{key:0},D(e.children,(e=>(c(),d("div",{key:e.id},[u("span",pe,g(e.title),1),u("h5",null,g(v.value(e)),1)])))),128)):(c(),d(y,{key:1},[u("span",ce,g(e.title),1),u("h5",null,g(v.value(e)),1)],64))])))),128))]),u("li",de,[ue,u("ul",me,[(c(!0),d(y,null,D(i.approvalDetails.flowElementList,((e,t)=>(c(),d("li",{class:f(["timeline-item",{active_status:"ROOT"===e.flowElementType}]),key:t},[m(C(te),{item:e,index:t,approvalDetails:i.approvalDetails},null,8,["item","index","approvalDetails"])],2)))),128))])])])):(c(),w(l,{key:1,description:"暂无数据",image:"image/empty.png"}))])),[[k,i.approvalLoading]])]})),_:1},8,["visible"])}}},[["__scopeId","data-v-28baedd4"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/toDo/details.vue"]]);const fe={id:"scrllBox",style:{width:"103%","max-height":"500px","overflow-y":"overlay","padding-bottom":"24px"}},ye={class:"sponsorData"},be={class:"infoBoxParent"},De={style:{color:"rgba(0, 0, 0, 0.45)"}},ge={style:{color:"#000"}},ke={key:0},he={key:0,style:{color:"rgba(0, 0, 0, 0.45)"}},xe={style:{color:"#000"}},Ie={key:0},Te={class:"infoBox"},je={key:0},_e={class:"infoBox"},we={key:0,class:"reason"},Le={class:"procedure"},Ve={class:"procedureList"},Ce=(e=>(h("data-v-73cca601"),e=e(),x(),e))((()=>u("span",null,"流程：",-1))),Fe=["src"],Se={key:0,class:"noImg"},Ne={key:1,class:"iconfont icon-richengwancheng iconClass",style:{color:"var(--primary-color) !important"}},Oe={key:2,class:"iconfont icon-Shape11 iconClass",style:{color:"#fd4f45 !important"}},Be={class:"description"},Ee={key:0},Ue={key:1},Ae={key:2},Pe={key:3},Re={key:4},Je={key:5},ze={key:6},Ke={key:0},qe={class:"refuseReason"},Me={key:0,class:"iconfont icon-Shape3 iconClass",style:{color:"var(--primary-color) !important"}},$e={class:"description"},Ge={key:0};var He=i({__name:"detailsold",props:{detailId:{type:String,default:""},toDoFormVisible:{type:Boolean,default:!1}},emits:["update:toDoFormVisible"],setup(e,{emit:t}){const a=e,i=p({isInfo:1,comment:"",refuseTips:!1,infoData:{},current:1,openProcedure:!0,startTimeOrder:1,refuseLoading:!1,agreeLoading:!1,pagination:{pageNo:1,pageSize:10,total:0}}),l=()=>{i.openProcedure=!i.openProcedure},r=()=>{var e;(e={id:a.detailId},o({url:s.todoGetInfoOld,method:"get",params:e})).then((({data:e})=>{if(i.infoData=e,2===i.infoData.status)i.current=i.infoData.hiApprNodeList.length+i.infoData.ccList.length;else{const e=i.infoData.hiApprNodeList.filter((e=>e.apprTime));i.current=1===e.length?e.length:e.length-1}i.toDoFormVisible=!0,i.refuseTips=!1,F((()=>{document.getElementById("scrllBox").scrollTop=0}))}))};return T((()=>a.toDoFormVisible),(e=>{e&&r()})),(e,o)=>{const s=_("up-outlined"),r=_("down-outlined"),n=_("a-step"),p=_("a-steps"),m=_("a-modal");return c(),w(m,{class:"modelStyle",maskClosable:!1,visible:a.toDoFormVisible,"onUpdate:visible":o[0]||(o[0]=e=>a.toDoFormVisible=e),onCancel:o[1]||(o[1]=e=>t("update:toDoFormVisible",!1)),footer:null,title:"审批详情",width:"778px"},{default:L((()=>[b(' <template #footer>\r\n            <div v-if="state.isInfo === 1">\r\n                <a-button\r\n                    key="back"\r\n                    @click="toDoTask(0)"\r\n                    :loading="state.refuseLoading"\r\n                    >拒绝</a-button\r\n                >\r\n                <a-button\r\n                    key="back"\r\n                    type="primary"\r\n                    @click="toDoTask(2)"\r\n                    :loading="state.agreeLoading"\r\n                    >同意</a-button\r\n                >\r\n            </div>\r\n        </template> '),u("div",fe,[b(" 待办信息 "),u("div",ye,[u("div",be,[u("span",De,[k(" 发起人： "),u("span",ge,g(i.infoData.name),1),i.infoData.dept&&2!==i.infoData.identity?(c(),d("span",ke,g("("+i.infoData.dept+")"),1)):b("v-if",!0)]),2===i.infoData.identity&&i.infoData.apprJson?(c(),d("span",he,[k("请假学生： "),u("span",xe,g(i.infoData.apprJson.student),1),i.infoData.dept?(c(),d("span",Ie,g("("+i.infoData.dept+")"),1)):b("v-if",!0)])):b("v-if",!0)]),u("div",Te,[k(" 请假时间： "),i.infoData.apprJson?(c(),d("span",je,g(i.infoData.apprJson.startTime)+" - "+g(i.infoData.apprJson.endTime),1)):b("v-if",!0)]),u("div",_e,[k(" 请假事由： "),i.infoData.apprJson?(c(),d("span",we,g(i.infoData.apprJson.reason),1)):b("v-if",!0)])]),b(" 待办流程 "),u("div",Le,[u("div",Ve,[Ce,!1===i.openProcedure?(c(),w(s,{key:0,style:{color:"var(--primary-color)"},onClick:l})):b("v-if",!0),!0===i.openProcedure?(c(),w(r,{key:1,style:{color:"var(--primary-color)"},onClick:l})):b("v-if",!0)]),!0===i.openProcedure?(c(),w(p,{key:0,direction:"vertical",current:i.current,class:"procedureSteps"},{default:L((()=>{var t;return[(c(!0),d(y,null,D(i.infoData.hiApprNodeList,((e,t)=>(c(),w(n,{title:0===t?"发起申请":"审批人",key:e},{icon:L((()=>[u("div",{class:f(["procedureIcon",2===i.infoData.status||1!==e.status&&e.status&&7!==e.status?"borderIcon":0===e.status?"reasonBorder":""])},[u("img",{src:e.avatar,alt:""},null,8,Fe),""!==e.avatar&&e.avatar||!e.userName?b("v-if",!0):(c(),d("div",Se,g(e.userName.slice(-2)),1)),2===i.infoData.status||1!==e.status&&e.status&&7!==e.status?(c(),d("i",Ne)):b("v-if",!0),0===e.status?(c(),d("i",Oe)):b("v-if",!0)],2)])),description:L((()=>[u("div",Be,[u("span",null,[k(g(e.userName)+" ",1),0==e.status?(c(),d("span",Ee,g("（已拒绝）"))):b("v-if",!0),1==e.status?(c(),d("span",Ue,g("（待审批）"))):b("v-if",!0),2==e.status?(c(),d("span",Ae,g("（已同意）"))):b("v-if",!0),3==e.status?(c(),d("span",Pe,g("（撤销）"))):b("v-if",!0),4==e.status?(c(),d("span",Re,g("（已回退）"))):b("v-if",!0),5==e.status?(c(),d("span",Je,g("（提交申请）"))):b("v-if",!0),6==e.status?(c(),d("span",ze,g("（重新提交）"))):b("v-if",!0)]),u("time",null,g(e.apprTime),1)]),0===e.status&&(e.comment||i.infoData.deleteReason)?(c(),d("div",Ke,g("拒绝理由:"+e.comment||i.infoData.deleteReason),1)):b("v-if",!0),u("div",qe,g(e.title),1)])),_:2},1032,["title"])))),128)),b(" 抄送人 "),(null==(t=i.infoData.ccList)?void 0:t.length)?(c(),w(n,{key:0,title:"抄送人"},{icon:L((()=>[u("div",{class:f(["procedureIcon",2===i.infoData.status?"borderIcon":""])},[u("i",{class:f([2===i.infoData.status?"iconFont":"","iconfont icon-a-bianzu9 iconFontNo"])},null,2),2===i.infoData.status?(c(),d("i",Me)):b("v-if",!0)],2)])),description:L((()=>[u("div",$e,[(c(!0),d(y,null,D(i.infoData.ccList,(t=>(c(),d("div",{key:t},[u("span",null,g(t.name),1),e.idx!==i.infoData.ccList.length-1?(c(),d("span",Ge,"   ")):b("v-if",!0)])))),128))])])),_:1})):b("v-if",!0)]})),_:1},8,["current"])):b("v-if",!0),b(' <div class="refuse" v-if="state.isInfo === 1">\r\n                    <a-divider style="border-color: #d9d9d9" dashed />\r\n                    <p>拒绝理由：</p>\r\n                    <a-textarea\r\n                        show-count\r\n                        :maxlength="300"\r\n                        v-model:value="state.comment"\r\n                        placeholder="请输入拒绝理由"\r\n                        :rows="4"\r\n                        @change="refuseChang"\r\n                    />\r\n                    <span v-if="state.refuseTips === true" style="color: red"\r\n                        ><i class="iconfont icon-Shape6"></i>\r\n                        请输入拒绝理由</span\r\n                    >\r\n                </div> ')])])])),_:1},8,["visible"])}}},[["__scopeId","data-v-73cca601"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/toDo/detailsold.vue"]]);const Qe=e=>(h("data-v-36160a2a"),e=e(),x(),e),We={class:"patrol_detail"},Xe={class:"hender"},Ye=Qe((()=>u("span",{class:"label"},"所属计划：",-1))),Ze={class:"contetn"},et=Qe((()=>u("li",null,"巡查地点",-1))),tt=Qe((()=>u("i",{class:"iconfont icon-dizhi",style:{color:"var(--primary-color)"}},null,-1))),at=Qe((()=>u("span",{class:"label"},"开始时间:",-1))),ot=Qe((()=>u("span",{class:"label"},"截止时间:",-1))),st=Qe((()=>u("span",{class:"label"},"任务状态:",-1)));var it=i({__name:"patrolDetails",props:{detailId:{type:String,default:""},toDopatrolVisible:{type:Boolean,default:!1}},emits:["update:toDopatrolVisible"],setup(e,{emit:t}){const a=e,i=p({toDopatrolVisible:!1,filtersstaus:[{text:"待巡查",color:"#faad14",value:0},{text:"已完成",color:"#00B781",value:1},{text:"已失效",color:"#d9d9d9",value:2},{text:"未到巡查时间",color:"#000000D9",value:3},{text:"已逾期",color:"#f5222d",value:4}],patrol:{typeName:"",businessName:"",projectName:"",startTime:"",endTime:"",status:0}}),l=()=>{var e;(e={id:a.detailId},o({url:s.todoPatrolDetail,method:"get",params:e})).then((({data:e})=>{i.patrol=e,i.toDopatrolVisible=!0})).catch((()=>{t("update:toDopatrolVisible",!1)}))};return T((()=>a.toDopatrolVisible),(e=>{e&&l()})),(e,a)=>{const o=_("a-badge"),s=_("a-modal");return c(),w(s,{class:"modelStyle",maskClosable:!1,visible:i.toDopatrolVisible,"onUpdate:visible":a[0]||(a[0]=e=>i.toDopatrolVisible=e),onCancel:a[1]||(a[1]=e=>t("update:toDopatrolVisible",!1)),footer:null,title:i.patrol.typeName+"详情",width:"420px"},{default:L((()=>{var e,t;return[u("div",We,[u("div",Xe,[Ye,u("span",null,g(i.patrol.projectName),1)]),u("div",Ze,[u("ul",null,[et,u("li",null,[tt,k(" "+g(i.patrol.businessName),1)]),u("li",null,[at,u("span",null,g(i.patrol.startTime),1)]),u("li",null,[ot,u("span",null,g(i.patrol.endTime),1)]),u("li",null,[st,m(o,{color:null==(e=i.filtersstaus[i.patrol.status])?void 0:e.color,text:null==(t=i.filtersstaus[i.patrol.status])?void 0:t.text},null,8,["color","text"])])])])])]})),_:1},8,["visible","title"])}}},[["__scopeId","data-v-36160a2a"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/toDo/patrolDetails.vue"]]);const lt={class:"toDo layout-header-radius"},rt=(e=>(h("data-v-8359d2b4"),e=e(),x(),e))((()=>u("span",null,"我的待办",-1))),nt={class:"toDoTable"},pt={key:0},ct={key:1,style:{display:"flex","align-items":"center"}},dt={key:1};var ut=i({__name:"index",setup(i){const r=e(),n=t(),v=p({filtersstaus:[{text:"全部",value:null,color:""},{text:"待办",value:1,color:"#FAAD14"},{text:"已办",value:2,color:"#BFBFBF"},{text:"逾期",value:3,color:"#f5222d"}],detailId:"",toDoTableLoging:!1,typeTableLoging:!1,isInfo:1,pagination:{pageNo:1,pageSize:10,total:0},toDoTable:[],toDoFormVisible:!1,toDoFormVisibleOld:!1,toDopatrolVisible:!1,comment:"",refuseTips:!1,infoData:{},current:1,stepList:[],openProcedure:!0,startTimeOrder:1,refuseLoading:!1,agreeLoading:!1}),f=[{title:"序号",key:"id",ellipsis:!0,customRender:({index:e})=>`${e+1}`,fixed:"left",width:"80px"},{title:"创建时间",ellipsis:!0,key:"startTime",dataIndex:"startTime",sorter:!0,width:"200px",sortDirections:["descend","ascend"]},{title:"名称",ellipsis:!0,dataIndex:"title",width:"250px"},{title:"状态",dataIndex:"status",key:"status",pathColor:!1,filterMultiple:!1,showSorterTooltip:!0,filterDropdown:e=>(e.selectedKeys.length?e.selectedKeys=e.selectedKeys[0]:e.selectedKeys="",l(e)),customFilterDropdown:!0,customFilterIcon:"caret-right-outlined",filters:v.filtersstaus},{title:"类型",ellipsis:!0,dataIndex:"type"},{title:"发起人",ellipsis:!0,dataIndex:"realName"},{title:"操作",ellipsis:!0,dataIndex:"operation",align:"right"}],y=(e,t,a)=>{switch(t.order){case"ascend":v.startTimeOrder=0,v.toDoTable=[];break;case"descend":v.startTimeOrder=1,v.toDoTable=[]}e.status&&(v.toDoTable.status=e.status[0]),v.pagination.pageNo=e.current,v.pagination.pageSize=e.pageSize,D()},D=()=>{v.toDoTableLoging=!0;const e={...v.pagination,type:v.toDoTable.status||0,startTimeOrder:v.startTimeOrder};var t;(t=e,o({url:s.todoPage,method:"post",data:t})).then((e=>{const{data:t}=e;v.toDoTable=t.list,v.pagination.total=t.total})).finally((()=>{v.toDoTableLoging=!1}))},g=()=>{const{id:e}=n.query;e?r.back():r.push({path:"/dashboard"})};return j((()=>{D()})),(e,t)=>{const o=_("a-layout-header"),s=_("a-badge"),i=_("a-button"),l=_("a-spin");return c(),d("div",lt,[b(" 返回 "),m(o,{class:"reset-layout-header layout-header-radius"},{default:L((()=>[u("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:g}),rt])),_:1}),b(" 待办表格 "),u("div",nt,[m(l,{spinning:v.toDoTableLoging},{default:L((()=>[m(a,{columns:f,dataSource:v.toDoTable,slots:["operation"],rowSelection:!1,totals:v.pagination,onOnSelectedRowKeys:y},{bodyCell:L((({column:e,record:t})=>["type"===e.dataIndex?(c(),d("div",pt,"请假")):b("v-if",!0),"status"===e.dataIndex?(c(),d("div",ct,[t.status?(c(),w(s,{key:0,color:v.filtersstaus[t.status].color,text:v.filtersstaus[t.status].text},null,8,["color","text"])):(c(),d("span",dt,"--"))])):b("v-if",!0),"operation"===e.dataIndex?(c(),w(i,{key:2,class:"button-link",type:"link",onClick:e=>{return a=2,o=t,v.comment="",v.refuseData="",v.isInfo=a,v.detailId=o.id,void("1"===o.type?v.toDoFormVisibleOld=!0:"patrol"===o.taskType&&(v.toDopatrolVisible=!0));var a,o}},{default:L((()=>[k(" 查看 ")])),_:2},1032,["onClick"])):b("v-if",!0)])),_:1},8,["dataSource","totals"])])),_:1},8,["spinning"])]),b(" 待办弹框 "),m(ve,{detailId:v.detailId,toDoFormVisible:v.toDoFormVisible,"onUpdate:toDoFormVisible":t[0]||(t[0]=e=>v.toDoFormVisible=e)},null,8,["detailId","toDoFormVisible"]),m(He,{detailId:v.detailId,toDoFormVisible:v.toDoFormVisibleOld,"onUpdate:toDoFormVisible":t[1]||(t[1]=e=>v.toDoFormVisibleOld=e)},null,8,["detailId","toDoFormVisible"]),b(" 巡逻详情 "),m(it,{detailId:v.detailId,toDopatrolVisible:v.toDopatrolVisible,"onUpdate:toDopatrolVisible":t[2]||(t[2]=e=>v.toDopatrolVisible=e)},null,8,["detailId","toDopatrolVisible"])])}}},[["__scopeId","data-v-8359d2b4"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/toDo/index.vue"]]);export{ut as default};
