import"./vue.a2f518ee.js";import{m as e,M as i}from"./ant-design-vue.db4d48e3.js";import{C as a,a as s,u as t,d as o,c as n,s as c,p as r}from"./creadForm.61811a7e.js";import{d as l}from"./index.323b38c6.js";import{r as d,h as m}from"./synchronFace.8dba19bd.js";import{_ as p}from"./index.272083a4.js";import{_ as u}from"./index.7061e8ea.js";import{q as f,f as b,b8 as h,o as v,a as y,b as g,c as j,a3 as S,O as k,u as _,a2 as x,a7 as C,a9 as L,h as T,b5 as w,b4 as V}from"./@vue.919ff404.js";import{E as M}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";import"./FilterDropdown.5a779a00.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const D={class:"allinone_machine"},E={class:"operation_box"},I={class:"head_title"},z=(e=>(w("data-v-c66f845e"),e=e(),V(),e))((()=>g("p",null,"一体机列表",-1))),F={key:1},N={key:2,style:{display:"flex"}};var O=u({__name:"index",setup(u){const w=f({tableSpinning:!1,pagination:{total:0,pageNo:1,pageSize:10},no:"",passwordvisible:!1,submitLoading:!1,formVisible:!1,managerVisible:!1,fieldList:[],machineId:"",machineStatus:"",isEdit:!1,echoMachineData:{},deviceType:5});const V=e=>{w.no=e,w.pagination.pageNo=1,w.pagination.pageSize=10,H()},O=(e,i)=>{switch(w.isEdit=e,e){case!1:w.echoMachineData={},w.formVisible=!0;break;case!0:w.formVisible=!0,U(i)}},q=e=>{w.submitLoading=e,w.formVisible=e},K=e=>{w.isEdit?R(e):A(e)},R=i=>{const a={...i,id:w.machineId,deviceType:w.deviceType};t(a).then((i=>{e.success(i.message),H(),w.formVisible=!1}))},U=e=>{w.machineId=e.id,o({id:e.id}).then((e=>{const{data:i}=e;w.echoMachineData=i}))},A=i=>{w.submitLoading=!0;const a={...i,deviceType:w.deviceType};n(a).then((i=>{e.success(i.message),w.formVisible=!1,w.submitLoading=!1,H()})).finally((()=>{w.submitLoading=!1}))},B=e=>{e.forEach((e=>{e.children&&(e.disabled=!0,B(e.children))}))},G=e=>{const{current:i,pageSize:a,machineStatus:s}=e;w.machineStatus=s?s[0]:"",w.pagination.pageNo=i,w.pagination.pageSize=a,H()},H=()=>{w.tableSpinning=!0;const e={...w.pagination,no:w.no,machineStatus:w.machineStatus,deviceType:w.deviceType};r(e).then((e=>{const{data:i}=e;w.pagination.total=i.total,w.dataSource=i.list})).finally((()=>{w.tableSpinning=!1}))};return b((()=>{H(),c().then((e=>{const{data:i}=e;w.fieldList=i,B(i)}))})),(t,o)=>{const n=h("a-input-search"),c=h("plus-outlined"),r=h("a-button"),u=h("a-badge"),f=h("a-spin");return v(),y("div",D,[g("div",E,[g("div",I,[z,j(n,{placeholder:"请输入设备序列号/一体机名称",onSearch:V,allowClear:!0})]),j(r,{type:"primary",onClick:o[0]||(o[0]=e=>O(!1))},{icon:S((()=>[j(c)])),default:S((()=>[k(" 新增一体机 ")])),_:1})]),j(f,{spinning:w.tableSpinning},{default:S((()=>[j(p,{columns:_(l),dataSource:w.dataSource,rowKey:"id",rowSelection:!1,totals:w.pagination,onOnSelectedRowKeys:G},{bodyCell:S((({column:a,record:t})=>["machineStatus"===a.key?(v(),x(u,{key:0,status:["default","success"][t.machineStatus]||"",text:["离线","在线"][t.machineStatus]||"-"},null,8,["status","text"])):C("v-if",!0),"no"===a.dataIndex?(v(),y("span",F,L((null==t?void 0:t.no)||"-"),1)):C("v-if",!0),"operation"===a.key?(v(),y("div",N,[1==t.machineStatus?(v(),x(r,{key:0,type:"link",style:{color:"var(--primary-color)"},onClick:i=>{return a=t.no,void m({deviceNo:a}).then((i=>{e.success(i.message)}));var a}},{default:S((()=>[k("重启")])),_:2},1032,["onClick"])):C("v-if",!0),1==t.machineStatus?(v(),x(r,{key:1,type:"link",style:{color:"var(--primary-color)"},onClick:i=>{return a=t.no,void d({deviceNo:a}).then((i=>{e.success(i.message)}));var a}},{default:S((()=>[k("更新")])),_:2},1032,["onClick"])):C("v-if",!0),j(r,{type:"link",onClick:e=>O(!0,t),style:{color:"var(--primary-color)"}},{default:S((()=>[k("编辑")])),_:2},1032,["onClick"]),j(r,{type:"link",style:{color:"red"},onClick:a=>{return o=t,void i.confirm({title:"删除提示",icon:j(M),content:T("div",{},[T("p","删除所选设备后，下列设置将同步清除或失效，并且不可恢复，确定删除吗？"),T("br"),T("p","1.该设备上所有绑定的通行规则和人脸信息"),T("p","2.该设备回到初始化状态")]),okText:"确认",cancelText:"取消",onCancel(){e.info("已取消！")},onOk(){s({id:o.id}).then((i=>{H(),e.success(i.message)}))}});var o}},{default:S((()=>[k("删除")])),_:2},1032,["onClick"])])):C("v-if",!0)])),_:1},8,["columns","dataSource","totals"])])),_:1},8,["spinning"]),C(" 新增/编辑 "),j(a,{formVisible:w.formVisible,isEdit:w.isEdit,isType:w.deviceType,fieldList:w.fieldList,echoMachineData:w.echoMachineData,submitLoading:w.submitLoading,onFormCancel:q,onFormSubmit:K},null,8,["formVisible","isEdit","isType","fieldList","echoMachineData","submitLoading"])])}}},[["__scopeId","data-v-c66f845e"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/deviceManagement/allInOne/index.vue"]]);export{O as default};
