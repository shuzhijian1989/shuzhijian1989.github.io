import"./vue.a2f518ee.js";import{D as e}from"./index.1cbb3529.js";import{Y as t}from"./table.81b98c8b.js";import{f as a,b as s,g as n,a as l,c as i,d as o,e as c}from"./synchronFace.8dba19bd.js";import{_ as r,p as d}from"./index.7061e8ea.js";import{q as u,b8 as p,I as m,o as y,a as f,c as h,a3 as v,b as x,O as g,F as b,a7 as k,H as _,a2 as S,a9 as I,u as C,b5 as w,b4 as j,W as D,Q as A,f as N,a6 as T}from"./@vue.919ff404.js";import{c as L}from"./classCard.34617283.js";import{m as U}from"./ant-design-vue.db4d48e3.js";import{d as M}from"./dayjs.49e29cb2.js";import{p as Y}from"./trafficStatistics.03d1ed18.js";import"./@babel.6d5f88cb.js";import"./vue-router.907b547c.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";const R=e=>(w("data-v-06a5869a"),e=e(),j(),e),K=R((()=>x("p",null,"人脸机列表",-1))),O={style:{display:"flex",margin:"10px 0px",width:"100%"}},F={key:0},$={key:1},z=R((()=>x("span",null,"该设备还未激活",-1))),E=R((()=>x("i",{class:"iconfont icon-outlinebeifen iconClass"},null,-1))),H={key:2};var V=r({__name:"faceMachine",props:{type:{type:Number,default:1}},emits:["synchronChang","snapChang"],setup(e,{emit:s}){const n=e,{columns:l}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"场地",dataIndex:"siteName",ellipsis:!0},{title:"方向",dataIndex:"machineDirection",ellipsis:!0,customRender:({record:e})=>1==e.machineDirection?"出":2==e.machineDirection?"入":"-"},{title:"人脸机名称",dataIndex:"machineName",ellipsis:!0},{title:"状态",dataIndex:"machineStatus",key:"machineStatus",ellipsis:!0},{title:"设备序列号",dataIndex:"no",ellipsis:!0,customRender:({record:e})=>e.no?e.no:"-"},{title:"已同步人脸数/总计",dataIndex:"faceNumber",ellipsis:!0},{title:"创建时间",dataIndex:"updateTime",ellipsis:!0},{title:"操作",key:"operation",width:"300px"}]},i=u({name:""}),o=()=>{c.update()},c=e=>a({...e,deviceType:n.type,no:i.name,machineStatus:i.synchroStatus});return(e,a)=>{const n=p("a-input"),r=p("a-select-option"),d=p("a-select"),u=p("SearchOutlined"),w=p("a-button"),j=p("a-tooltip"),D=p("a-badge"),A=m("auth");return y(),f("div",null,[h(C(t),{columns:C(l),loadData:c,rowKey:"id"},{title:v((()=>[K,x("div",O,[h(n,{placeholder:"请输入设备序列号/人脸机名称",value:i.name,"onUpdate:value":a[0]||(a[0]=e=>i.name=e),allowClear:!0},null,8,["value"]),h(d,{style:{width:"250px",margin:"0px 10px"},value:i.synchroStatus,"onUpdate:value":a[1]||(a[1]=e=>i.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(r,{value:""},{default:v((()=>[g("全部")])),_:1}),h(r,{value:"1"},{default:v((()=>[g("在线")])),_:1}),h(r,{value:"0"},{default:v((()=>[g("离线")])),_:1})])),_:1},8,["value"]),h(w,{type:"primary",style:{"margin-right":"10px"},onClick:o},{icon:v((()=>[h(u,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),bodyCell:v((({column:e,record:t})=>["operation"===e.key?(y(),f(b,{key:0},[t.machineStatus?(y(),f("div",F,[k(' <a\r\n                            type="link"\r\n                            style="\r\n                                color: var(--primary-color);\r\n                                margin-left: 10px;\r\n                            "\r\n                            v-auth="`faceSynchro`"\r\n                            @click="faceSynchronChang(true, 1, record)"\r\n                            >人脸同步\r\n                        </a> '),_((y(),S(w,{type:"link",style:{color:"var(--primary-color)","margin-left":"10px"},onClick:e=>{s("snapChang",!0,2,t)}},{default:v((()=>[g("人脸记录")])),_:2},1032,["onClick"])),[[A,"faceRecord"]])])):(y(),f("div",$,[k(' <a type="link" style="color: #999999; margin-left: 10px"\r\n                            >人脸同步\r\n                            <a-tooltip placement="top">\r\n                                <template #title>\r\n                                    <span>该设备还未激活</span>\r\n                                </template>\r\n                                <i\r\n                                    class="iconfont icon-outlinebeifen iconClass"\r\n                                ></i>\r\n                            </a-tooltip>\r\n                        </a> '),h(w,{type:"link",style:{color:"#999999","margin-left":"10px"}},{default:v((()=>[g("人脸记录 "),h(j,{placement:"top"},{title:v((()=>[z])),default:v((()=>[E])),_:1})])),_:1})]))],64)):k("v-if",!0),"machineStatus"===e.key?(y(),S(D,{key:1,status:1===t.machineStatus?"success":0===t.machineStatus?"default":"-",text:1===t.machineStatus?"在线":0===t.machineStatus?"离线":"-"},null,8,["status","text"])):k("v-if",!0),"faceNumber"===e.dataIndex?(y(),f("span",H,I(t.faceNumber?t.synchronousNumber+"/"+t.faceNumber:"-"),1)):k("v-if",!0)])),_:1},8,["columns"])])}}},[["__scopeId","data-v-06a5869a"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/faceMachine.vue"]]);const P=e=>(w("data-v-14d1b718"),e=e(),j(),e),q=P((()=>x("p",null,"班牌列表",-1))),B={style:{display:"flex",margin:"10px 0px",width:"100%"}},Q={style:{display:"flex"}},G={key:0},X=["onClick"],Z={key:1},J={type:"link",style:{color:"#999999","margin-left":"10px"}},W=P((()=>x("span",null,"该设备还未激活",-1))),ee=P((()=>x("i",{class:"iconfont icon-outlinebeifen iconClass"},null,-1))),te={key:2};var ae=r({__name:"classCard",emits:["synchronChang","snapChang"],setup(e,{emit:a}){const{columns:n}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"设备名称",dataIndex:"name",ellipsis:!0},{title:"设备序列号",dataIndex:"no",ellipsis:!0,customRender:({record:e})=>e.no?e.no:"-"},{title:"注册时间",dataIndex:"createTime",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"已同步人脸数/总计",dataIndex:"faceNumber",ellipsis:!0},{title:"操作",key:"operation"}]},l=u({visible:!1,searchName:"",checkedList:[],selectedRowKeys:[],relationList:[],restDisabled:!0,name:""}),i=()=>{r.update()},o={onChange(e){e.length>0?l.restDisabled=!1:l.restDisabled=!0,l.selectedRowKeys=e}},c=e=>{l.relationList=e.map((e=>({userId:e.id,peopleType:1===e._source?2:1}))),(e=>{const t={deviceIds:l.selectedRowKeys,userInfo:l.relationList};s(t).then((e=>{U.success(e.message),r.update(!0)}))})()},r=e=>L({...e,name:l.name,machineStatus:l.synchroStatus});return(e,s)=>{const u=p("a-input"),w=p("a-select-option"),j=p("a-select"),D=p("SearchOutlined"),A=p("a-button"),N=p("a-tooltip"),T=p("a-badge"),L=m("auth");return y(),f("div",null,[h(C(t),{columns:C(n),loadData:r,"row-selection":o,rowKey:"id"},{title:v((()=>[q,x("div",B,[h(u,{placeholder:"请输入设备序列号/设备名称搜索",value:l.name,"onUpdate:value":s[0]||(s[0]=e=>l.name=e),allowClear:!0},null,8,["value"]),h(j,{style:{width:"250px",margin:"0px 10px"},value:l.synchroStatus,"onUpdate:value":s[1]||(s[1]=e=>l.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(w,{value:""},{default:v((()=>[g("全部")])),_:1}),h(w,{value:"1"},{default:v((()=>[g("在线")])),_:1}),h(w,{value:"0"},{default:v((()=>[g("离线")])),_:1})])),_:1},8,["value"]),h(A,{type:"primary",style:{"margin-right":"10px"},onClick:i},{icon:v((()=>[h(D,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),handle:v((()=>[x("div",Q,[h(C(d),{mode:"personnel",tabs:[{tab:"教职工",key:1,checked:!0},{tab:"学生组",key:2,checked:!1}],visible:l.visible,"onUpdate:visible":s[2]||(s[2]=e=>l.visible=e),checked:l.checkedList,"onUpdate:checked":s[3]||(s[3]=e=>l.checkedList=e),onHandleOk:c},{default:v((()=>[_((y(),S(A,{disabled:l.restDisabled},{default:v((()=>[g(" 批量关联人脸库 ")])),_:1},8,["disabled"])),[[L,"classCardDelete"]])])),_:1},8,["visible","checked"])])])),bodyCell:v((({column:e,record:t})=>["operation"===e.key?(y(),f(b,{key:0},[t.status?(y(),f("div",G,[_((y(),f("a",{type:"link",style:{color:"var(--primary-color)","margin-left":"10px"},onClick:e=>{a("synchronChang",!0,1,"cardSynchron",t)}},[g("人脸同步 ")],8,X)),[[L,"classCardSynchro"]]),k(' <a-button\r\n                            type="link"\r\n                            style="\r\n                                color: var(--primary-color);\r\n                                margin-left: 10px;\r\n                            "\r\n                            @click="snap(true, 2, record)"\r\n                            >人脸记录</a-button\r\n                        > ')])):(y(),f("div",Z,[x("a",J,[g("人脸同步 "),h(N,{placement:"top"},{title:v((()=>[W])),default:v((()=>[ee])),_:1})]),k(' <a-button\r\n                            type="link"\r\n                            style="color: #999999; margin-left: 10px"\r\n                            >人脸记录\r\n                            <a-tooltip placement="top">\r\n                                <template #title>\r\n                                    <span>该设备还未激活</span>\r\n                                </template>\r\n                                <i\r\n                                    class="iconfont icon-outlinebeifen iconClass"\r\n                                ></i>\r\n                            </a-tooltip>\r\n                        </a-button> ')]))],64)):k("v-if",!0),"status"===e.key?(y(),S(T,{key:1,status:"1"===t.status?"success":"0"===t.status?"default":"-",text:"1"===t.status?"在线":"0"===t.status?"离线":"-"},null,8,["status","text"])):k("v-if",!0),"faceNumber"===e.dataIndex?(y(),f("span",te,I(t.faceNumber?t.synchronousNumber+"/"+t.faceNumber:"-"),1)):k("v-if",!0)])),_:1},8,["columns"])])}}},[["__scopeId","data-v-14d1b718"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/classCard.vue"]]);const se=e=>(w("data-v-286af829"),e=e(),j(),e),ne=se((()=>x("p",null,"考勤机列表",-1))),le={style:{display:"flex",margin:"10px 0px",width:"100%"}},ie={key:0},oe=["onClick"],ce={key:1},re={type:"link",style:{color:"#999999","margin-left":"10px"}},de=se((()=>x("span",null,"该设备还未激活",-1))),ue=se((()=>x("i",{class:"iconfont icon-outlinebeifen iconClass"},null,-1))),pe=se((()=>x("span",null,"该设备还未激活",-1))),me=se((()=>x("i",{class:"iconfont icon-outlinebeifen iconClass"},null,-1))),ye={key:2};var fe=r({__name:"attendance",props:{type:{type:Number,default:null}},emits:["synchronChang","snapChang"],setup(e,{emit:s}){const n=e,{columns:l}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"场地",dataIndex:"siteName",ellipsis:!0},{title:"考勤机名称",dataIndex:"machineName",ellipsis:!0},{title:"状态",dataIndex:"machineStatus",key:"machineStatus",ellipsis:!0},{title:"设备序列号",dataIndex:"no",ellipsis:!0,customRender:({record:e})=>e.no?e.no:"-"},{title:"已同步人脸数/总计",dataIndex:"faceNumber",ellipsis:!0},{title:"创建时间",dataIndex:"updateTime",ellipsis:!0},{title:"操作",key:"operation",align:"left",width:"300px"}]},i=u({name:""}),o=()=>{c.update()},c=e=>a({...e,deviceType:n.type,no:i.name,machineStatus:i.synchroStatus});return(e,a)=>{const n=p("a-input"),r=p("a-select-option"),d=p("a-select"),u=p("SearchOutlined"),w=p("a-button"),j=p("a-tooltip"),D=p("a-badge"),A=m("auth");return y(),f(b,null,[k('  class="tableClass" '),x("div",null,[h(C(t),{columns:C(l),loadData:c,rowKey:"id"},{title:v((()=>[ne,x("div",le,[h(n,{placeholder:"请输入设备序列号/考勤机名称",value:i.name,"onUpdate:value":a[0]||(a[0]=e=>i.name=e),allowClear:!0},null,8,["value"]),h(d,{style:{width:"250px",margin:"0px 10px"},value:i.synchroStatus,"onUpdate:value":a[1]||(a[1]=e=>i.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(r,{value:""},{default:v((()=>[g("全部")])),_:1}),h(r,{value:"1"},{default:v((()=>[g("在线")])),_:1}),h(r,{value:"0"},{default:v((()=>[g("离线")])),_:1})])),_:1},8,["value"]),h(w,{type:"primary",style:{"margin-right":"10px"},onClick:o},{icon:v((()=>[h(u,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),bodyCell:v((({column:e,record:t})=>["operation"===e.key?(y(),f(b,{key:0},[t.machineStatus?(y(),f("div",ie,[_((y(),f("a",{type:"link",style:{color:"var(--primary-color)","margin-left":"10px"},onClick:e=>{s("synchronChang",!0,1,"attendanceSynchron",t)}},[g("人脸同步 ")],8,oe)),[[A,"attendanceSynchro"]]),_((y(),S(w,{type:"link",style:{color:"var(--primary-color)","margin-left":"10px"},onClick:e=>{s("snapChang",!0,2,t)}},{default:v((()=>[g("人脸记录")])),_:2},1032,["onClick"])),[[A,"attendanceRecord"]])])):(y(),f("div",ce,[x("a",re,[g("人脸同步 "),h(j,{placement:"top"},{title:v((()=>[de])),default:v((()=>[ue])),_:1})]),h(w,{type:"link",style:{color:"#999999","margin-left":"10px"}},{default:v((()=>[g("人脸记录 "),h(j,{placement:"top"},{title:v((()=>[pe])),default:v((()=>[me])),_:1})])),_:1})]))],64)):k("v-if",!0),"machineStatus"===e.key?(y(),S(D,{key:1,status:1===t.machineStatus?"success":0===t.machineStatus?"default":"-",text:1===t.machineStatus?"在线":0===t.machineStatus?"离线":"-"},null,8,["status","text"])):k("v-if",!0),"faceNumber"===e.dataIndex?(y(),f("span",ye,I(t.faceNumber?t.synchronousNumber+"/"+t.faceNumber:"-"),1)):k("v-if",!0)])),_:1},8,["columns"])])],2112)}}},[["__scopeId","data-v-286af829"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/attendance.vue"]]);const he={class:"equipment-name"},ve=(e=>(w("data-v-0ba50241"),e=e(),j(),e))((()=>x("p",{style:{height:"16px"}},null,-1))),xe={style:{display:"flex"}};var ge=r({__name:"faceSynchron",props:{snapItem:{type:String,default:""}},setup(e){const a=e,{columns:s}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"班级/部门",dataIndex:"userDept",ellipsis:!0},{title:"姓名",dataIndex:"userName",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"原因",dataIndex:"renson",ellipsis:!0}]},i=u({name:"",synchronousLoading:!1}),o=()=>{c.update()},c=e=>n({...e,id:a.snapItem.id,name:i.name,status:i.synchroStatus}),r=()=>{i.synchronousLoading=!0,l({deviceId:a.snapItem.no}).then((e=>{U.success(e.message)})).finally((()=>{i.synchronousLoading=!1}))};return(e,n)=>{const l=p("a-input"),d=p("a-select-option"),u=p("a-select"),f=p("SearchOutlined"),b=p("a-button"),w=p("a-empty"),j=p("a-badge"),A=m("auth");return y(),S(C(t),{columns:C(s),loadData:c,"row-selection":e.rowSelection,rowKey:"id",locale:{emptyText:"fasdfasdf"}},{title:v((()=>[x("p",null,I("设备名称 ("+a.snapItem.machineName+")"),1),x("div",he,[h(l,{placeholder:"请输入姓名搜索",value:i.name,"onUpdate:value":n[0]||(n[0]=e=>i.name=e),allowClear:!0},null,8,["value"]),h(u,{style:{width:"250px",margin:"0px 10px"},value:i.synchroStatus,"onUpdate:value":n[1]||(n[1]=e=>i.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(d,{value:""},{default:v((()=>[g("全部")])),_:1}),h(d,{value:0},{default:v((()=>[g("已同步")])),_:1}),h(d,{value:2},{default:v((()=>[g("未同步")])),_:1}),k(' <a-select-option :value="1">同步失败</a-select-option> ')])),_:1},8,["value"]),h(b,{type:"primary",style:{"margin-right":"10px"},onClick:o},{icon:v((()=>[h(f,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),handle:v((()=>[ve,x("div",xe,[_((y(),S(b,{onClick:r,loading:i.synchronousLoading,type:"primary",style:{"margin-left":"12px"}},{default:v((()=>[g(" 同步人脸信息 ")])),_:1},8,["loading"])),[[A,"classCardSynchroFace"]])])])),emptyText:v((()=>[D(e.$slots,"emptyText",{},(()=>[h(w,{image:"/image/noFace.png","image-style":{width:"100%",height:"180px"},description:"该设备还未关联人脸库"})]),!0)])),bodyCell:v((({column:e,record:t})=>["status"===e.key?(y(),S(j,{key:0,status:0===t.status?"success":1===t.status?"error":"warning",text:0===t.status?"已同步":1===t.status?"同步失败":"未同步"},null,8,["status","text"])):k("v-if",!0)])),_:3},8,["columns","row-selection"])}}},[["__scopeId","data-v-0ba50241"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/faceSynchron.vue"]]);const be={style:{display:"flex",margin:"10px 0px",width:"100%"}},ke={style:{display:"flex"}};var _e=r({__name:"cardSynchron",props:{snapItem:{type:Object,default:()=>{}}},setup(e){const a=e,{columns:l}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"姓名",dataIndex:"userName",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"原因",dataIndex:"renson",ellipsis:!0}]},c=u({visible:!1,checkedList:[],selectedRowKeys:[],relationList:[],synchronousLoading:!1,name:""}),r=()=>{A.update()},b=()=>{c.synchronousLoading=!0;const e={deviceId:a.snapItem.id};setTimeout((()=>{i(e).then((e=>{U.success(e.message),A.update(!0)})).finally((()=>{c.synchronousLoading=!1}))}),3e3)},w=e=>{c.relationList=e.map((e=>({userId:e.id,peopleType:1==e._source?2:1}))),(e=>{var t;const n={deviceId:null==(t=a.snapItem)?void 0:t.id,userInfo:c.relationList};s(n).then((e=>{U.success(e.message),A.update(!0)}))})()},j=()=>{var e;const t={deviceId:null==(e=a.snapItem)?void 0:e.id};o(t).then((e=>{c.checkedList=e.data.map((e=>({name:e.name,id:e.userId,_source:e.peopleType}))),c.visible=!0}))},A=e=>n({...e,id:a.snapItem.id,name:c.name,status:c.synchroStatus});return(e,s)=>{const n=p("a-input"),i=p("a-select-option"),o=p("a-select"),u=p("SearchOutlined"),N=p("a-button"),T=p("a-empty"),L=p("a-badge"),U=m("auth");return y(),f("div",null,[h(C(t),{columns:C(l),loadData:A,rowKey:"id",locale:{emptyText:"fasdfasdf"}},{title:v((()=>[x("p",null,I("设备名称 ("+a.snapItem.name+")"),1),x("div",be,[h(n,{placeholder:"请输入姓名搜索",value:c.name,"onUpdate:value":s[0]||(s[0]=e=>c.name=e),allowClear:!0},null,8,["value"]),h(o,{style:{width:"250px",margin:"0px 10px"},value:c.synchroStatus,"onUpdate:value":s[1]||(s[1]=e=>c.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(i,{value:""},{default:v((()=>[g("全部")])),_:1}),h(i,{value:0},{default:v((()=>[g("已同步")])),_:1}),h(i,{value:2},{default:v((()=>[g("未同步")])),_:1}),k(' <a-select-option :value="1">同步失败</a-select-option> ')])),_:1},8,["value"]),h(N,{type:"primary",style:{"margin-right":"10px"},onClick:r},{icon:v((()=>[h(u,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),handle:v((()=>[x("div",ke,[h(C(d),{mode:"personnel",tabs:[{tab:"教职工",key:1,checked:!0},{tab:"学生组",key:2,checked:!1}],visible:c.visible,"onUpdate:visible":s[2]||(s[2]=e=>c.visible=e),checked:c.checkedList,"onUpdate:checked":s[3]||(s[3]=e=>c.checkedList=e),onHandleOk:w},{default:v((()=>[_((y(),S(N,{onClick:j},{default:v((()=>[g(" 关联人脸库 ")])),_:1})),[[U,"drelationFace"]])])),_:1},8,["visible","checked"]),_((y(),S(N,{onClick:b,loading:c.synchronousLoading,type:"primary",style:{"margin-left":"12px"}},{default:v((()=>[g(" 同步人脸信息 ")])),_:1},8,["loading"])),[[U,"classCardSynchroFace"]])])])),emptyText:v((()=>[D(e.$slots,"emptyText",{},(()=>[h(T,{image:"/image/noFace.png","image-style":{width:"100%",height:"180px"},description:"该设备还未关联人脸库"})]))])),bodyCell:v((({column:e,record:t})=>["status"===e.key?(y(),S(L,{key:0,status:0===t.status?"success":1===t.status?"error":"warning",text:0===t.status?"已同步":1===t.status?"同步失败":"未同步"},null,8,["status","text"])):k("v-if",!0)])),_:3},8,["columns"])])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/cardSynchron.vue"]]);const Se={style:{display:"flex",margin:"10px 0px",width:"100%"}};var Ie=r({__name:"attendanceSynchron",props:{snapItem:{type:Object,default:()=>{}}},setup(e){const a=e,{columns:s}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"姓名",dataIndex:"userName",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"原因",dataIndex:"renson",ellipsis:!0}]},l=u({name:""}),i=()=>{o.update()},o=e=>n({...e,id:a.snapItem.id,name:l.name,status:l.synchroStatus});return(e,n)=>{const c=p("a-input"),r=p("a-select-option"),d=p("a-select"),u=p("SearchOutlined"),m=p("a-button"),f=p("a-empty"),b=p("a-badge");return y(),S(C(t),{columns:C(s),loadData:o,rowKey:"id",locale:{emptyText:"fasdfasdf"}},{title:v((()=>[x("p",null,I("设备名称 ("+a.snapItem.machineName+")"),1),x("div",Se,[h(c,{placeholder:"请输入姓名搜索",value:l.name,"onUpdate:value":n[0]||(n[0]=e=>l.name=e),allowClear:!0},null,8,["value"]),h(d,{style:{width:"250px",margin:"0px 10px"},value:l.synchroStatus,"onUpdate:value":n[1]||(n[1]=e=>l.synchroStatus=e),placeholder:"全部"},{default:v((()=>[h(r,{value:""},{default:v((()=>[g("全部")])),_:1}),h(r,{value:0},{default:v((()=>[g("已同步")])),_:1}),h(r,{value:2},{default:v((()=>[g("未同步")])),_:1}),k(' <a-select-option :value="1">同步失败</a-select-option> ')])),_:1},8,["value"]),h(m,{type:"primary",style:{"margin-right":"10px"},onClick:i},{icon:v((()=>[h(u,{style:{"margin-right":"10px"}})])),default:v((()=>[g(" 查询 ")])),_:1})])])),emptyText:v((()=>[D(e.$slots,"emptyText",{},(()=>[h(f,{image:"/image/noFace.png","image-style":{width:"100%",height:"180px"},description:"该设备还未关联人脸库"})]))])),bodyCell:v((({column:e,record:t})=>["status"===e.key?(y(),S(b,{key:0,status:0===t.status?"success":1===t.status?"error":"warning",text:0===t.status?"已同步":1===t.status?"同步失败":"未同步"},null,8,["status","text"])):k("v-if",!0)])),_:3},8,["columns"])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/attendanceSynchron.vue"]]);const Ce={style:{padding:"14px 0px 0px 0px"}};var we=r({__name:"snap",props:{snapItem:{type:String,default:""},type:{type:String,default:""}},setup(e){const a=e,{columns:s}={columns:[{title:"序号",customRender:({text:e,record:t,index:a})=>`${a+1}`},{title:"班级/部门",dataIndex:"classOrDeptName",ellipsis:!0},{title:"姓名",dataIndex:"userName",ellipsis:!0},{title:"地点",dataIndex:"inOutPlace",ellipsis:!0},{title:"抓拍时间",dataIndex:"inOutTime",ellipsis:!0}]},n=u({timePicker:[M().format("YYYY-MM-DD 00:00:00"),M().format("YYYY-MM-DD 23:59:59")],endTime:"",startTime:""}),l=e=>Y({...e,deviceType:a.type,deviceId:a.snapItem.id,startTime:n.startTime,endTime:n.endTime}),i=e=>{n.timePicker=e,n.startTime=e[0],n.endTime=e[1],l.update()};return(e,o)=>{const c=p("a-range-picker"),r=p("a-empty");return y(),f("div",null,[h(C(t),{columns:C(s),loadData:l,"row-selection":e.rowSelection,rowKey:"id",locale:{emptyText:"fasdfasdf"}},{title:v((()=>[x("p",null,I(a.snapItem.machineName),1),x("div",Ce,[h(c,{"show-time":"",class:"pickerDate",value:n.timePicker,"onUpdate:value":o[0]||(o[0]=e=>n.timePicker=e),valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",onOk:i},{renderExtraFooter:v((()=>[])),_:1},8,["value"])])])),emptyText:v((()=>[D(e.$slots,"emptyText",{},(()=>[h(r,{image:"/image/noFace.png","image-style":{width:"100%",height:"180px"},description:"暂无人脸记录"})]))])),_:3},8,["columns","row-selection"])])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/components/snap.vue"]]);const je=(e=>(w("data-v-38164047"),e=e(),j(),e))((()=>x("span",{class:"tree_icon"},[x("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAIVJREFUKFNj/L+A4RYDA4MqAyr4wsDMYMIYy3ATTRzOZfy/gOE/Dsm7DAwMz3HI3YZoVIxmYJB0wmU4qvjzfQwM95cyMP5fz/efQTuXgYFHnjiNXx4yMFydzMD4/6T6fwZGRuI0wVT9/8/A+P+UBi4/4jVsVCOe4AEFzn0GBgYF0uKD4QEA2DoyATFp0w8AAAAASUVORK5CYII=",alt:""})],-1))),De={key:1,class:"synchron"};var Ae=r({__name:"index",setup(t){const a=A(V),s=A(ge),n=(e,t)=>{o.type=t.id,o.selectedKeys=[t.id],"faceMachine"===t.value?a.value=V:"classCard"===t.value?a.value=ae:a.value=fe},l=(e,t,a,n)=>{o.snapItem=n,o.isSynchron=e,o.isSnap=t,s.value="faceSynchron"===a?ge:"cardSynchron"===a?_e:Ie},i=(e,t,a)=>{o.snapItem=a,o.isSynchron=!0,o.isSnap=t},o=u({type:1,snapItem:"",isSnap:1,isSynchron:!1,fieldNames:{title:"name",key:"id",value:"value"},treeData:[],defaultExpand:[],noticeCollectVisible:!1,selectedKeys:[]});return N((()=>{c().then((e=>{var t;const a=[];e.data.forEach((e=>{a.push(Object.assign({},{name:e.name,id:e.type,value:1===e.type?"faceMachine":2===e.type?"classCard":"attendance"}))})),o.treeData=a,o.selectedKeys=[null==(t=a[0])?void 0:t.id]}))})),(t,c)=>{const r=p("a-col"),d=p("a-row"),u=p("a-layout-header");return!1===o.isSynchron?(y(),S(d,{key:0,type:"flex",class:"faceLibrary_warp_pageitem"},{default:v((()=>[h(r,{class:"demp_tree"},{default:v((()=>[h(e,{ref:"dempTree",treeData:o.treeData,onEmitSelect:n,fieldNames:o.fieldNames,selectedKeys:o.selectedKeys},{treeIcon:v((()=>[je])),_:1},8,["treeData","fieldNames","selectedKeys"])])),_:1}),h(r,{style:{flex:"1",padding:"16px 12px"}},{default:v((()=>[(y(),S(T(a.value),{onSynchronChang:l,onSnapChang:i,type:o.type},null,40,["type"]))])),_:1})])),_:1})):(y(),f("div",De,[h(u,{class:"reset-layout-header"},{default:v((()=>[k(' <arrow-left-outlined\r\n                class="left-outlined"\r\n                @click="state.isSynchron = false"\r\n            /> '),x("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:c[0]||(c[0]=e=>o.isSynchron=!1)}),x("span",null,I(1===o.isSnap?"人脸同步":"人脸记录"),1)])),_:1}),1===o.isSnap?(y(),S(T(s.value),{key:0,snapItem:o.snapItem},null,8,["snapItem"])):k("v-if",!0),2===o.isSnap?(y(),S(we,{key:1,snapItem:o.snapItem,type:o.type},null,8,["snapItem","type"])):k("v-if",!0)]))}}},[["__scopeId","data-v-38164047"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/faceLibrary/sync/index.vue"]]);export{Ae as default};
