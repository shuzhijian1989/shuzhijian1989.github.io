import"./vue.a2f518ee.js";import{z as e,n as s,A as a}from"./exam.ac418e80.js";import{u as t,a as i}from"./vue-router.907b547c.js";import{_ as o}from"./index.7061e8ea.js";import{q as n,f as l,b8 as d,o as r,a as c,b as p,c as m,a3 as u,O as f,a9 as v,F as b,a8 as y,a2 as j,b5 as x,b4 as h}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./ant-design-vue.db4d48e3.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const w=e=>(x("data-v-87483c04"),e=e(),h(),e),g={class:"pageMain"},_={class:"head"},I={class:"subInfo"},N={class:"subText"},O={class:"subText"},k={class:"subText"},L={key:0,class:"paste"},C={key:0},B={class:"siteBox"},V={class:"seat"},q={class:"info"},P={class:"infoBox"},U=w((()=>p("div",{class:"bor"},null,-1))),A={key:1},R={class:"siteBoxs"},T={class:"seat"},M={class:"info"},z={class:"infoBox"},E=w((()=>p("span",null,"暂无数据",-1)));var S=o({__name:"index",setup(o){t();const x=i(),h=n({siteSource:[],personVOList:[]}),w=async()=>{const s={examinationId:x.query.id,siteId:h.siteId},{data:a}=await e(s);h.personVOList=a.personVOList,h.showed=a.showed,h.buildingName=a.buildingName,h.siteName=a.siteName,h.examPeopleNum=a.examPeopleNum},S=()=>{h.siteId?w():h.personVOList=[]},D=async()=>{const e={examinationId:x.query.id,siteId:h.siteId};await a(e).then((e=>{const s=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download","分场座位表.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},F=async()=>{await a({examinationId:x.query.id}).then((e=>{const s=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download","考场总座位表.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}))};return l((async()=>{await(async()=>{var e;const{data:a}=await s({examinationId:x.query.id});h.siteOptions=a,h.siteId=null==(e=a[0])?void 0:e.id})(),await w()})),(e,s)=>{const a=d("a-select"),t=d("a-form-item"),i=d("a-form"),o=d("a-button"),n=d("a-col"),l=d("a-row"),x=d("a-empty");return r(),c("div",g,[p("div",null,[p("div",_,[m(i,{layout:"inline"},{default:u((()=>[m(t,{label:"考场:"},{default:u((()=>[m(a,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},onChange:S,value:h.siteId,"onUpdate:value":s[0]||(s[0]=e=>h.siteId=e),placeholder:"请选择",options:h.siteOptions,showArrow:!0,"field-names":{label:"name",value:"id"}},null,8,["getPopupContainer","value","options"])])),_:1})])),_:1}),p("div",null,[m(o,{onClick:D},{default:u((()=>[f("导出分场座位表")])),_:1}),m(o,{class:"allBtn",onClick:F},{default:u((()=>[f("导出考场总座位表")])),_:1})])])]),p("div",null,[p("div",I,[p("div",null,[f(" 考试地点："),p("span",N,v(h.buildingName||"-"),1)]),p("div",null,[f(" 考试教室："),p("span",O,v(h.siteName||"-"),1)]),p("div",null,[f(" 考试容量："),p("span",k,v(h.examPeopleNum||"-"),1)])])]),p("div",null,[h.personVOList.length>0?(r(),c("div",L,[h.showed?(r(),c("div",C,[m(l,{gutter:[24,32],type:"flex",justify:"flex-start",wrap:!0},{default:u((()=>[(r(!0),c(b,null,y(h.personVOList,(e=>(r(),j(n,{key:e.id},{default:u((()=>[p("div",B,[p("div",V,[p("div",null,v(e.seat||"-"),1)]),p("div",q,[p("div",P,[p("div",null,[f(" 姓名："),p("span",null,v(e.personName||"-"),1)]),U,p("div",null,[f(" 准考证号："),p("span",null,v(e.examineNumber||"-"),1)])])])])])),_:2},1024)))),128))])),_:1})])):(r(),c("div",A,[m(l,{gutter:[24,32],type:"flex",justify:"flex-start",wrap:!0},{default:u((()=>[(r(!0),c(b,null,y(h.personVOList,(e=>(r(),j(n,{key:e.id},{default:u((()=>[p("div",R,[p("div",T,[p("div",null,v(e.seat||"-"),1)]),p("div",M,[p("div",z,[p("div",null,[f(" 姓名："),p("span",null,v(e.personName||"-"),1)])])])])])),_:2},1024)))),128))])),_:1})]))])):(r(),j(x,{key:1,image:"image/empty.png","image-style":{width:"100%",height:"180px"}},{description:u((()=>[E])),_:1}))])])}}},[["__scopeId","data-v-87483c04"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/examManage/affair/seatPinupTable/index.vue"]]);export{S as default};
