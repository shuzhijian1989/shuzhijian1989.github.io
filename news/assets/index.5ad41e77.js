import"./vue.a2f518ee.js";import{u as e}from"./vue-router.907b547c.js";import{m as t,M as i}from"./ant-design-vue.db4d48e3.js";import{_ as a,b8 as o,b9 as s,ba as n,bb as l}from"./index.7061e8ea.js";import{_ as p}from"./index.272083a4.js";import{r,q as m,f as d,b8 as c,o as y,a as g,c as u,a3 as b,b as f,O as j,a7 as v}from"./@vue.919ff404.js";import{E as h}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const T=f("span",null,"场地设备",-1),x={style:{width:"100%",padding:"16px"}},k={style:{display:"flex","justify-content":"end","margin-bottom":"16px"}},_=["onClick"];var F=a({__name:"index",setup(a){const F=e(),L=r(),S={name:[{required:!0,message:"请先输入设备名称"}]},C=()=>{F.push({path:"/basicManagement/site"})},w=[{title:"设备名称",dataIndex:"name"},{title:"操作",dataIndex:"operation",align:"center",width:100}],N=m({removeDisabled:!0,typeTableLoging:!1,typeFormLoading:!1,pagination:{pageNo:1,pageSize:10,total:0},typeList:[],isAdd:!0,typeVisible:!1,typeTitle:"添加场地设备",siteTypeForm:{name:""},allType:""}),V=()=>{N.typeTableLoging=!0;const e={...N.pagination};o(e).then((e=>{const{list:t,pageNo:i,pageSize:a,total:o}=e.data;N.typeList=t,N.pagination={pageNo:i,pageSize:a,total:o}})).finally((()=>{N.typeTableLoging=!1}))},z=(e,t)=>{if(N.isAdd=!e,e){N.typeVisible=!0,N.typeTitle="编辑场地设备";const e=JSON.parse(JSON.stringify(t));N.siteTypeForm=e}else N.typeVisible=!0,N.typeTitle="添加场地设备",N.siteTypeForm.name=""},O=()=>{N.typeVisible=!1,V()},D=()=>{L.value.validate().then((()=>{N.isAdd?A():q()}))},q=()=>{N.typeFormLoading=!0,s(N.siteTypeForm).then((e=>{N.typeVisible=!1,V(),t.success(e.message)})).finally((()=>{N.typeFormLoading=!1}))},A=()=>{N.typeFormLoading=!0,N.siteTypeForm.id="",n(N.siteTypeForm).then((e=>{N.typeVisible=!1,V(),t.success(e.message)})).finally((()=>{N.typeFormLoading=!1}))},M=(e,t)=>{e.length>0?(N.removeDisabled=!1,N.allType=e):N.removeDisabled=!0},I=e=>{const{current:t,pageSize:i,total:a}=e;N.pagination.pageNo=t,N.pagination.pageSize=i,N.pagination.total=a,V()},U=()=>{i.confirm({title:"删除场地设备",icon:u(h),content:"确定删除该场地设备吗？",okType:"danger",okText:"确认",cancelText:"取消",onOk(){const{allType:e,typeList:i,pagination:{pageNo:a}}=N;l({ids:e}).then((o=>{t.success(o.message),i.length===e.length&&(N.pagination.pageNo=a>1?a-1:1),V()}))}})};return d((()=>{V()})),(e,t)=>{const i=c("a-layout-header"),a=c("plus-outlined"),o=c("a-button"),s=c("a-spin"),n=c("a-input"),l=c("a-form-item"),r=c("a-form"),m=c("a-modal");return y(),g("div",null,[u(i,{class:"reset-layout-header"},{default:b((()=>[f("i",{class:"iconfont icon-xingzhuangjiehe19",onClick:C}),T])),_:1}),f("div",x,[f("div",k,[u(o,{type:"primary",class:"rightButton",onClick:t[0]||(t[0]=e=>z(!1))},{icon:b((()=>[u(a)])),default:b((()=>[j(" 添加设备 ")])),_:1}),u(o,{danger:"",style:{"margin-left":"16px"},disabled:N.removeDisabled,onClick:U},{default:b((()=>[j(" 删除")])),_:1},8,["disabled"])]),u(s,{spinning:N.typeTableLoging},{default:b((()=>[u(p,{columns:w,dataSource:N.typeList,slots:["operation"],rowSelection:!0,totals:N.pagination,onOnSelectedArry:M,onOnSelectedRowKeys:I},{bodyCell:b((({column:e,text:t,record:i})=>["operation"===e.dataIndex?(y(),g("a",{key:0,style:{color:"var(--primary-color)"},onClick:e=>z(!0,i)}," 编辑 ",8,_)):v("v-if",!0)])),_:1},8,["dataSource","totals"])])),_:1},8,["spinning"]),v(" 添加设备 "),u(m,{visible:N.typeVisible,"onUpdate:visible":t[2]||(t[2]=e=>N.typeVisible=e),title:N.typeTitle,onOk:D,width:"408px",onCancel:O},{footer:b((()=>[u(o,{key:"back",onClick:O},{default:b((()=>[j("取消")])),_:1}),u(o,{key:"submit",type:"primary",loading:N.typeFormLoading,onClick:D},{default:b((()=>[j("确定")])),_:1},8,["loading"])])),default:b((()=>[u(r,{layout:"vertical",name:"base",autocomplete:"off",ref_key:"typeFromRef",ref:L,rules:S,model:N.siteTypeForm},{default:b((()=>[u(l,{label:"设备名称：",name:"name"},{default:b((()=>[u(n,{maxlength:20,"show-count":"",value:N.siteTypeForm.name,"onUpdate:value":t[1]||(t[1]=e=>N.siteTypeForm.name=e),valueModifiers:{trim:!0},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/site/siteEquipment/index.vue"]]);export{F as default};
