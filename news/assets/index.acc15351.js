import"./vue.a2f518ee.js";import{T as e}from"./index.112873ae.js";import{l as t,q as a,r as i,t as o,v as s}from"./exam.ac418e80.js";import{u as n,a as d}from"./vue-router.907b547c.js";import{_ as r}from"./index.7061e8ea.js";import{q as l,y as c,f as p,b8 as u,o as m,a as b,b as x,c as y,a3 as f,O as v,F as j,a8 as g,a2 as h,a7 as I,u as w}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";import"./ant-design-vue.db4d48e3.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";const k={class:"mainPae"},T={class:"body"},C={class:"search"},S={class:"subBox"},N={class:"exbtn"},_={class:"siteBox"},L={class:"exbtn"},q=["innerHTML"];var O=r({__name:"index",setup(r){n();const O=d(),U=[{title:"考场名称",key:"name",dataIndex:"name"},{title:"考场地点",key:"buildingName",dataIndex:"buildingName"},{title:"考场教室",key:"siteName",dataIndex:"siteName"},{title:"考试年级",key:"groupName",dataIndex:"groupName"},{title:"考场容量（人）",key:"examPeopleNum",dataIndex:"examPeopleNum"},{title:"监考老师",key:"invigilatorText",dataIndex:"invigilatorText"}],P=l({siteSource:[],siteSpin:!1,tableSource:[],paginations:{pageNo:1,pageSize:10,total:0},groupListOptions:[],subColumns:[{title:"日期",key:"dateText",dataIndex:"dateText"},{title:"时间",key:"timeText",dataIndex:"timeText"},{title:"星期",key:"week",dataIndex:"week"},{title:"考试课程",key:"subjectName",dataIndex:"subjectName"},{title:"主考员",key:"chiefText",dataIndex:"chiefText"},{title:"巡考员",key:"inspectorText",dataIndex:"inspectorText"}]}),B=async()=>{const e={examinationId:O.query.id,groupId:P.groupId};try{const{data:t}=await a(e);P.tableSource=t}catch(t){P.tableSource=[]}},M=async()=>{const e={examinationId:O.query.id,...P.paginations,groupId:P.groupId},{data:t}=await i(e);P.siteSource=t.list,P.paginations.total=t.total},R=c((()=>P.tableSource.reduce(((e,t,a)=>e.concat(`value${a}`)),["title"]))),A=c((()=>P.subColumns.map((e=>P.tableSource.reduce(((t,a,i)=>Object.assign(t,{["value"+i]:a[e.dataIndex]})),{title:e.title}))))),H=e=>{P.paginations=e,M()},z=()=>{B(),M()},E=async()=>{await o({id:O.query.id}).then((e=>{const t=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","科目监考老师表.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},D=async()=>{await s({id:O.query.id}).then((e=>{const t=window.URL.createObjectURL(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","场地监考老师表.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}))};return p((async()=>{await(async()=>{var e;const{data:a}=await t({id:O.query.id});P.groupListOptions=a,P.groupId=null==(e=a[0])?void 0:e.id})(),await B(),await M()})),(t,a)=>{const i=u("a-select"),o=u("a-form-item"),s=u("a-form"),n=u("a-button"),d=u("a-table-column"),r=u("a-table");return m(),b("div",k,[x("div",T,[x("div",C,[y(s,{layout:"inline"},{default:f((()=>[y(o,{label:"年级:"},{default:f((()=>[y(i,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},onChange:z,value:P.groupId,"onUpdate:value":a[0]||(a[0]=e=>P.groupId=e),placeholder:"请选择",options:P.groupListOptions,showArrow:!0,"field-names":{label:"objectName",value:"id"}},null,8,["getPopupContainer","value","options"])])),_:1})])),_:1})]),x("div",S,[x("div",N,[y(n,{onClick:E},{default:f((()=>[v("导出")])),_:1})]),y(r,{bordered:!0,"data-source":A.value,showHeader:!1,pagination:!1},{default:f((()=>[(m(!0),b(j,null,g(R.value,((e,t)=>(m(),h(d,{key:t,dataIndex:e},null,8,["dataIndex"])))),128))])),_:1},8,["data-source"])]),x("div",_,[x("div",L,[y(n,{onClick:D},{default:f((()=>[v("导出")])),_:1})]),y(w(e),{spinning:P.siteSpin,paginations:P.paginations,columns:U,dataSource:P.siteSource,bordered:!1,onChange:H},{bodyCell:f((({column:e,record:t,text:a})=>["invigilatorText"===e.dataIndex?(m(),b("div",{key:0,innerHTML:a},null,8,q)):I("v-if",!0)])),_:1},8,["spinning","paginations","dataSource"])])])])}}},[["__scopeId","data-v-7b3773c6"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/examManage/affair/supervisionTable/index.vue"]]);export{O as default};
