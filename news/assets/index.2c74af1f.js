import"./vue.a2f518ee.js";import{_ as e}from"./empty.1f473950.js";import{_ as a,n as s,aq as i,aw as l}from"./index.7061e8ea.js";import{u as t,a as n,e as c,b as d,c as o,d as r,g as u,i as f,f as p}from"./album.dcc239e6.js";import{D as m}from"./index.1cbb3529.js";import{u as g,a as y}from"./vue-router.907b547c.js";import{m as h,M as k}from"./ant-design-vue.db4d48e3.js";import{r as v,q as b,b8 as A,o as _,a2 as L,a3 as I,c as S,O as w,b as C,a7 as j,a9 as D,a as x,F as V,a8 as F,w as z,h as U,f as K,M as R,u as T,b5 as O,b4 as M,m as E,bz as Y,y as B,W as N,a6 as $}from"./@vue.919ff404.js";import{f as q}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./dayjs.49e29cb2.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";const H={class:"con"},P={class:"list"},Q=["src"],G=["onClick"];var X=a({__name:"importAlbum",props:{classifyId:{type:String,default:""},classesId:{type:String,default:""},kind:{type:String,default:"1"}},emits:["handleOk"],setup(e,{expose:a,emit:l}){const c=e,d=v(!1),o=b({fileList:[],videoUrl:"",imageList:[],btnLoading:!1,action:`http://192.168.3.158:9528${s.fileUpload}`}),r=async e=>{const{size:a,name:s,uid:l}=e,t=a/1024/1024<10;if(a/1024/1024>9&&t){e=await i(e)}if(t){const a=await(e=>new Promise(((a,s)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>a(i.result),i.onerror=e=>s(e)})))(e);o.imageList.push({name:s,file:e,url:a,uid:l,path:null,errorMsg:""}),o.fileList.push(e)}else h.warning("上传图像须小于10MB！");return!1},u=()=>{o.fileList=[],o.imageList=[],d.value=!1},f=async()=>{try{o.btnLoading=!0;const e=[];for(let i=0;i<o.imageList.length;i++){const a=o.imageList[i],s=new FormData;s.append("file",a.file);const{data:l}=await t(s);l.forEach((a=>(e.push(a.url),a.url)))}const a={classifyId:c.classifyId,classesId:c.classesId,urls:e,type:1,kind:c.kind},s=await n(a);h.success(s.message),d.value=!1,o.btnLoading=!1,l("handleOk")}catch(e){o.btnLoading=!1,h.error(e.data.message)}};return a({modalVisible:d,state:o}),(e,a)=>{const s=A("a-button"),i=A("plus-outlined"),l=A("a-upload"),t=A("a-modal");return _(),L(t,{visible:d.value,"onUpdate:visible":a[0]||(a[0]=e=>d.value=e),title:"上传图片",width:890,maskClosable:!1,onOk:f,onCancel:u},{footer:I((()=>[S(s,{onClick:u},{default:I((()=>[w("取消")])),_:1}),S(s,{onClick:f,loading:o.btnLoading,disabled:!o.imageList.length,type:"primary"},{default:I((()=>[w("确认")])),_:1},8,["loading","disabled"])])),default:I((()=>[C("div",H,[S(l,{"file-list":o.fileList,showUploadList:!1,accept:"image/png,image/jpg,image/jpeg",action:"/","before-upload":r,multiple:!0},{default:I((()=>[S(s,{class:"btn"},{icon:I((()=>[S(i)])),default:I((()=>[w(" 添加图片 ")])),_:1})])),_:1},8,["file-list"]),C("p",null,[j(" 最多可上传20张图片，已添加{{\r\n                    state.imageList.length\r\n                }}张，还可添加{{\r\n                    20 - state.imageList.length > 0\r\n                        ? 20 - state.imageList.length\r\n                        : 0\r\n                }}张 "),w(" 已添加"+D(o.imageList.length)+"张 ",1)]),C("div",P,[(_(!0),x(V,null,F(o.imageList,((e,a)=>(_(),x("div",{class:"list_item",key:a},[C("img",{src:e.url,alt:""},null,8,Q),C("div",{class:"del",onClick:e=>(e=>{o.imageList.splice(e,1),o.fileList.splice(e,1)})(a)},"×",8,G)])))),128))])])])),_:1},8,["visible"])}}},[["__scopeId","data-v-5738fbaa"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/campusStyle/components/importAlbum.vue"]]);var Z=a({__name:"moveAlbum",props:{classifyId:{type:String,default:""},classifiyList:{type:Array,default:()=>[]},checkedAlbum:{type:Array,default:()=>[]}},emits:["handelOk","update:classifyId"],setup(e,{expose:a,emit:s}){const i=e,l=b({btnLoading:!1,classifiyList:null}),t=v(!1),n=()=>{const e={ids:i.checkedAlbum,classifyId:l.classifyId};l.btnLoading=!0,c(e).then((e=>{h.success(e.message),s("handelOk")})).finally((()=>{t.value=!1,l.btnLoading=!1}))};return a({visible:t}),z((()=>i.classifyId),(e=>{l.classifyId=e})),z((()=>i.classifiyList),(e=>{l.classifiyList=e})),(e,a)=>{const s=A("a-button"),i=A("a-select-option"),c=A("a-select"),d=A("a-form-item"),o=A("a-form"),r=A("a-modal");return _(),L(r,{maskClosable:!1,visible:t.value,"onUpdate:visible":a[2]||(a[2]=e=>t.value=e),title:"移动视频"},{footer:I((()=>[S(s,{key:"back",onClick:a[0]||(a[0]=e=>t.value=!1)},{default:I((()=>[w("取消")])),_:1}),S(s,{key:"submit",type:"primary",loading:l.btnLoading,onClick:n},{default:I((()=>[w("确定")])),_:1},8,["loading"])])),default:I((()=>[S(o,{layout:"vertical"},{default:I((()=>[S(d,{label:"移动至：",name:"name"},{default:I((()=>[j(' @change="handlechange" '),S(c,{value:l.classifyId,"onUpdate:value":a[1]||(a[1]=e=>l.classifyId=e)},{default:I((()=>[(_(!0),x(V,null,F(l.classifiyList,(e=>(_(),L(i,{key:e.id,value:e.id},{default:I((()=>[w(D(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1},8,["visible"])}}},[["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/campusStyle/components/moveAlbum.vue"]]);function J(){return{delAlbum:e=>new Promise(((a,s)=>{k.confirm({title:"提示",icon:S(q),content:`请确认删除${e.ids.length}张照片`,okText:"确定",okType:"danger",cancelText:"取消",onOk(){d(e).then((e=>{a(e)})).catch((()=>{s()}))},onCancel(){s()}})})),deleteClassifiy:e=>new Promise(((a,s)=>{k.confirm({title:"删除提示",icon:S(q),content:U("div",{},[U("p","确定删除本相册，并清空里面的所有照片？？")]),okText:"确认",cancelText:"取消",onOk(){o({id:e.id}).then((e=>{a(e)})).catch((()=>{s()}))},onCancel(){s()}})})),changeIsShow:e=>new Promise(((a,s)=>{r(e).then((e=>{a(e)})).catch((()=>{s()}))}))}}const W=e=>(O("data-v-14405f07"),e=e(),M(),e),ee={class:"videoAlbum"},ae={class:"left"},se=W((()=>C("span",{class:"tree_icon"},[C("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAIVJREFUKFNj/L+A4RYDA4MqAyr4wsDMYMIYy3ATTRzOZfy/gOE/Dsm7DAwMz3HI3YZoVIxmYJB0wmU4qvjzfQwM95cyMP5fz/efQTuXgYFHnjiNXx4yMFydzMD4/6T6fwZGRuI0wVT9/8/A+P+UBi4/4jVsVCOe4AEFzn0GBgYF0uKD4QEA2DoyATFp0w8AAAAASUVORK5CYII=",alt:""})],-1))),ie={class:"right"},le={key:0},te={key:0},ne={class:"header"},ce={key:0},de={key:1},oe={key:2},re={key:3,class:"btn_list"},ue={key:0,class:"list"},fe=[W((()=>C("p",null,"+",-1))),W((()=>C("p",null,"上传图片",-1)))],pe={key:1,class:"list"},me=[W((()=>C("p",null,"+",-1))),W((()=>C("p",null,"上传图片",-1)))],ge=["src"],ye=W((()=>C("div",{class:"mask"},null,-1))),he={key:2,style:{margin:"16px 16px 0 0","text-align":"right"}},ke={key:1,class:"noData"},ve=[W((()=>C("img",{src:e,alt:""},null,-1))),W((()=>C("p",null,"暂无班级相册，快去新建一个吧",-1)))],be={key:1,class:"noData"},Ae=W((()=>C("img",{src:e,alt:""},null,-1)));var _e=a({__name:"classes",setup(e){const{proxy:a}=E(),{delAlbum:s,deleteClassifiy:i,changeIsShow:t}=J(),n=v(),c=g(),d={name:[{required:!0,message:"请输入相册名称"}]},o=b({classList:[],classesId:null,classifyId:"",albumList:[],checkedVideo:[],checkAll:!1,indeterminate:!1,leftSpinLoad:!1,rightSpinLoad:!1,tabKey:"classes",classifyTitle:"新建相册",classifyShow:!1,classifiyList:[],selectedKeys:[],editFlag:!1,isShow:"",btnLoading:!1,classifyInfo:{id:"",name:""},paginationData:{total:0,current:1,pageSize:15}}),y={key:"id",title:"name"},k=()=>{U("")},U=e=>{const a={kind:1,classesId:o.classesId};o.leftSpinLoad=!0,u(a).then((a=>{var s,i,l;o.classifiyList=a.data,e!=o.selectedKeys[0]&&""!=e||(o.selectedKeys=[null==(s=a.data[0])?void 0:s.id],o.classifyId=null==(i=a.data[0])?void 0:i.id,o.isShow=null==(l=a.data[0])?void 0:l.isShow,N())})).finally((()=>{o.leftSpinLoad=!1}))},O=(e,a)=>{if(e){o.classifyTitle="编辑相册";for(const e in o.classifyInfo)o.classifyInfo[e]=a[e]}else{for(const e in o.classifyInfo)o.classifyInfo[e]="";o.classifyTitle="新增相册"}o.classifyShow=!0},M=()=>{n.value.validate().then((()=>{o.classifyInfo.name?(o.btnLoading=!0,"编辑相册"==o.classifyTitle?Y():B()):h.info("请输入相册名称")})).catch((e=>{}))},Y=()=>{r(o.classifyInfo).then((e=>{h.success("操作成功"),o.classifyShow=!1,U()})).finally((()=>{o.btnLoading=!1}))},B=()=>{const e={kind:1,classesId:o.classesId,name:o.classifyInfo.name};f(e).then((e=>{h.success("操作成功"),o.classifyShow=!1,U()})).finally((()=>{o.btnLoading=!1}))},N=()=>{const e={type:1,kind:1,pageNo:o.paginationData.current,classifyId:o.selectedKeys[0],classesId:o.classesId,pageSize:o.paginationData.pageSize};o.rightSpinLoad=!0,p(e).then((e=>{o.albumList=e.data.list,o.paginationData.total=e.data.total})).finally((()=>{o.rightSpinLoad=!1}))},$=(e,a)=>{o.paginationData.current=1,o.selectedKeys=[e],o.classifyId=e,o.isShow=a.isShow,N()},q=e=>{N()},H=()=>{s({ids:o.checkedVideo}).then((e=>{h.success(e.message),o.paginationData.current=1,N(),o.checkedVideo=[],o.editFlag=!o.editFlag}))},P=()=>{a.$refs.importExportRef.modalVisible=!0,a.$refs.importExportRef.state.fileList=[],a.$refs.importExportRef.state.imageList=[]},Q=()=>{a.$refs.moveAlbumRef.visible=!0},G=()=>{o.editFlag=!1,o.checkedVideo=[],o.paginationData.current=1,N()},W=()=>{o.editFlag=!1,o.checkedVideo=[]},_e=(e,a)=>{o.paginationData.current=e,o.paginationData.pageSize=a,N()},Le=e=>{Object.assign(o,{checkedVideo:e.target.checked?o.albumList.map((e=>e.id)):[],indeterminate:!1,checkAll:e.target.checked})},Ie=e=>{const a={id:o.selectedKeys[0],isShow:e};t(a).then((a=>{h.success(a.message),o.isShow=e,o.checkedVideo=[],U()}))};return z((()=>o.checkedVideo),(e=>{o.indeterminate=!!e.length&&e.length<o.albumList.length,o.checkAll=e.length===o.albumList.length})),K((()=>{l({code:"campusStyle"}).then((e=>{var a;o.classList=e.data,o.classesId=null==(a=o.classList[0])?void 0:a.classesId,o.classList.length>0&&U()}))})),(e,a)=>{const s=A("a-select-option"),l=A("a-select"),t=A("more-outlined"),r=A("a-button"),u=A("a-menu-item"),f=A("a-menu"),p=A("a-dropdown"),g=A("plus-outlined"),v=A("a-spin"),b=A("a-switch"),z=A("a-checkbox"),K=A("a-image"),E=A("a-checkbox-group"),Y=A("a-pagination"),B=A("a-input"),N=A("a-form-item"),J=A("a-form"),Se=A("a-modal");return _(),x(V,null,[j(" 视频相册 "),C("div",ee,[C("div",ae,[S(v,{spinning:o.leftSpinLoad},{default:I((()=>[S(l,{style:{width:"100%","margin-bottom":"20px"},onChange:k,value:o.classesId,"onUpdate:value":a[0]||(a[0]=e=>o.classesId=e),placeholder:"请选择班级"},{default:I((()=>[(_(!0),x(V,null,F(o.classList,(e=>(_(),L(s,{key:e.classesId},{default:I((()=>[w(D(e.classesName),1)])),_:2},1024)))),128))])),_:1},8,["value"]),S(m,{ref:"dempTree",treeData:o.classifiyList,fieldNames:y,onEmitSelect:$,selectedKeys:o.selectedKeys,isShowEmpty:!1},{treeIcon:I((()=>[se])),handleItem:I((({handleItem:e})=>[S(p,{trigger:["hover"]},{overlay:I((()=>[S(f,null,{default:I((()=>[S(u,{onClick:a=>O(!0,e)},{default:I((()=>[S(r,{type:"text"},{default:I((()=>[w("编辑")])),_:1})])),_:2},1032,["onClick"]),S(u,{onClick:a=>{var s;i(s=e).then((e=>{h.success(e.message),o.checkedVideo=[],U(s.id)}))}},{default:I((()=>[S(r,{type:"link",danger:""},{default:I((()=>[w("删除")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:I((()=>[C("a",{class:"ant-dropdown-link handle_icon",style:{"margin-right":"5px"},onClick:a[1]||(a[1]=R((()=>{}),["prevent","stop"]))},["未分组"!==e.name?(_(),L(t,{key:0})):j("v-if",!0)])])),_:2},1024)])),_:1},8,["treeData","selectedKeys"]),o.classList.length>0?(_(),L(r,{key:0,type:"primary",onClick:a[2]||(a[2]=e=>O(!1,{}))},{icon:I((()=>[S(g)])),default:I((()=>[w(" 新建相册 ")])),_:1})):j("v-if",!0)])),_:1},8,["spinning"])]),C("div",ie,[S(v,{spinning:o.rightSpinLoad},{default:I((()=>[o.classList.length>0?(_(),x("div",le,[o.classifiyList.length>0?(_(),x("div",te,[C("div",ne,[o.editFlag?j("v-if",!0):(_(),x("div",ce,[w(" 是否展示在班牌 "),S(b,{checked:o.isShow,onChange:Ie},null,8,["checked"])])),o.editFlag?j("v-if",!0):(_(),x("div",de,[S(r,{type:"primary",onClick:a[3]||(a[3]=e=>o.editFlag=!o.editFlag)},{default:I((()=>[w("编辑")])),_:1})])),o.editFlag?(_(),x("div",oe,[S(z,{checked:o.checkAll,"onUpdate:checked":a[4]||(a[4]=e=>o.checkAll=e),indeterminate:o.indeterminate,onChange:Le},{default:I((()=>[w("全选")])),_:1},8,["checked","indeterminate"]),C("span",null,"已选择"+D(o.checkedVideo.length)+"个",1)])):j("v-if",!0),o.editFlag?(_(),x("div",re,[S(r,{onClick:H,disabled:!o.checkedVideo.length,danger:""},{default:I((()=>[w("删除")])),_:1},8,["disabled"]),S(r,{onClick:Q,disabled:!o.checkedVideo.length},{default:I((()=>[w("移动")])),_:1},8,["disabled"]),S(r,{onClick:W},{default:I((()=>[w("取消")])),_:1})])):j("v-if",!0)]),o.editFlag?j("v-if",!0):(_(),x("div",ue,[C("div",{class:"list_item",onClick:P},fe),(_(!0),x(V,null,F(o.albumList,(e=>(_(),L(K,{key:e.id,src:e.url},null,8,["src"])))),128))])),o.editFlag?(_(),x("div",pe,[S(E,{value:o.checkedVideo,"onUpdate:value":a[5]||(a[5]=e=>o.checkedVideo=e)},{default:I((()=>[C("div",{class:"list_item1",onClick:P},me),(_(!0),x(V,null,F(o.albumList,(e=>(_(),L(z,{key:e.id,value:e.id},{default:I((()=>[C("img",{src:e.url,alt:""},null,8,ge),ye])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])):j("v-if",!0),o.albumList.length>0?(_(),x("div",he,[S(Y,{current:o.paginationData.current,"onUpdate:current":a[6]||(a[6]=e=>o.paginationData.current=e),pageSize:o.paginationData.pageSize,"onUpdate:pageSize":a[7]||(a[7]=e=>o.paginationData.pageSize=e),pageSizeOptions:["15","23","39","55","71"],"show-quick-jumper":"","show-size-changer":"",total:o.paginationData.total,onChange:_e,"show-total":e=>`共 ${e} 条`},null,8,["current","pageSize","total","show-total"])])):j("v-if",!0)])):(_(),x("div",ke,ve))])):(_(),x("div",be,[Ae,C("p",null,[w(" 暂无班级，请前往 "),C("span",{onClick:a[8]||(a[8]=e=>T(c).push({path:"/framework/schoolRoll"}))},"学籍管理"),w(" 创建班级 ")])]))])),_:1},8,["spinning"])]),S(Se,{maskClosable:!1,visible:o.classifyShow,"onUpdate:visible":a[11]||(a[11]=e=>o.classifyShow=e),title:o.classifyTitle,onOk:M,width:"530px"},{footer:I((()=>[S(r,{key:"back",onClick:a[9]||(a[9]=e=>o.classifyShow=!1)},{default:I((()=>[w("取消")])),_:1}),S(r,{key:"submit",type:"primary",loading:o.btnLoading,onClick:M},{default:I((()=>[w("确定")])),_:1},8,["loading"])])),default:I((()=>[S(J,{layout:"vertical",rules:d,ref_key:"classifyRules",ref:n,name:"base",model:o.classifyInfo},{default:I((()=>[S(N,{label:"相册名称：",name:"name"},{default:I((()=>[S(B,{maxlength:20,value:o.classifyInfo.name,"onUpdate:value":a[10]||(a[10]=e=>o.classifyInfo.name=e),placeholder:"请输入相册名称"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"]),S(X,{ref:"importExportRef",classesId:o.classesId,classifyId:o.selectedKeys[0],onHandleOk:q},null,8,["classesId","classifyId"]),S(Z,{ref:"moveAlbumRef",classifiyList:o.classifiyList,classifyId:o.classifyId,onHandelOk:G,checkedAlbum:o.checkedVideo},null,8,["classifiyList","classifyId","checkedAlbum"])])],2112)}}},[["__scopeId","data-v-14405f07"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/campusStyle/components/classes.vue"]]);const Le=e=>(O("data-v-3da37dd1"),e=e(),M(),e),Ie={class:"videoAlbum"},Se={class:"left"},we=Le((()=>C("span",{class:"tree_icon"},[C("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAIVJREFUKFNj/L+A4RYDA4MqAyr4wsDMYMIYy3ATTRzOZfy/gOE/Dsm7DAwMz3HI3YZoVIxmYJB0wmU4qvjzfQwM95cyMP5fz/efQTuXgYFHnjiNXx4yMFydzMD4/6T6fwZGRuI0wVT9/8/A+P+UBi4/4jVsVCOe4AEFzn0GBgYF0uKD4QEA2DoyATFp0w8AAAAASUVORK5CYII=",alt:""})],-1))),Ce={class:"right"},je={key:0},De={class:"header"},xe={key:0},Ve={key:1},Fe={key:2},ze={key:3,class:"btn_list"},Ue={key:0,class:"list"},Ke=[Le((()=>C("p",null,"+",-1))),Le((()=>C("p",null,"上传图片",-1)))],Re={key:1,class:"list"},Te=[Le((()=>C("p",null,"+",-1))),Le((()=>C("p",null,"上传图片",-1)))],Oe=["src"],Me=Le((()=>C("div",{class:"mask"},null,-1))),Ee={key:2,style:{margin:"16px 16px 0 0","text-align":"right"}},Ye={key:1,class:"noData"},Be=[Le((()=>C("img",{src:e,alt:""},null,-1))),Le((()=>C("p",null,"暂无校级相册，快去新建一个吧",-1)))];var Ne=a({__name:"schoolLevel",setup(e){const{proxy:a}=E(),s=v(),i={name:[{required:!0,message:"请输入相册名称"}]},{delAlbum:l,deleteClassifiy:t,changeIsShow:n}=J(),c=b({classList:[],albumList:[],checkedVideo:[],videoUrl:"",classifyId:"",tabKey:"classes",classifyTitle:"新建相册",classifyShow:!1,classifiyList:[],selectedKeys:[],editFlag:!1,btnLoading:!1,classifyInfo:{id:"",name:""},checkAll:!1,isShow:"",indeterminate:!1,leftSpinLoad:!1,rightSpinLoad:!1,paginationData:{total:0,current:1,pageSize:15},delFlag:!1}),d={key:"id",title:"name"},o=e=>{c.leftSpinLoad=!0,u({kind:2}).then((a=>{var s,i,l;c.classifiyList=a.data,e!=c.selectedKeys[0]&&""!=e||(c.selectedKeys=[null==(s=a.data[0])?void 0:s.id],c.classifyId=null==(i=a.data[0])?void 0:i.id,c.isShow=null==(l=a.data[0])?void 0:l.isShow,T())})).finally((()=>{c.leftSpinLoad=!1}))},g=(e,a)=>{if(e){c.classifyTitle="编辑相册";for(const e in c.classifyInfo)c.classifyInfo[e]=a[e]}else{for(const e in c.classifyInfo)c.classifyInfo[e]="";c.classifyTitle="新增相册"}c.classifyShow=!0},y=()=>{s.value.validate().then((()=>{c.classifyInfo.name?(c.btnLoading=!0,"编辑相册"==c.classifyTitle?k():U()):h.info("请输入相册名称")})).catch((e=>{}))},k=()=>{r(c.classifyInfo).then((e=>{h.success("操作成功"),c.classifyShow=!1,o()})).finally((()=>{c.btnLoading=!1}))},U=()=>{const e={kind:2,name:c.classifyInfo.name};f(e).then((e=>{h.success("操作成功"),c.classifyShow=!1,o()})).finally((()=>{c.btnLoading=!1}))},T=()=>{const e={type:1,kind:2,pageNo:c.paginationData.current,classifyId:c.selectedKeys[0],pageSize:c.paginationData.pageSize};c.rightSpinLoad=!0,p(e).then((e=>{c.albumList=e.data.list,c.paginationData.total=e.data.total})).finally((()=>{c.rightSpinLoad=!1}))},O=(e,a)=>{c.paginationData.current=1,c.selectedKeys=[e],c.classifyId=e,c.isShow=a.isShow,T()},M=e=>{T()},Y=()=>{l({ids:c.checkedVideo}).then((e=>{h.success(e.message),c.paginationData.current=1,T(),c.checkedVideo=[],c.editFlag=!c.editFlag}))},B=()=>{a.$refs.importExportRef.modalVisible=!0,a.$refs.importExportRef.state.fileList=[],a.$refs.importExportRef.state.imageList=[]},N=()=>{a.$refs.moveAlbumRef.visible=!0},$=()=>{c.editFlag=!1,c.checkedVideo=[],c.paginationData.current=1,T()},q=()=>{c.editFlag=!1,c.checkedVideo=[]},H=(e,a)=>{c.paginationData.current=e,c.paginationData.pageSize=a,T()},P=e=>{Object.assign(c,{checkedVideo:e.target.checked?c.albumList.map((e=>e.id)):[],indeterminate:!1,checkAll:e.target.checked})},Q=e=>{const a={id:c.selectedKeys[0],isShow:e};n(a).then((a=>{h.success(a.message),c.isShow=e,o()}))};return z((()=>c.checkedVideo),(e=>{c.indeterminate=!!e.length&&e.length<c.albumList.length,c.checkAll=e.length===c.albumList.length})),K((()=>{o()})),(e,a)=>{const l=A("more-outlined"),n=A("a-button"),r=A("a-menu-item"),u=A("a-menu"),f=A("a-dropdown"),p=A("plus-outlined"),k=A("a-spin"),v=A("a-switch"),b=A("a-checkbox"),z=A("a-image"),U=A("a-checkbox-group"),K=A("a-pagination"),T=A("a-input"),E=A("a-form-item"),G=A("a-form"),J=A("a-modal");return _(),x(V,null,[j(" 视频相册 "),C("div",Ie,[C("div",Se,[S(k,{spinning:c.leftSpinLoad},{default:I((()=>[S(m,{ref:"dempTree",treeData:c.classifiyList,fieldNames:d,onEmitSelect:O,selectedKeys:c.selectedKeys,isShowEmpty:!1},{treeIcon:I((()=>[we])),handleItem:I((({handleItem:e})=>[S(f,{trigger:["hover"]},{overlay:I((()=>[S(u,null,{default:I((()=>[S(r,{onClick:a=>g(!0,e)},{default:I((()=>[S(n,{type:"text"},{default:I((()=>[w("编辑")])),_:1})])),_:2},1032,["onClick"]),S(r,{onClick:a=>{var s;t(s=e).then((e=>{c.delFlag=!0,h.success(e.message),c.checkedVideo=[],o(s.id)}))}},{default:I((()=>[S(n,{type:"link",danger:""},{default:I((()=>[w("删除")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:I((()=>[C("a",{class:"ant-dropdown-link handle_icon",style:{"margin-right":"5px"},onClick:a[0]||(a[0]=R((()=>{}),["prevent","stop"]))},["未分组"!==e.name?(_(),L(l,{key:0})):j("v-if",!0)])])),_:2},1024)])),_:1},8,["treeData","selectedKeys"]),S(n,{type:"primary",onClick:a[1]||(a[1]=e=>g(!1,{}))},{icon:I((()=>[S(p)])),default:I((()=>[w(" 新建相册 ")])),_:1})])),_:1},8,["spinning"])]),C("div",Ce,[S(k,{spinning:c.rightSpinLoad},{default:I((()=>[c.classifiyList.length>0?(_(),x("div",je,[C("div",De,[c.editFlag?j("v-if",!0):(_(),x("div",xe,[w(" 是否展示在班牌 "),S(v,{checked:c.isShow,onChange:Q},null,8,["checked"])])),c.editFlag?j("v-if",!0):(_(),x("div",Ve,[S(n,{type:"primary",onClick:a[2]||(a[2]=e=>c.editFlag=!c.editFlag)},{default:I((()=>[w("编辑")])),_:1})])),c.editFlag?(_(),x("div",Fe,[S(b,{checked:c.checkAll,"onUpdate:checked":a[3]||(a[3]=e=>c.checkAll=e),indeterminate:c.indeterminate,onChange:P},{default:I((()=>[w("全选")])),_:1},8,["checked","indeterminate"]),C("span",null,"已选择"+D(c.checkedVideo.length)+"个",1)])):j("v-if",!0),c.editFlag?(_(),x("div",ze,[S(n,{onClick:Y,disabled:!c.checkedVideo.length,danger:""},{default:I((()=>[w("删除")])),_:1},8,["disabled"]),S(n,{onClick:N,disabled:!c.checkedVideo.length},{default:I((()=>[w("移动")])),_:1},8,["disabled"]),S(n,{onClick:q},{default:I((()=>[w("取消")])),_:1})])):j("v-if",!0)]),c.editFlag?j("v-if",!0):(_(),x("div",Ue,[C("div",{class:"list_item",onClick:B},Ke),(_(!0),x(V,null,F(c.albumList,(e=>(_(),L(z,{key:e.id,src:e.url},null,8,["src"])))),128))])),c.editFlag?(_(),x("div",Re,[S(U,{value:c.checkedVideo,"onUpdate:value":a[4]||(a[4]=e=>c.checkedVideo=e)},{default:I((()=>[C("div",{class:"list_item1",onClick:B},Te),(_(!0),x(V,null,F(c.albumList,(e=>(_(),L(b,{key:e.id,value:e.id},{default:I((()=>[C("img",{src:e.url},null,8,Oe),Me])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])):j("v-if",!0),c.albumList.length>0?(_(),x("div",Ee,[S(K,{current:c.paginationData.current,"onUpdate:current":a[5]||(a[5]=e=>c.paginationData.current=e),pageSize:c.paginationData.pageSize,"onUpdate:pageSize":a[6]||(a[6]=e=>c.paginationData.pageSize=e),"show-quick-jumper":"",pageSizeOptions:["15","23","39","55","71"],"show-size-changer":"",total:c.paginationData.total,onChange:H,"show-total":e=>`共 ${e} 条`},null,8,["current","pageSize","total","show-total"])])):j("v-if",!0)])):(_(),x("div",Ye,Be))])),_:1},8,["spinning"])]),S(J,{maskClosable:!1,visible:c.classifyShow,"onUpdate:visible":a[9]||(a[9]=e=>c.classifyShow=e),title:c.classifyTitle,onOk:y,width:"530px"},{footer:I((()=>[S(n,{key:"back",onClick:a[7]||(a[7]=e=>c.classifyShow=!1)},{default:I((()=>[w("取消")])),_:1}),S(n,{key:"submit",type:"primary",loading:c.btnLoading,onClick:y},{default:I((()=>[w("确定")])),_:1},8,["loading"])])),default:I((()=>[S(G,{layout:"vertical",rules:i,ref_key:"classifyRules",ref:s,name:"base",model:c.classifyInfo},{default:I((()=>[S(E,{label:"相册名称：",name:"name"},{default:I((()=>[S(T,{maxlength:20,value:c.classifyInfo.name,"onUpdate:value":a[8]||(a[8]=e=>c.classifyInfo.name=e),placeholder:"请输入相册名称"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"]),S(X,{ref:"importExportRef",classifyId:c.selectedKeys[0],kind:"2",onHandleOk:M},null,8,["classifyId"]),j(" v-model "),S(Z,{ref:"moveAlbumRef",classifiyList:c.classifiyList,classifyId:c.classifyId,onHandelOk:$,checkedAlbum:c.checkedVideo},null,8,["classifiyList","classifyId","checkedAlbum"])])],2112)}}},[["__scopeId","data-v-3da37dd1"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/campusStyle/components/schoolLevel.vue"]]);const $e={class:"videoAlbum"},qe={class:"header"},He=(e=>(O("data-v-0d3f0668"),e=e(),M(),e))((()=>C("i",{class:"iconfont icon-xingzhuangjiehe19"},null,-1)));var Pe=a({__name:"index",setup(e){Y((e=>({"0d3f0668-showBackStyle":e.showBackStyle})));const a=y(),s=g(),i=v(0),l=v([{label:"班级",index:0},{label:"校级",index:1}]),t=e=>{i.value=e},n=B((()=>[_e,Ne][i.value])),c=()=>{s.push({name:a.query.source})};return(e,a)=>{const s=A("a-button"),d=A("a-tab-pane"),o=A("a-tabs");return _(),x("div",$e,[C("div",qe,[S(o,{activeKey:i.value,"onUpdate:activeKey":a[0]||(a[0]=e=>i.value=e),onChange:t},{leftExtra:I((()=>[N(e.$slots,"leftExtra",{},(()=>[S(s,{type:"text",class:"tabs_back",onClick:c},{default:I((()=>[He,j(' <arrow-left-outlined class="tabs_back__icon" /> ')])),_:1})]),!0)])),default:I((()=>[(_(!0),x(V,null,F(l.value,(e=>(_(),L(d,{key:e.index,tab:e.label},null,8,["tab"])))),128))])),_:3},8,["activeKey"])]),(_(),L($(n.value)))])}}},[["__scopeId","data-v-0d3f0668"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/campusStyle/index.vue"]]);export{Pe as default};
