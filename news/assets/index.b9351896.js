import"./vue.a2f518ee.js";import{_ as e,u as a,p as t,L as s}from"./index.7061e8ea.js";import{g as i,a as n,s as o,d as l}from"./exam.ac418e80.js";import{Y as d}from"./table.81b98c8b.js";import{M as r,m as c}from"./ant-design-vue.db4d48e3.js";import{u as p}from"./vue-router.907b547c.js";import{e as m,y as u,q as b,f as y,b8 as f,o as g,a as j,b as v,c as k,a3 as h,O as x,F as C,a9 as _,a7 as w,a4 as I,u as T,b5 as M,b4 as O}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./dayjs.49e29cb2.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";const L={class:"testAdmin"},q=(e=>(M("data-v-977056a6"),e=e(),O(),e))((()=>v("div",{class:"testAdmin_head"},"考试管理",-1))),N={class:"mainPage"},A={class:"filterPart"},D={key:1,style:{display:"flex","align-items":"center"}},V=m({name:"testAdmin"});var B=e(Object.assign(V,{setup(e){const m=a(),M=p(),O=[{title:"考试名称",key:"name",dataIndex:"name"},{title:"考试时间",key:"examTime",dataIndex:"examTime"},{title:"考试对象",key:"objectName",dataIndex:"objectName"},{title:"操作",key:"examOperate",dataIndex:"examOperate",width:"100px"}],V=u((()=>{const e=[];return m.state.base.commentJsonKeys.INIT_ROLL_LIST.forEach((a=>"grade"!==a.key&&e.push(a.level))),e})),B=e=>i({...e,objectId:P.objectId}),P=b({managerVisible:!1,selectTabs:[{tab:"选择年级",key:2,checked:!0,disabled:V}]}),U=()=>{P.managerVisible=!0},S=()=>{s.set("examNewForm",1),M.push({path:"/appModel/examManage/append",query:{type:"append"}})},F=e=>{P.groupListOptions=e,P.objectId=e[0].id},K=()=>{B.update(!1)},z=()=>{delete P.objectId,B.update(!1)};return y((()=>{(async()=>{const{data:e}=await n();P.tree=e})()})),(e,a)=>{const s=f("a-select"),i=f("a-form-item"),n=f("SearchOutlined"),p=f("a-button"),m=f("redo-outlined"),u=f("a-form"),b=f("plus-outlined");return g(),j("div",L,[q,v("div",N,[v("div",A,[k(u,{layout:"inline"},{default:h((()=>[k(i,{label:"年级："},{default:h((()=>[k(s,{getPopupContainer:e=>e.parentNode,style:{width:"360px"},value:P.objectId,"onUpdate:value":a[0]||(a[0]=e=>P.objectId=e),placeholder:"请选择",options:P.groupListOptions,onDropdownVisibleChange:U,open:!1,showArrow:!0,"field-names":{label:"showName",value:"id"}},null,8,["getPopupContainer","value","options"])])),_:1}),k(i,null,{default:h((()=>[k(p,{type:"primary",style:{"margin-right":"12px"},onClick:K},{icon:h((()=>[k(n,{style:{"margin-right":"4px"}})])),default:h((()=>[x(" 查询 ")])),_:1}),k(p,{onClick:z},{icon:h((()=>[k(m,{style:{"margin-right":"4px"}})])),default:h((()=>[x(" 重置 ")])),_:1})])),_:1})])),_:1}),v("div",null,[k(p,{onClick:S,type:"primary"},{icon:h((()=>[k(b,{style:{"margin-right":"8px"}})])),default:h((()=>[x("新增考试")])),_:1})])]),k(T(d),{columns:O,loadData:B},{bodyCell:h((({column:e,record:a})=>["examTime"===e.dataIndex?(g(),j(C,{key:0},[x(_(a.startTime+"至"+a.endTime),1)],64)):w("v-if",!0),"examOperate"===e.key?(g(),j("div",D,[k(p,{onClick:e=>{return t=a.id,void M.push({path:"/appModel/examManage/append",query:{type:"look",id:t}});var t},type:"link",style:{"margin-left":"0"}},{default:h((()=>[x("查看")])),_:2},1032,["onClick"]),k(p,{disabled:a.started,onClick:e=>{return t=a.id,void r.confirm({title:"立即启用",type:"warning",content:"立即启用后，将不可再更改所有设置信息。",confirmButtonText:"确认",cancelButtonText:"取消",onOk:async()=>{await o({id:t}),c.success("考试启用成功！"),await z()},onCancel(){c.warning("已取消!")}});var t},type:"link",style:{"margin-left":"0"},class:I({isdis:a.started})},{default:h((()=>[x("立即启用")])),_:2},1032,["disabled","onClick","class"]),k(p,{disabled:a.started,onClick:e=>{return t=a.id,void M.push({path:"/appModel/examManage/append",query:{type:"amend",id:t}});var t},type:"link",style:{"margin-left":"0"},class:I({isdis:a.started})},{default:h((()=>[x("修改")])),_:2},1032,["disabled","onClick","class"]),k(p,{onClick:e=>{return t=a.id,void M.push({path:"/appModel/examManage/affair",query:{id:t}});var t},type:"link",style:{"margin-left":"0"}},{default:h((()=>[x("考务管理 ")])),_:2},1032,["onClick"]),k(p,{disabled:!a.signIn,onClick:e=>{return t=a,void M.push({path:"/appModel/examManage/signTable",query:{id:t.id,name:t.name}});var t},type:"link",class:I({isdis:!a.signIn}),style:{"margin-left":"0"}},{default:h((()=>[x("签到表 ")])),_:2},1032,["disabled","onClick","class"]),k(p,{type:"link",style:{color:"#f5222d"},onClick:e=>{return t=a.id,void r.confirm({title:"删除",type:"warning",content:"确定删除该条考试?",confirmButtonText:"确认",cancelButtonText:"取消",onOk:async()=>{await l({id:t}),c.success("删除成功！"),await z()},onCancel(){c.warning("已取消!")}});var t}},{default:h((()=>[x("删除")])),_:2},1032,["onClick"])])):w("v-if",!0)])),_:1}),w(" 年级选择 "),k(T(t),{multiple:!1,treeData:P.tree,tabs:P.selectTabs,mode:"depa",visible:P.managerVisible,"onUpdate:visible":a[1]||(a[1]=e=>P.managerVisible=e),selectedKeys:[],checked:P.managerList,"onUpdate:checked":a[2]||(a[2]=a=>e.checkedList=a),onHandleOk:F},null,8,["treeData","tabs","visible","checked"])])])}}}),[["__scopeId","data-v-977056a6"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/teachManager/page/testAdmin/index.vue"]]);export{B as default};
