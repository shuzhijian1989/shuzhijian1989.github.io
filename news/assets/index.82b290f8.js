import"./vue.a2f518ee.js";import{m as a}from"./ant-design-vue.db4d48e3.js";import{_ as s}from"./index.272083a4.js";import{c as e,e as i,g as t,u as l,a as d,d as o}from"./classCard.34617283.js";import{_ as n,b1 as r,a$ as c}from"./index.7061e8ea.js";import{s as m}from"./synchronFace.8dba19bd.js";import{c as u}from"./index.323b38c6.js";import{r as p,q as g,f as b,b8 as f,I as v,o as C,a as y,a7 as h,b as j,c as I,H as x,a2 as _,a3 as k,O as L,u as F,F as w,a9 as S,a8 as q,b5 as N,b4 as V,m as T}from"./@vue.919ff404.js";import{E as z}from"./@ant-design.2e172c39.js";import"./@babel.6d5f88cb.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./@ctrl.c020ccd3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./dayjs.49e29cb2.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./FilterDropdown.5a779a00.js";const U={class:"classCard"},D=(a=>(N("data-v-317ae8a6"),a=a(),V(),a))((()=>j("div",{class:"classCardTitle"},"班牌列表",-1))),E={class:"topButton"},B={key:0,class:"editable-row-operations"},M=["onClick"],O=["onClick"],R=["onClick"],$={key:0},H={key:1},K={class:"editButton"};var A=n({__name:"index",setup(n){const{proxy:N}=T(),V=p(),A={name:[{required:!0,message:"请输入设备名称"}],no:[{required:!0,message:"请输入设备编号"}],equipmentTypeId:[{required:!0,message:"请输入设备类型"}],buildingId:[{required:!0,message:"请输入所在建筑"}],siteId:[{required:!0,message:"请输入所在场地"}]},G=g({searchLoading:!1,deleteLoging:!1,submitLoading:!1,spinning:!1,searchName:"",pagination:{pageNo:1,pageSize:10,total:0},classCardList:[],classCardVisible:!1,isEdit:!1,classCardForm:{name:"",no:"",equipmentTypeId:2,buildingId:"",siteId:""},classCardId:"",typeList:[],buildData:[],siteList:[]}),J=()=>{G.spinning=!0;const a={...G.pagination,name:G.searchName,status:G.classCardList.status};e(a).then((a=>{G.classCardList=a.data.list,G.pagination.total=a.data.total})).finally((()=>{G.searchLoading=!1,G.spinning=!1}))},P=(a,s)=>{W(),G.isEdit=a,!1===a?(G.classCardVisible=!0,G.classCardForm={},G.classCardForm.equipmentTypeId=2):(G.classCardVisible=!0,G.classCardForm.buildingId=s.buildingId,G.classCardId=s.id,X(s.id),Q())},Q=()=>{G.classCardForm.siteId="";const a={pageNo:1,pageSize:999,buildingId:G.classCardForm.buildingId};c(a).then((a=>{G.siteList=a.data.list})).finally((()=>{G.deleteLoging=!1}))},W=()=>{i().then((a=>{G.typeList=a.data}))},X=a=>{t({id:a}).then((a=>{G.classCardForm=a.data,J()}))},Y=()=>{V.value.validate().then((()=>{G.isEdit?Z():aa()})).catch((a=>{}))},Z=()=>{G.submitLoading=!0,l(G.classCardForm,{id:G.classCardId}).then((s=>{G.classCardVisible=!1,a.success(s.message),J()})).finally((()=>{G.submitLoading=!1}))},aa=()=>{G.submitLoading=!0,d(G.classCardForm).then((s=>{G.classCardVisible=!1,a.success(s.message),J()})).finally((()=>{G.submitLoading=!1}))},sa=a=>{G.searchLoading=!0,G.searchName=a,G.pagination.pageNo=1,G.pagination.pageSize=10,J()},ea=a=>{a.status&&(G.classCardList.status=a.status[0]),G.pagination.pageNo=a.current,G.pagination.pageSize=a.pageSize,J()};return b((()=>{J(),r().then((a=>{G.buildData=a.data})).finally((()=>{G.deleteLoging=!1})),W()})),(e,i)=>{const t=f("a-input-search"),l=f("plus-outlined"),d=f("a-button"),n=f("a-badge"),r=f("a-spin"),c=f("a-input"),p=f("a-form-item"),g=f("a-select-option"),b=f("a-select"),T=f("a-form"),W=f("a-drawer"),X=v("auth");return C(),y("div",U,[D,h(" 搜索操作按钮 "),j("div",E,[I(t,{placeholder:"请输入设备编号/设备名称",style:{width:"336px",height:"36px"},loading:G.searchLoading,onSearch:sa},null,8,["loading"]),j("div",null,[x((C(),_(d,{type:"primary",onClick:i[0]||(i[0]=a=>P(!1))},{icon:k((()=>[I(l)])),default:k((()=>[L(" 添加设备 ")])),_:1})),[[X,"add","deviceManagement"]])])]),h(" 表格 "),I(r,{spinning:G.spinning},{default:k((()=>[I(s,{style:{"margin-top":"16px"},columns:F(u),dataSource:G.classCardList,totals:G.pagination,rowSelection:!1,onOnSelectedRowKeys:ea},{bodyCell:k((({column:s,record:e})=>["operation"===s.dataIndex?(C(),y("div",B,[1==e.status?(C(),y("a",{key:0,style:{color:"var(--primary-color)","margin-right":"16px"},onClick:s=>{return i=e.siteId,void m({deviceNo:i}).then((s=>{a.success(s.message)}));var i}},"一键同步",8,M)):h("v-if",!0),x((C(),y("a",{style:{color:"var(--primary-color)"},onClick:a=>P(!0,e)},[L("编辑")],8,O)),[[X,"edit"]]),x((C(),y("a",{style:{color:"#f5222d","margin-left":"16px"},onClick:s=>{return i=e,void N.$confirm({title:"删除提示",icon:I(z),content:"删除后不可恢复，如需继续删除，请点击确定",okType:"danger",okText:"确定",cancelText:"取消",onOk(){o({id:i.id}).then((s=>{a.success(s.message),J()}))}});var i}},[L("删除")],8,R)),[[X,"remove"]])])):h("v-if",!0),"status"===s.dataIndex?(C(),_(n,{key:1,status:1==e.status?"success":0==e.status?"default":"",text:1==e.status?"在线":0==e.status?"离线":"-"},null,8,["status","text"])):h("v-if",!0),"no"===s.dataIndex?(C(),y(w,{key:2},[e.no?(C(),y("span",$,S(e.no),1)):(C(),y("span",H,"-"))],64)):h("v-if",!0)])),_:1},8,["columns","dataSource","totals"])])),_:1},8,["spinning"]),h(" 弹框 "),I(W,{class:"drawerButton",visible:G.classCardVisible,"onUpdate:visible":i[6]||(i[6]=a=>G.classCardVisible=a),title:G.isEdit?"编辑设备":"添加设备",maskClosable:!1},{default:k((()=>[I(T,{layout:"vertical",rules:A,ref_key:"classCardFromRef",ref:V,name:"base",model:G.classCardForm},{default:k((()=>[I(p,{label:"设备名称：",name:"name"},{default:k((()=>[I(c,{maxlength:20,value:G.classCardForm.name,"onUpdate:value":i[1]||(i[1]=a=>G.classCardForm.name=a),placeholder:"请输入"},null,8,["value"])])),_:1}),I(p,{label:"设备编号：",name:"no"},{default:k((()=>[I(c,{maxlength:20,value:G.classCardForm.no,"onUpdate:value":i[2]||(i[2]=a=>G.classCardForm.no=a),placeholder:"请输入"},null,8,["value"])])),_:1}),I(p,{label:"所在建筑：",name:"buildingId"},{default:k((()=>[I(b,{value:G.classCardForm.buildingId,"onUpdate:value":i[3]||(i[3]=a=>G.classCardForm.buildingId=a),placeholder:"请输入",onChange:Q},{default:k((()=>[(C(!0),y(w,null,q(G.buildData,(a=>(C(),_(g,{key:a.id,value:a.id},{default:k((()=>[L(S(a.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),I(p,{label:"所在场地：",name:"siteId"},{default:k((()=>[I(b,{value:G.classCardForm.siteId,"onUpdate:value":i[4]||(i[4]=a=>G.classCardForm.siteId=a),placeholder:"请输入"},{default:k((()=>[(C(!0),y(w,null,q(G.siteList,(a=>(C(),_(g,{key:a.id,value:a.id},{default:k((()=>[L(S(a.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),I(p,{style:{position:"absolute",left:"0",bottom:"-24px",width:"100%",background:"#fff"}},{default:k((()=>[j("div",K,[I(d,{style:{"margin-right":"10px"},onClick:i[5]||(i[5]=a=>G.classCardVisible=!1)},{default:k((()=>[L("取消")])),_:1}),I(r,{spinning:G.submitLoading},{default:k((()=>[I(d,{type:"primary",onClick:Y},{default:k((()=>[L("确定")])),_:1})])),_:1},8,["spinning"])])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}},[["__scopeId","data-v-317ae8a6"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/basicManagement/deviceManagement/classCard/index.vue"]]);export{A as default};
