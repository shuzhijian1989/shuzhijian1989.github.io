import"./vue.a2f518ee.js";import{_ as s,n as e,bI as a,bJ as t,bK as l,aw as o,bL as n}from"./index.7061e8ea.js";import{m as i}from"./ant-design-vue.db4d48e3.js";import{e as c,q as r,r as d,f as u,b8 as p,o as m,a as g,b as v,c as f,a3 as j,O as b,a9 as h,F as y,a8 as I,a2 as w,b5 as _,b4 as N}from"./@vue.919ff404.js";import"./@babel.6d5f88cb.js";/* empty css                    */import"./secure-ls.8c8acb46.js";import"./vue-router.907b547c.js";import"./nprogress.c2257662.js";import"./axios.7aed06b8.js";import"./dayjs.49e29cb2.js";import"./qs.e55e9b28.js";import"./side-channel.ea627785.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.e2cfb4a5.js";import"./@ant-design.2e172c39.js";import"./@ctrl.c020ccd3.js";import"./vuex.f308ecec.js";import"./vuex-persistedstate.fa252374.js";import"./vue-grid-layout.a3ef67ec.js";import"./resize-observer-polyfill.f664b406.js";import"./vue-types.022beab3.js";import"./dom-align.0991ecc5.js";import"./lodash-es.36dcd19c.js";import"./async-validator.267d9719.js";import"./scroll-into-view-if-needed.61c672a4.js";import"./compute-scroll-into-view.17358474.js";const k=s=>(_("data-v-49acb503"),s=s(),N(),s),x={class:"main"},C={class:"content"},U={class:"head"},B={class:"classInfo"},L={class:"iconImg"},V={class:"upimg"},z={class:"classBtn"},R=k((()=>v("span",{class:"ant-dropdown-link"},"［切换班级］",-1))),M=k((()=>v("span",{class:"classMess"},"班主任",-1))),O=k((()=>v("span",{class:"classMess"},"任课教师",-1))),F=k((()=>v("span",{class:"classMess"},"学生人数 ",-1))),S={key:0},q={key:1,class:"class_information_main"},D={class:"class_list_content"},E={class:"list_content"},G={class:"class_title"},J={class:"class_cont"},K={class:"editModal"},P={style:{width:"90%"}},T=["onClick"],A=c({name:"classInfo"});var H=s(Object.assign(A,{setup(s){const c=r({isNullName:!1,actionUrl:`http://192.168.3.158:9528${e.fileUpload}`,sloganBeg:{classesId:""},className:"",master:"",teacherNums:"",studentNums:"",fileList:null,icon:{id:"",classesIcon:""},classInfos:[],sloganList:[],setslogan:{classesId:"",settings:[]}}),_=d(!1),N=d(!1),k=()=>{_.value=!0;const s=c.sloganList.map((s=>({id:s.id,project:s.project,projectValue:s.projectValue,sort:s.sort})));c.setslogan.settings=s,c.setslogan.classesId=c.sloganBeg.classesId},A=async()=>{if(0===c.setslogan.settings.length)return _.value=!1,void Q();let s="",e="";c.setslogan.settings.forEach(((a,t)=>{const l=a.project;""==a.projectValue&&(s="内容未填写"),""==l&&(e="名称未填写")})),""!=s?i.error(s):""!=e?i.error(e):(N.value=!0,await a(c.setslogan),_.value=!1,i.success("编辑班级信息成功！"),Q(),N.value=!1)},H=()=>{_.value=!1,Q()},Y=()=>{const s=c.setslogan.settings;0!==s.length?s.length>20?i.error("最多只能添加20个项目！"):s[s.length-1].project?s[s.length-1].projectValue?c.setslogan.settings.push({project:"",projectValue:"",sort:s.length}):i.error("内容未填写,请填写后再添加！"):i.error("名称未填写,请填写后再添加！"):c.setslogan.settings.push({project:"",projectValue:"",sort:s.length})},$=s=>{const e=s.target.value,a=c.setslogan.settings.map((s=>s.project));let t=0;for(let l=0;l<a.length;l++)e===a[l]&&t++;t>=2&&(s.target.value="",i.warning("名称重复，请重新输入！"))},Q=async()=>{const s=await l(c.sloganBeg);c.sloganList=s.data};const W=s=>{s.file.status,"done"===s.file.status&&function(s,e){const a=new FileReader;a.addEventListener("load",(()=>e(a.result))),a.readAsDataURL(s)}(s.file.originFileObj,(e=>{c.icon.classesIcon=s.file.response.data[0].url,n(c.icon)})),"error"===s.file.status&&i.error("上传错误！")},X=s=>{const e=["image/jpeg","image/jpg","image/png"].indexOf(s.type)>-1,a=s.size/1024<500;return e||i.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||i.error("上传头像图片大小不能超过 500KB!"),e&&a};return u((()=>{(async()=>{var s,e,a,t,l,n,i;const{data:r}=await o({code:"smartClassSign"});c.classInfos=r,c.className=null==(s=c.classInfos[0])?void 0:s.classesName,c.master=null==(e=c.classInfos[0])?void 0:e.master,c.studentNums=null==(a=c.classInfos[0])?void 0:a.studentNums,c.teacherNums=null==(t=c.classInfos[0])?void 0:t.teacherNums,c.sloganBeg.classesId=null==(l=c.classInfos[0])?void 0:l.classesId,c.icon.id=null==(n=c.classInfos[0])?void 0:n.classesId,c.icon.classesIcon=null==(i=c.classInfos[0])?void 0:i.classesIcon,c.classInfos.length>0&&Q()})()})),(s,e)=>{const a=p("a-button"),l=p("UserOutlined"),o=p("a-avatar"),n=p("a-upload"),i=p("a-menu-item"),r=p("a-menu"),d=p("a-dropdown"),u=p("a-divider"),Z=p("a-empty"),ss=p("a-textarea"),es=p("a-input-group"),as=p("plus-outlined"),ts=p("a-modal");return m(),g(y,null,[v("div",x,[v("div",C,[v("div",U,[f(a,{type:"primary",onClick:k},{default:j((()=>[b("编辑")])),_:1})]),v("div",B,[v("div",L,[v("div",null,[f(o,{size:64,src:c.icon.classesIcon?c.icon.classesIcon:"/image/classde1.png",style:{"background-color":"#ffffff"}},{icon:j((()=>[f(l)])),_:1},8,["src"])]),v("div",V,[f(n,{accept:"image/jpeg,image/png",class:"avatar-uploader","show-upload-list":!1,action:c.actionUrl,"before-upload":X,onChange:W},{default:j((()=>[f(a,{type:"primary",shape:"round",size:"small"},{default:j((()=>[b("修改")])),_:1})])),_:1},8,["action"])])]),v("div",null,[v("div",z,[b(h(c.className)+" ",1),v("span",null,[f(d,{trigger:["click"]},{overlay:j((()=>[f(r,null,{default:j((()=>[(m(!0),g(y,null,I(c.classInfos,(s=>(m(),w(i,{onClick:e=>{return a=s,c.className=a.classesName,c.master=a.master,c.studentNums=a.studentNums,c.teacherNums=a.teacherNums,c.sloganBeg.classesId=a.classesId,c.icon.id=a.classesId,c.icon.classesIcon=a.classesIcon,void Q();var a},key:s.id},{default:j((()=>[b(h(s.classesName),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:j((()=>[R])),_:1})])]),v("div",null,[M,v("span",null,h(c.master),1),f(u,{type:"vertical"}),O,v("span",null,h(c.teacherNums)+" 人",1),f(u,{type:"vertical"}),F,v("span",null,h(c.studentNums)+" 人",1)])])]),v("div",null,[c.sloganList.length?(m(),g("div",q,[v("div",D,[v("ul",E,[(m(!0),g(y,null,I(c.sloganList,(s=>(m(),g("li",{key:s.id},[v("span",G,h(s.project),1),v("span",J,h(s.projectValue),1)])))),128))])])])):(m(),g("div",S,[f(Z,{image:"image/empty.png",description:"暂无数据","image-style":{width:"100%",height:"180px"}})]))])])]),v("div",K,[f(ts,{"body-style":{maxHeight:"552px",overflow:"hidden",overflowY:"scroll"},visible:_.value,"onUpdate:visible":e[0]||(e[0]=s=>_.value=s),onCancel:H,title:"编辑"},{footer:j((()=>[f(a,{key:"back",onClick:H},{default:j((()=>[b("取消")])),_:1}),f(a,{loading:N.value,key:"submit",type:"primary",onClick:A},{default:j((()=>[b("确认")])),_:1},8,["loading"])])),default:j((()=>[(m(!0),g(y,null,I(c.setslogan.settings,((s,e)=>(m(),g("div",{class:"addText",key:s.sort},[v("div",P,[f(es,{compact:""},{default:j((()=>[f(ss,{value:s.project,"onUpdate:value":e=>s.project=e,"show-count":"",maxlength:6,onBlur:$,style:{width:"35%"},placeholder:"请输入项目名称","auto-size":{minRows:3,maxRows:3}},null,8,["value","onUpdate:value"]),f(ss,{value:s.projectValue,"onUpdate:value":e=>s.projectValue=e,"show-count":"",maxlength:100,style:{width:"65%"},placeholder:"请输入项目内容","auto-size":{minRows:3,maxRows:3}},null,8,["value","onUpdate:value"])])),_:2},1024)]),v("div",{class:"delText",onClick:a=>(async(s,e)=>{if(c.setslogan.settings.splice(e,1),s.id){const e={id:s.id};await t(e)}})(s,e)},"删除",8,T)])))),128)),f(a,{class:"addBtn",onClick:Y},{icon:j((()=>[f(as)])),default:j((()=>[b("新增项目 ")])),_:1})])),_:1},8,["visible"])])],64)}}}),[["__scopeId","data-v-49acb503"],["__file","C:/Users/66406/Desktop/ydproject/cloudSystem3.0/cloud-system-2.0/src/views/appModel/smartClassSign/classInfo/index.vue"]]);export{H as default};
