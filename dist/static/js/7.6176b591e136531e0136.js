webpackJsonp([7],{q5kf:function(t,s){},rbhr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("R2Fy"),a=e("GQaK"),n=e("mtWM"),o=e.n(n),r=e("7t+N"),c=e.n(r),l={data:function(){return{timeList:[{name:"15分钟",keys:"0.25"},{name:"半小时",keys:"0.5"},{name:"1小时",keys:"1"},{name:"2小时",keys:"2"},{name:"4小时",keys:"4"},{name:"8小时",keys:"8"},{name:"自定义",keys:"customize"}],applicationReason:"",appBoardroomId:"",selectChageTxt:"",startTime:"",phone:"",title:"",paths:"",items:"",time:"",sTs:"",dLs:"",sTsMinute:"",dLsMinute:"",clientHeight:null,clientWidth:780,timeBar:48,periods:[],Width:[]}},components:{VenueHead:i.a},created:function(){var t=this,s=this.selectedschool.user;this.$route.params.paths;this.appBoardroomId=this.$route.params.item.id,this.phone=s.phone,this.items=s,this.$nextTick(function(){t.InitTabScroll(),t.InitScroll()})},mounted:function(){var t=this;c()(".ys-end").jeDate({skinCell:"jedategreen",isinitVal:!0,festival:!1,initAddVal:[2,"hh"],format:"YYYY-MM-DD"}),this.occupation(),this.$nextTick(function(){t.InitTabScroll(),t.InitScroll()})},methods:{InitTabScroll:function(){this.scroll?this.scroll.refresh():this.scroll=new a.a(this.$refs.time_bar_content,{click:!0,scrollX:!0,eventPassthrough:"vertical"})},InitScroll:function(){this.clientHeight=""+document.documentElement.clientHeight-45,this.scrolls?this.scroll.refresh():this.scrolls=new a.a(this.$refs.periodList,{scrollY:!0,click:!0})},occupation:function(){var t=this,s=this,e={params:{startTime:this.$refs.ysEnd.value,detailId:this.appBoardroomId,sort:"startTime,asc"}};o.a.get("iapp/api/app/boardroom/appoint",e).then(function(e){e.data!=={}&&e.data&&(e.data[s.appBoardroomId].map(function(t){t.startTimes=t.startTime.substr(11,5),t.deadLines=t.deadLine.substr(11,5),t.sTs=t.startTime.substr(11,2),t.dLs=t.deadLine.substr(11,2),t.sTsMinute=t.startTime.substr(14,2),t.dLsMinute=t.deadLine.substr(14,2)}),s.periods=e.data[s.appBoardroomId],t.periods.map(function(t){t.Width=[];for(var s=parseInt(t.sTs);s<=parseInt(t.dLs);s++)t.Width.push(s)}),console.log(t.periods))})},btnClick:function(){var t=this.$Toast,s={params:{appBoardroomDetail:this.items}},e=this.selectChageTxt;this.applicationReason?(s.params.title=this.applicationReason,this.phone?(s.params.phone=this.phone,this.startTime=this.$refs.ysEnd.value,this.startTime?(s.params.startTime=this.startTime,this.time="customize"==e?this.$refs.customizeipt.value:e,this.time?(s.params.time=this.time,o.a.post("/iapp/api/app/boardroom/appoint/create",s).then(function(s){console.log(s,"ifasfasdf"),t.showToast({title:s.msg,mask:!1,icon:"icon-success",duration:1500})})):t.showToast({title:"使用时长不能为空",mask:!1,icon:"icon-success",duration:1500})):t.showToast({title:"开始时间不能为空",mask:!1,icon:"icon-success",duration:1500})):t.showToast({title:"电话不能为空",mask:!1,icon:"icon-success",duration:1500})):t.showToast({title:"申请理由不能为空",mask:!1,icon:"icon-success",duration:1500})}}},p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"submitReservation"},[e("venue-head",{attrs:{paths:t.paths,title:"我预约的",down:""}}),t._v(" "),e("ul",{staticClass:"reservatList"},[e("li",[e("span",[t._v("申请理由")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationReason,expression:"applicationReason"}],attrs:{type:"text",placeholder:"如：打球"},domProps:{value:t.applicationReason},on:{input:function(s){s.target.composing||(t.applicationReason=s.target.value)}}})]),t._v(" "),e("li",[e("span",[t._v("申请人")]),e("input",{attrs:{type:"text",placeholder:"张小情",readonly:""},domProps:{value:t.items.nickname}})]),t._v(" "),e("li",[e("span",[t._v("电话")]),e("input",{attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.items.phone}})])]),t._v(" "),e("div",{staticClass:"timeList"},[e("div",{staticClass:"statTime"},[t._v("开始时间 "),e("input",{ref:"ysEnd",staticClass:"ys-end",attrs:{type:"text",placeholder:"请选择"}})]),t._v(" "),e("div",{staticClass:"LengthUse"},[t._v("使用时长 \n      "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectChageTxt,expression:"selectChageTxt"}],staticClass:"lengthUseList",attrs:{name:""},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectChageTxt=s.target.multiple?e:e[0]}}},[e("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.timeList,function(s,i){return e("option",{key:i,domProps:{value:s.keys}},[t._v(t._s(s.name))])})],2),t._v(" "),"customize"==t.selectChageTxt?e("input",{ref:"customizeipt",staticClass:"customizeipt",attrs:{type:"text",placeholder:"自定时间段"}}):t._e()])]),t._v(" "),e("div",{staticClass:"time-occupy-available"},[t._m(0),t._v(" "),e("div",{ref:"time_bar_content",staticClass:"progress_bar"},[e("div",{staticClass:"time_bar_content",style:{width:this.clientWidth+"px"}},[t._l(t.timeBar,function(t,s){return e("span",{key:s,staticClass:"timeBar"})}),t._v(" "),t._l(t.timeBar,function(s,i){return t._l(t.periods,function(s){return e("i",{key:s.uid,staticClass:"numBar",class:{numBarbf:s.sTs==i},style:{left:16*i+"px",height:s.sTs==i?"57px":""}},[t._v(t._s(i))])})})],2)]),t._v(" "),e("div",{staticClass:"occupation-period"},[e("p",[t._v("已占用时间段")]),t._v(" "),e("div",{ref:"periodList",staticStyle:{height:"265px",overflow:"hidden"}},[e("ul",t._l(t.periods,function(s,i){return e("li",{key:i},[e("span",{staticClass:"occupy"},[t._v(t._s(s.startTimes)+"-"+t._s(s.deadLines))])])}),0)])])]),t._v(" "),e("div",{staticClass:"btnReservation"},[e("div",{staticClass:"btn",on:{click:t.btnClick}},[t._v("预约")])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"occupy-available"},[s("span",{staticClass:"occupy"},[this._v("已占用")]),this._v(" "),s("span",{staticClass:"available"},[this._v("可预约")])])}]};var d=e("VU/8")(l,p,!1,function(t){e("q5kf")},"data-v-0dbcab28",null);s.default=d.exports}});
//# sourceMappingURL=7.6176b591e136531e0136.js.map