import{h,r as _,aq as w,a as d,w as m,ac as I,j as n,k as o,l as k,F as O,Z as x,u as c,y as p,D as v,x as L,E as R,al as b,J as B}from"./vue.543fafcc.js";const D={class:"layout-padding layout-padding-unset layout-iframe"},E={class:"layout-padding-auto layout-padding-view"},P=["src","data-url"],S=h({name:"layoutIframeView"}),V=h({...S,props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>"slide-right"},list:{type:Array,default:()=>[]}},setup(f){const r=f,l=_(),i=w(),g=d(()=>r.list.filter(e=>{var t;return(t=e.meta)==null?void 0:t.isIframeOpen})),y=d(()=>i.path),u=(e,t)=>{B(()=>{if(!l.value)return!1;l.value.forEach(s=>{s.dataset.url===e&&(s.onload=()=>{var a;((a=t.meta)==null?void 0:a.isIframeOpen)&&t.meta.loading&&(t.meta.loading=!1)})})})};return m(()=>i.fullPath,e=>{const t=r.list.find(s=>s.path===e);if(!t)return!1;t.meta.isIframeOpen||(t.meta.isIframeOpen=!0),u(e,t)},{immediate:!0}),m(()=>r.refreshKey,()=>{const e=r.list.find(t=>t.path===i.path);if(!e)return!1;e.meta.isIframeOpen&&(e.meta.isIframeOpen=!1),setTimeout(()=>{e.meta.isIframeOpen=!0,e.meta.loading=!0,u(i.fullPath,e)})},{deep:!0}),(e,t)=>{const s=I("loading");return n(),o("div",D,[k("div",E,[(n(!0),o(O,null,x(c(g),a=>p((n(),o("div",{class:"w100",key:a.path,"element-loading-background":"white"},[v(b,{name:f.name,mode:"out-in"},{default:L(()=>[p((n(),o("iframe",{src:a.meta.isLink,key:a.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":a.path,ref_for:!0,ref_key:"iframeRef",ref:l},null,8,P)),[[R,c(y)===a.path]])]),_:2},1032,["name"])])),[[s,a.meta.loading]])),128))])])}}});export{V as default};
